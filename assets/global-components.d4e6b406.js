import{i as Sl,e as Da,t as Fo,r as F,c as m,o as ba,a as oo,w as Ge,R as yt,h as v,s as st,b as Uo,d as Ho,Q as Le,f as lo,g as it,j as Wt,k as We,l as lt,m as no,n as io,p as la,q as Wo,u as La,v as jo,x as Ko,T as wl,y as Oa,z as je,A as Ot,B as C,C as ne,D as u,E as Dt,F as I,G as l,H as ye,I as re,J as X,K as U,L as xe,M as Ut,N as Kt,O as Go,P as kl,S as dt,U as pt,V as He,W as Cl,X as Al,Y as _a,Z as ro,_ as so,$ as aa,a0 as na,a1 as Ba,a2 as x,a3 as Tl,a4 as Nt,a5 as Ml,a6 as Vl,a7 as jt,a8 as uo,a9 as $l,aa as ft,ab as El,ac as vt,ad as po,ae as go,af as Ll,ag as xt,ah as ho,ai as za,aj as ga,ak as Qo,al as Ol,am as xa,an as Tt,ao as Il,ap as bo,aq as ql,ar as Rl,as as Pl,at as Nl,au as Dl,av as _l,aw as Fa,ax as Bl,ay as yo,az as zl,aA as xl,aB as Fl,aC as Ul,aD as Hl,aE as Yo,aF as Wl}from"./index.4ac5b52d.js";import{u as jl,a as Ua,b as So,Q as Kl,c as Xt,d as Jt,e as Gl,f as Ql,g as kt,A as Xo,h as Qt,i as ut,j as wo,k as Ia,l as co,m as Yl,n as Xl,o as Jl,p as Ha,q as Te,r as W,s as St,t as ko,v as Zl,w as en}from"./audioIO.8089dec7.js";import{u as tn,a as an,b as on,c as ln,Q as $t,d as Gt,T as Jo,e as Se,t as nn,f as rn,g as Zo,h as mo,i as el,j as tl,k as al,n as Co,l as Ao,m as sn,o as un}from"./QBadge.a288ca0d.js";import{_ as Je}from"./plugin-vue_export-helper.21dcd24c.js";import{K as To,Q as ol,a as dn,J as cn}from"./JitsiContainer.f053aa42.js";let mn=0;const fn=["click","keydown"],vn={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${mn++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function pn(e,t,a,i){const n=Sl(Fo,Da);if(n===Da)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Da;const{proxy:c}=it(),s=F(null),o=F(null),f=F(null),b=m(()=>e.disable===!0||e.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},e.ripple===!0?{}:e.ripple)),S=m(()=>n.currentModel.value===e.name),L=m(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(S.value===!0?" q-tab--active"+(n.tabProps.value.activeClass?" "+n.tabProps.value.activeClass:"")+(n.tabProps.value.activeColor?` text-${n.tabProps.value.activeColor}`:"")+(n.tabProps.value.activeBgColor?` bg-${n.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(e.icon&&e.label&&n.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(e.noCaps===!0||n.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(e.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(i!==void 0?i.linkClass.value:"")),g=m(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(n.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(e.contentClass!==void 0?` ${e.contentClass}`:"")),h=m(()=>e.disable===!0||n.hasFocus.value===!0||S.value===!1&&n.hasActiveTab.value===!0?-1:e.tabindex||0);function $(w,M){if(M!==!0&&s.value!==null&&s.value.focus(),e.disable===!0){i!==void 0&&i.hasRouterLink.value===!0&&st(w);return}if(i===void 0){n.updateModel({name:e.name}),a("click",w);return}if(i.hasRouterLink.value===!0){const ee=(B={})=>{let me;const Ve=B.to===void 0||Wt(B.to,e.to)===!0?n.avoidRouteWatcher=jl():null;return i.navigateToRouterLink(w,{...B,returnRouterError:!0}).catch(Oe=>{me=Oe}).then(Oe=>{if(Ve===n.avoidRouteWatcher&&(n.avoidRouteWatcher=!1,me===void 0&&(Oe===void 0||Oe.message!==void 0&&Oe.message.startsWith("Avoided redundant navigation")===!0)&&n.updateModel({name:e.name})),B.returnRouterError===!0)return me!==void 0?Promise.reject(me):Oe})};a("click",w,ee),w.defaultPrevented!==!0&&ee();return}a("click",w)}function G(w){Uo(w,[13,32])?$(w,!0):Ho(w)!==!0&&w.keyCode>=35&&w.keyCode<=40&&w.altKey!==!0&&w.metaKey!==!0&&n.onKbdNavigate(w.keyCode,c.$el)===!0&&st(w),a("keydown",w)}function q(){const w=n.tabProps.value.narrowIndicator,M=[],ee=v("div",{ref:f,class:["q-tab__indicator",n.tabProps.value.indicatorClass]});e.icon!==void 0&&M.push(v(Le,{class:"q-tab__icon",name:e.icon})),e.label!==void 0&&M.push(v("div",{class:"q-tab__label"},e.label)),e.alert!==!1&&M.push(e.alertIcon!==void 0?v(Le,{class:"q-tab__alert-icon",color:e.alert!==!0?e.alert:void 0,name:e.alertIcon}):v("div",{class:"q-tab__alert"+(e.alert!==!0?` text-${e.alert}`:"")})),w===!0&&M.push(ee);const B=[v("div",{class:"q-focus-helper",tabindex:-1,ref:s}),v("div",{class:g.value},lo(t.default,M))];return w===!1&&B.push(ee),B}const ae={name:m(()=>e.name),rootRef:o,tabIndicatorRef:f,routeData:i};ba(()=>{n.unregisterTab(ae)}),oo(()=>{n.registerTab(ae)});function oe(w,M){const ee={ref:o,class:L.value,tabindex:h.value,role:"tab","aria-selected":S.value===!0?"true":"false","aria-disabled":e.disable===!0?"true":void 0,onClick:$,onKeydown:G,...M};return Ge(v(w,ee,q()),[[yt,b.value]])}return{renderTab:oe,$tabs:n}}var Qe=We({name:"QTab",props:vn,emits:fn,setup(e,{slots:t,emit:a}){const{renderTab:i}=pn(e,t,a);return()=>i("div")}});let ha=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const t=document.createElement("div");Object.assign(t.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(t),e.scrollLeft=-1e3,ha=e.scrollLeft>=0,e.remove()}function gn(e,t,a){const i=a===!0?["left","right"]:["top","bottom"];return`absolute-${t===!0?i[0]:i[1]}${e?` text-${e}`:""}`}const hn=["left","center","right","justify"];var Yt=We({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:e=>hn.includes(e)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(e,{slots:t,emit:a}){const{proxy:i}=it(),{$q:n}=i,{registerTick:c}=Ua(),{registerTick:s}=Ua(),{registerTick:o}=Ua(),{registerTimeout:f,removeTimeout:b}=So(),{registerTimeout:S,removeTimeout:L}=So(),g=F(null),h=F(null),$=F(e.modelValue),G=F(!1),q=F(!0),ae=F(!1),oe=F(!1),w=[],M=F(0),ee=F(!1);let B=null,me=null,Ve;const Oe=m(()=>({activeClass:e.activeClass,activeColor:e.activeColor,activeBgColor:e.activeBgColor,indicatorClass:gn(e.indicatorColor,e.switchIndicator,e.vertical),narrowIndicator:e.narrowIndicator,inlineLabel:e.inlineLabel,noCaps:e.noCaps})),Fe=m(()=>{const A=M.value,R=$.value;for(let Y=0;Y<A;Y++)if(w[Y].name.value===R)return!0;return!1}),we=m(()=>`q-tabs__content--align-${G.value===!0?"left":oe.value===!0?"justify":e.align}`),z=m(()=>`q-tabs row no-wrap items-center q-tabs--${G.value===!0?"":"not-"}scrollable q-tabs--${e.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${e.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${e.mobileArrows===!0?"":"out"}-arrows`+(e.dense===!0?" q-tabs--dense":"")+(e.shrink===!0?" col-shrink":"")+(e.stretch===!0?" self-stretch":"")),Ee=m(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+we.value+(e.contentClass!==void 0?` ${e.contentClass}`:"")),_e=m(()=>e.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),Ye=m(()=>e.vertical!==!0&&n.lang.rtl===!0),fe=m(()=>ha===!1&&Ye.value===!0);lt(Ye,O),lt(()=>e.modelValue,A=>{Xe({name:A,setCurrent:!0,skipEmit:!0})}),lt(()=>e.outsideArrows,Ke);function Xe({name:A,setCurrent:R,skipEmit:Y}){$.value!==A&&(Y!==!0&&e["onUpdate:modelValue"]!==void 0&&a("update:modelValue",A),(R===!0||e["onUpdate:modelValue"]===void 0)&&(rt($.value,A),$.value=A))}function Ke(){c(()=>{tt({width:g.value.offsetWidth,height:g.value.offsetHeight})})}function tt(A){if(_e.value===void 0||h.value===null)return;const R=A[_e.value.container],Y=Math.min(h.value[_e.value.scroll],Array.prototype.reduce.call(h.value.children,(be,ue)=>be+(ue[_e.value.content]||0),0)),he=R>0&&Y>R;G.value=he,he===!0&&s(O),oe.value=R<parseInt(e.breakpoint,10)}function rt(A,R){const Y=A!=null&&A!==""?w.find(be=>be.name.value===A):null,he=R!=null&&R!==""?w.find(be=>be.name.value===R):null;if(qe===!0)qe=!1;else if(Y&&he){const be=Y.tabIndicatorRef.value,ue=he.tabIndicatorRef.value;B!==null&&(clearTimeout(B),B=null),be.style.transition="none",be.style.transform="none",ue.style.transition="none",ue.style.transform="none";const de=be.getBoundingClientRect(),Re=ue.getBoundingClientRect();ue.style.transform=e.vertical===!0?`translate3d(0,${de.top-Re.top}px,0) scale3d(1,${Re.height?de.height/Re.height:1},1)`:`translate3d(${de.left-Re.left}px,0,0) scale3d(${Re.width?de.width/Re.width:1},1,1)`,o(()=>{B=setTimeout(()=>{B=null,ue.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",ue.style.transform="none"},70)})}he&&G.value===!0&&p(he.rootRef.value)}function p(A){const{left:R,width:Y,top:he,height:be}=h.value.getBoundingClientRect(),ue=A.getBoundingClientRect();let de=e.vertical===!0?ue.top-he:ue.left-R;if(de<0){h.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(de),O();return}de+=e.vertical===!0?ue.height-be:ue.width-Y,de>0&&(h.value[e.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(de),O())}function O(){const A=h.value;if(A===null)return;const R=A.getBoundingClientRect(),Y=e.vertical===!0?A.scrollTop:Math.abs(A.scrollLeft);Ye.value===!0?(q.value=Math.ceil(Y+R.width)<A.scrollWidth-1,ae.value=Y>0):(q.value=Y>0,ae.value=e.vertical===!0?Math.ceil(Y+R.height)<A.scrollHeight:Math.ceil(Y+R.width)<A.scrollWidth)}function P(A){me!==null&&clearInterval(me),me=setInterval(()=>{te(A)===!0&&K()},5)}function ge(){P(fe.value===!0?Number.MAX_SAFE_INTEGER:0)}function J(){P(fe.value===!0?0:Number.MAX_SAFE_INTEGER)}function K(){me!==null&&(clearInterval(me),me=null)}function le(A,R){const Y=Array.prototype.filter.call(h.value.children,Re=>Re===R||Re.matches&&Re.matches(".q-tab.q-focusable")===!0),he=Y.length;if(he===0)return;if(A===36)return p(Y[0]),Y[0].focus(),!0;if(A===35)return p(Y[he-1]),Y[he-1].focus(),!0;const be=A===(e.vertical===!0?38:37),ue=A===(e.vertical===!0?40:39),de=be===!0?-1:ue===!0?1:void 0;if(de!==void 0){const Re=Ye.value===!0?-1:1,Pe=Y.indexOf(R)+de*Re;return Pe>=0&&Pe<he&&(p(Y[Pe]),Y[Pe].focus({preventScroll:!0})),!0}}const Me=m(()=>fe.value===!0?{get:A=>Math.abs(A.scrollLeft),set:(A,R)=>{A.scrollLeft=-R}}:e.vertical===!0?{get:A=>A.scrollTop,set:(A,R)=>{A.scrollTop=R}}:{get:A=>A.scrollLeft,set:(A,R)=>{A.scrollLeft=R}});function te(A){const R=h.value,{get:Y,set:he}=Me.value;let be=!1,ue=Y(R);const de=A<ue?-1:1;return ue+=de*5,ue<0?(be=!0,ue=0):(de===-1&&ue<=A||de===1&&ue>=A)&&(be=!0,ue=A),he(R,ue),O(),be}function Ie(A,R){for(const Y in A)if(A[Y]!==R[Y])return!1;return!0}function Ue(){let A=null,R={matchedLen:0,queryDiff:9999,hrefLen:0};const Y=w.filter(de=>de.routeData!==void 0&&de.routeData.hasRouterLink.value===!0),{hash:he,query:be}=i.$route,ue=Object.keys(be).length;for(const de of Y){const Re=de.routeData.exact.value===!0;if(de.routeData[Re===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:Pe,query:at,matched:ct,href:k}=de.routeData.resolvedLink.value,_=Object.keys(at).length;if(Re===!0){if(Pe!==he||_!==ue||Ie(be,at)===!1)continue;A=de.name.value;break}if(Pe!==""&&Pe!==he||_!==0&&Ie(at,be)===!1)continue;const ie={matchedLen:ct.length,queryDiff:ue-_,hrefLen:k.length-Pe.length};if(ie.matchedLen>R.matchedLen){A=de.name.value,R=ie;continue}else if(ie.matchedLen!==R.matchedLen)continue;if(ie.queryDiff<R.queryDiff)A=de.name.value,R=ie;else if(ie.queryDiff!==R.queryDiff)continue;ie.hrefLen>R.hrefLen&&(A=de.name.value,R=ie)}if(A===null&&w.some(de=>de.routeData===void 0&&de.name.value===$.value)===!0){qe=!1;return}Xe({name:A,setCurrent:!0})}function y(A){if(b(),ee.value!==!0&&g.value!==null&&A.target&&typeof A.target.closest=="function"){const R=A.target.closest(".q-tab");R&&g.value.contains(R)===!0&&(ee.value=!0,G.value===!0&&p(R))}}function N(){f(()=>{ee.value=!1},30)}function j(){$e.avoidRouteWatcher===!1?S(Ue):L()}function Z(){if(Ve===void 0){const A=lt(()=>i.$route.fullPath,j);Ve=()=>{A(),Ve=void 0}}}function ke(A){w.push(A),M.value++,Ke(),A.routeData===void 0||i.$route===void 0?S(()=>{if(G.value===!0){const R=$.value,Y=R!=null&&R!==""?w.find(he=>he.name.value===R):null;Y&&p(Y.rootRef.value)}}):(Z(),A.routeData.hasRouterLink.value===!0&&j())}function Q(A){w.splice(w.indexOf(A),1),M.value--,Ke(),Ve!==void 0&&A.routeData!==void 0&&(w.every(R=>R.routeData===void 0)===!0&&Ve(),j())}const $e={currentModel:$,tabProps:Oe,hasFocus:ee,hasActiveTab:Fe,registerTab:ke,unregisterTab:Q,verifyRouteModel:j,updateModel:Xe,onKbdNavigate:le,avoidRouteWatcher:!1};Wo(Fo,$e);function Ae(){B!==null&&clearTimeout(B),K(),Ve!==void 0&&Ve()}let Be,qe;return ba(Ae),no(()=>{Be=Ve!==void 0,Ae()}),io(()=>{Be===!0&&(Z(),qe=!0,j()),Ke()}),()=>v("div",{ref:g,class:z.value,role:"tablist",onFocusin:y,onFocusout:N},[v(Kl,{onResize:tt}),v("div",{ref:h,class:Ee.value,onScroll:O},la(t.default)),v(Le,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(q.value===!0?"":" q-tabs__arrow--faded"),name:e.leftIcon||n.iconSet.tabs[e.vertical===!0?"up":"left"],onMousedownPassive:ge,onTouchstartPassive:ge,onMouseupPassive:K,onMouseleavePassive:K,onTouchendPassive:K}),v(Le,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(ae.value===!0?"":" q-tabs__arrow--faded"),name:e.rightIcon||n.iconSet.tabs[e.vertical===!0?"down":"right"],onMousedownPassive:J,onTouchstartPassive:J,onMouseupPassive:K,onMouseleavePassive:K,onTouchendPassive:K})])}}),et=We({name:"QTabPanel",props:tn,setup(e,{slots:t}){return()=>v("div",{class:"q-tab-panel",role:"tabpanel"},la(t.default))}}),ia=We({name:"QTabPanels",props:{...an,...Xt},emits:on,setup(e,{slots:t}){const a=it(),i=Jt(e,a.proxy.$q),{updatePanelsList:n,getPanelContent:c,panelDirectives:s}=ln(),o=m(()=>"q-tab-panels q-panel-parent"+(i.value===!0?" q-tab-panels--dark q-dark":""));return()=>(n(t),La("div",{class:o.value},c(),"pan",e.swipeable,()=>s.value))}});const bn='<g transform="translate(-20,-20)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="90 50 50" to="0 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g><g transform="translate(20,20) rotate(15 50 50)"><path d="M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z" fill="currentColor"><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="90 50 50" dur="1s" repeatCount="indefinite"></animateTransform></path></g>';var yn=We({name:"QSpinnerGears",props:jo,setup(e){const{cSize:t,classes:a}=Ko(e);return()=>v("svg",{class:a.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg",innerHTML:bn})}}),ll=We({name:"QInnerLoading",props:{...Xt,...Gl,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:t}){const a=it(),i=Jt(e,a.proxy.$q),{transitionProps:n,transitionStyle:c}=Ql(e),s=m(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(i.value===!0?" q-inner-loading--dark":"")),o=m(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function f(){const S=[v(Oa,{size:e.size,color:e.color})];return e.label!==void 0&&S.push(v("div",{class:o.value,style:e.labelStyle},[e.label])),S}function b(){return e.showing===!0?v("div",{class:s.value,style:c.value},t.default!==void 0?t.default():f()):null}return()=>v(wl,n.value,b)}}),nl=We({name:"QBar",props:{...Xt,dense:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=it(),i=Jt(e,a),n=m(()=>`q-bar row no-wrap items-center q-bar--${e.dense===!0?"dense":"standard"}  q-bar--${i.value===!0?"dark":"light"}`);return()=>v("div",{class:n.value,role:"toolbar"},la(t.default))}}),fo=We({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:t}){const a=m(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>v(e.tag,{class:a.value},la(t.default))}});const Sn=je({props:{icon:{type:String,required:!0},title:{type:String,required:!0},hoverShowBar:{type:Boolean,default:!1},transparentOnIdle:{type:Boolean,default:!1},defaultHeight:{type:Number,required:!0,default:400},defaultWidth:{type:Number,default:300},minimumHeight:{type:Number,default:50},minimumWidth:{type:Number,default:50},maximumHeight:{type:Number,default:void 0},maximumWidth:{type:Number,default:void 0},defaultTop:{type:Number,default:200},defaultLeft:{type:Number,default:400},minimumExposure:{type:Number,default:100},canMove:{type:Boolean,default:!0},canResize:{type:Boolean,default:!0},canResizeWidth:{type:Boolean,default:!0},canResizeHeight:{type:Boolean,default:!0},dragMoveDebounce:{type:Number,default:10},spawnSnappedTo:{type:String,default:void 0},managerProps:{type:Object,default:()=>({})}},setup(){return{applicationStore:Ot}},data(e){return{height:e.defaultHeight,width:e.defaultWidth,top:e.defaultTop,left:e.defaultLeft,overlayStatus:"restored",heightWhenMinimized:32,hovered:!1,dragAction:"NONE",dragStart:{x:0,y:0},mouseCaptured:!1,onDragMoveReady:!0,windowCache:{}}},computed:{isMaximized(){return this.overlayStatus==="maximized"},isMinimized(){return this.overlayStatus==="minimized"},showWindowTitleBar(){return!this.hoverShowBar||this.hovered||this.isMinimized||this.isMaximized},showWindowContent(){return!this.isMinimized},getWindowStyle(){if(this.applicationStore.theme.globalStyle==="none")return this.$q.dark.isActive?"#121212":"#ffffff";const e={aero:"80",mica:"ff"};if(this.$props.transparentOnIdle&&!this.hovered)return"#0002";if(this.applicationStore.theme.windowStyle==="none")return this.$q.dark.isActive?"#1D1D1D":"#fff";const a={"gradient-top":"circle at 50% 0%","gradient-right":"circle at 100% 50%","gradient-bottom":"circle at 50% 100%","gradient-left":"circle at 0% 50%"}[this.applicationStore.theme.windowStyle],i=this.applicationStore.theme.colors.primary,n=this.applicationStore.theme.colors.secondary,c=this.$q.dark.isActive?"#121212":"#ffffff",s=e[this.applicationStore.theme.globalStyle];return`radial-gradient(${a}, ${n}30 15%, ${i}30 40%, ${c} 95%), linear-gradient(${c}${s}, ${c}${s})`}},watch:{overlayStatus(){this.refinePosition()},"managerProps.overlayStatus"(e){this.overlayStatus=e}},methods:{dragBehavior(e){let t=0,a=0,i=0,n=0;switch(e){case"move":t=1,a=1;break;case"resize-top":t=1,n=-1;break;case"resize-bottom":n=1;break;case"resize-left":a=1,i=-1;break;case"resize-right":i=1;break;case"resize-nw":t=1,a=1,n=-1,i=-1;break;case"resize-ne":t=1,n=-1,i=1;break;case"resize-sw":a=1,i=-1,n=1;break;case"resize-se":n=1,i=1;break}return{top:t,left:a,width:i,height:n}},beginAction(e,t){this.dragAction&&this.dragAction!=="NONE"||(this.cacheWindowParams(),this.dragStart=this.getEventPosition(e),this.dragAction=t,this.mouseCaptured=!0)},applyDrag(e,t){if(!this.dragAction||!this.dragStart)return;const a=this.dragBehavior(this.dragAction);let i=e-this.dragStart.x,n=t-this.dragStart.y,c=this.width+i*a.width;this.minimumWidth&&c<this.minimumWidth&&(c=this.minimumWidth,i=(c-this.width)*a.width),this.maximumWidth&&c>this.maximumWidth&&(c=this.maximumWidth,i=(c-this.width)*a.width);let s=this.height+n*a.height;this.minimumHeight&&s<this.minimumHeight&&(s=this.minimumHeight,n=(s-this.height)*a.height),this.maximumHeight&&s>this.maximumHeight&&(s=this.maximumHeight,n=(s-this.height)*a.height),this.width=c,this.height=s,this.top+=n*a.top,this.left+=i*a.left,this.dragStart={x:e,y:t}},onDragMove(e){if(this.cacheWindowParams(),this.onDragMoveReady){const t=this.getEventPosition(e);this.applyDrag(t.x,t.y),this.onDragMoveReady=!1,window.setTimeout(()=>{this.onDragMoveReady=!0},this.dragMoveDebounce)}},onDragDone(e){this.cacheWindowParams();const t=this.getEventPosition(e);this.applyDrag(t.x,t.y),this.mouseCaptured=!1,this.dragAction="NONE",this.dragStart={x:0,y:0},this.refinePosition()},snapTo(e){e==="top"?this.top=0:e==="right"?this.left=this.windowCache.innerWidth:e==="bottom"?this.top=this.windowCache.innerHeight:e==="left"&&(this.left=0)},cacheWindowParams(){var e;this.windowCache={innerWidth:window.innerWidth,innerHeight:((e=document.body.querySelector("main"))==null?void 0:e.clientHeight)||window.innerHeight}},refinePosition(){this.top<0&&(this.top=0),this.overlayStatus==="minimized"?this.top>this.windowCache.innerHeight-this.heightWhenMinimized&&(this.top=this.windowCache.innerHeight-this.heightWhenMinimized):this.top>this.windowCache.innerHeight-this.height&&(this.top=this.windowCache.innerHeight-this.height),this.left<0&&(this.left=0),this.left>this.windowCache.innerWidth-this.width&&(this.left=this.windowCache.innerWidth-this.width)},refineSize(){this.width<0&&(this.width=0),this.width>this.windowCache.innerWidth&&(this.width=this.windowCache.innerWidth),this.height<0&&(this.height=0),this.height>this.windowCache.innerHeight&&(this.height=this.windowCache.innerHeight)},getEventPosition(e){let t={x:0,y:300};return"touches"in e&&e.touches.length>0?t={x:e.touches[0].clientX,y:e.touches[0].clientY}:"changedTouches"in e&&e.changedTouches.length>0?t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:"clientX"in e&&(t={x:e.clientX,y:e.clientY}),t}},mounted(){this.cacheWindowParams(),this.snapTo(this.spawnSnappedTo),this.refinePosition(),this.refineSize(),window.addEventListener("resize",()=>{this.cacheWindowParams(),this.refinePosition()}),document.addEventListener("mousemove",e=>{this.mouseCaptured&&this.onDragMove(e)},!0),document.addEventListener("mouseup",e=>{this.mouseCaptured&&this.onDragDone(e)},!0),document.addEventListener("touchmove",e=>{this.mouseCaptured&&this.onDragMove(e)},!0),document.addEventListener("touchend",e=>{this.mouseCaptured&&this.onDragDone(e)},!0)}}),wn={key:0,version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24",style:{"enable-background":"new 0 0 24 24",width:"1.715em",color:"inherit"},"xml:space":"preserve"};function kn(e,t,a,i,n,c){return C(),ne(kt,{class:"outer column no-wrap items-stretch",onMouseenter:t[25]||(t[25]=s=>e.hovered=!0),onMouseleave:t[26]||(t[26]=s=>e.hovered=!1),onMousedown:t[27]||(t[27]=s=>e.$emit("overlay-action","select")),style:Dt({height:e.isMaximized?"100%":(e.showWindowContent?e.height:e.heightWhenMinimized)+"px",width:e.isMaximized?"100%":e.width+"px",top:`${e.isMaximized||e.top<0?0:e.showWindowContent?e.top>e.windowCache.innerHeight-e.height?e.windowCache.innerHeight-e.height:e.top:e.top>e.windowCache.innerHeight-e.heightWhenMinimized?e.windowCache.innerHeight-e.heightWhenMinimized:e.top}px`,left:`${e.isMaximized||e.left<0?0:e.left>e.windowCache.innerWidth-e.width?e.windowCache.innerWidth-e.width:e.left}px`,background:e.getWindowStyle,backgroundAttachment:"fixed",backdropFilter:e.applicationStore.theme.globalStyle==="aero"?"blur(10px)":"unset",borderRadius:e.isMaximized?"0px":"5px",transition:"0.2s ease background",overflow:e.showWindowContent?"hidden":"show"})},{default:u(()=>[I("div",{class:"bar-container",style:Dt({position:e.hoverShowBar?"absolute":"relative"})},[l(nl,{class:Ut(["bar",{"bar-hidden":!e.showWindowTitleBar}])},{default:u(()=>[l(Le,{name:e.icon,onMousedown:t[0]||(t[0]=s=>e.canMove&&e.beginAction(s,"move")),onTouchstart:t[1]||(t[1]=ye(s=>e.canMove&&e.beginAction(s,"move"),["stop"]))},null,8,["name"]),I("div",{class:"title",onMousedown:t[2]||(t[2]=s=>e.canMove&&e.beginAction(s,"move")),onTouchstart:t[3]||(t[3]=ye(s=>e.canMove&&e.beginAction(s,"move"),["stop"]))},re(e.title),33),I("div",{class:"col full-height",onMousedown:t[4]||(t[4]=s=>e.canMove&&e.beginAction(s,"move")),onTouchstart:t[5]||(t[5]=ye(s=>e.canMove&&e.beginAction(s,"move"),["stop"]))},null,32),l(X,{dense:"",flat:"",icon:e.overlayStatus==="minimized"?"expand_more":"minimize",onClick:t[6]||(t[6]=s=>e.$emit("overlay-action","minimize"))},null,8,["icon"]),l(X,{dense:"",flat:"",icon:e.overlayStatus==="maximized"?void 0:"crop_square",onClick:t[7]||(t[7]=s=>e.$emit("overlay-action","maximize"))},{default:u(()=>[e.overlayStatus==="maximized"?(C(),U("svg",wn,t[28]||(t[28]=[I("path",{fill:"none",d:"M-2,2h24v24H-2V2z"},null,-1),I("path",{fill:"currentColor",d:`M16,6H4C2.9,6,2,6.9,2,8v12c0,1.1,0.9,2,2,\r
                            2h12c1.1,0,2-0.9,2-2V8C18,6.9,17.1,6,16,6z M16,20H4V8h12V20z`},null,-1),I("path",{fill:"currentColor",d:`M20,18c1.1,0,2-0.9,\r
                            2-2V4c0-1.1-0.9-2-2-2H8C6.9,2,6,2.9,6,4v2l2,0V4h12v12h-2l0,2H20z`},null,-1)]))):xe("",!0)]),_:1},8,["icon"]),l(X,{dense:"",flat:"",icon:"close",onClick:t[8]||(t[8]=s=>e.$emit("overlay-action","close"))})]),_:1},8,["class"])],4),Ge(l(fo,{class:"col q-pa-none",style:Dt(e.hoverShowBar?"margin-top: 32px;":"")},{default:u(()=>[Go(e.$slots,"default",{},void 0,!0)]),_:3},8,["style"]),[[Kt,e.showWindowContent]]),e.canResize&&e.canResizeHeight&&!e.isMinimized&&!e.isMaximized?(C(),U("div",{key:0,class:"resize resize-top",onMousedown:t[9]||(t[9]=s=>e.beginAction(s,"resize-top")),onTouchstart:t[10]||(t[10]=ye(s=>e.beginAction(s,"resize-top"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeHeight&&!e.isMinimized&&!e.isMaximized?(C(),U("div",{key:1,class:"resize resize-bottom",onMousedown:t[11]||(t[11]=s=>e.beginAction(s,"resize-bottom")),onTouchstart:t[12]||(t[12]=ye(s=>e.beginAction(s,"resize-bottom"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeWidth&&!e.isMaximized?(C(),U("div",{key:2,class:"resize resize-left",onMousedown:t[13]||(t[13]=s=>e.beginAction(s,"resize-left")),onTouchstart:t[14]||(t[14]=ye(s=>e.beginAction(s,"resize-left"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeWidth&&!e.isMaximized?(C(),U("div",{key:3,class:"resize resize-right",onMousedown:t[15]||(t[15]=s=>e.beginAction(s,"resize-right")),onTouchstart:t[16]||(t[16]=ye(s=>e.beginAction(s,"resize-right"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(C(),U("div",{key:4,class:"resize resize-nw",onMousedown:t[17]||(t[17]=s=>e.beginAction(s,"resize-nw")),onTouchstart:t[18]||(t[18]=ye(s=>e.beginAction(s,"resize-nw"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(C(),U("div",{key:5,class:"resize resize-ne",onMousedown:t[19]||(t[19]=s=>e.beginAction(s,"resize-ne")),onTouchstart:t[20]||(t[20]=ye(s=>e.beginAction(s,"resize-ne"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(C(),U("div",{key:6,class:"resize resize-sw",onMousedown:t[21]||(t[21]=s=>e.beginAction(s,"resize-sw")),onTouchstart:t[22]||(t[22]=ye(s=>e.beginAction(s,"resize-sw"),["stop"]))},null,32)):xe("",!0),e.canResize&&e.canResizeHeight&&e.canResizeWidth&&!e.isMinimized&&!e.isMaximized?(C(),U("div",{key:7,class:"resize resize-se",onMousedown:t[23]||(t[23]=s=>e.beginAction(s,"resize-se")),onTouchstart:t[24]||(t[24]=ye(s=>e.beginAction(s,"resize-se"),["stop"]))},null,32)):xe("",!0)]),_:3},8,["style"])}var Ct=Je(Sn,[["render",kn],["__scopeId","data-v-56de444f"]]);const Cn=je({name:"AudioOverlay",props:{propsToPass:{type:Object,default:()=>({}),required:!1}},components:{OverlayShell:Ct},setup(){return{applicationStore:Ot,AudioIO:Xo}},data(){return{tab:"input",isListeningToFeedback:!1}},methods:{toggleMicrophoneMute(){this.applicationStore.audio.user.hasInputAccess&&kl.muteAudio()},toggleInputFeedback(){this.isListeningToFeedback=!this.isListeningToFeedback,this.isListeningToFeedback?(this.$refs.audioInputFeedbackPlayer.muted=!1,this.$refs.audioInputFeedbackPlayer.play()):this.$refs.audioInputFeedbackPlayer.pause()},setFeedbackPlayerStream(e){this.isListeningToFeedback&&this.$refs.audioInputFeedbackPlayer&&(typeof e=="string"?this.$refs.audioInputFeedbackPlayer.src=e:this.$refs.audioInputFeedbackPlayer.srcObject=e)}},unmounted:function(){this.isListeningToFeedback=!1,this.setFeedbackPlayerStream(null)}}),An={class:"row"},Tn={class:".col-4"},Mn={class:".col-8 row items-center"},Vn={key:0,class:"text-subtitle1 items-center"},$n={key:1,class:"text-subtitle1 items-center"},En={class:"row q-mt-sm"},Ln={key:0,class:"text-caption row items-center"},On={key:1,class:"text-caption row items-center"},In={ref:"audioInputFeedbackPlayer"},qn={key:0,class:"text-subtitle1 text-grey text-center"},Rn={class:".col-8 row items-center"},Pn={key:0,class:"text-subtitle1 items-center"},Nn={key:1,class:"text-subtitle1 items-center"};function Dn(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"headphones",title:"Audio",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400},{default:u(()=>[l(kt,{class:"column full-height"},{default:u(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tab=o),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:u(()=>[l(Qe,{name:"input",label:"Input"}),l(Qe,{name:"output",label:"Output"})]),_:1},8,["modelValue"]),l(Qt),l($t,{class:"col"},{default:u(()=>[l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[3]||(t[3]=o=>e.tab=o),animated:""},{default:u(()=>[l(et,{name:"input"},{default:u(()=>[I("div",An,[I("div",Tn,[l(X,{fab:"",class:"q-mr-sm",color:e.applicationStore.audio.user.hasInputAccess?e.applicationStore.audio.user.muted?"red":"primary":"grey",icon:e.applicationStore.audio.user.muted?"mic_off":"mic",onClick:e.toggleMicrophoneMute},null,8,["color","icon","onClick"])]),I("div",Mn,[e.AudioIO.selectedInput!=="None selected"?(C(),U("span",Vn," Using "+re(e.AudioIO.selectedInput),1)):(C(),U("span",$n," No microphone selected. "))])]),Ge(I("div",En,[l(X,{flat:"",dense:"",round:"",class:"q-mr-sm",disabled:!e.applicationStore.audio.user.hasInputAccess,color:e.isListeningToFeedback?"primary":"red",icon:e.isListeningToFeedback?"hearing":"hearing_disabled",onClick:e.toggleInputFeedback},null,8,["disabled","color","icon","onClick"]),e.isListeningToFeedback?(C(),U("span",On," Speak into your microphone to listen. ")):(C(),U("span",Ln," Click to test your microphone. ")),I("audio",In,null,512)],512),[[Kt,e.applicationStore.audio.user.hasInputAccess]]),l(Qt,{class:"q-my-md"}),e.applicationStore.audio.user.hasInputAccess?(C(),ne(ut,{key:1},{default:u(()=>[(C(!0),U(He,null,pt(e.applicationStore.audio.inputsList,o=>(C(),U("div",{key:o.deviceId},[l(wo,{onClick:f=>e.AudioIO.requestInputAccess(o.deviceId),modelValue:e.AudioIO.selectedInput,"onUpdate:modelValue":t[1]||(t[1]=f=>e.AudioIO.selectedInput=f),val:o.label,label:o.label,color:"primary"},null,8,["onClick","modelValue","val","label"])]))),128))]),_:1})):(C(),U("div",qn," Please grant mic access to the app in order to speak. "))]),_:1}),l(et,{name:"output"},{default:u(()=>[I("div",Rn,[e.AudioIO.selectedOutput?(C(),U("span",Pn," Using "+re(e.AudioIO.selectedOutput),1)):(C(),U("span",Nn," No output selected. "))]),l(Qt,{class:"q-my-md"}),l(ut,null,{default:u(()=>[(C(!0),U(He,null,pt(e.applicationStore.audio.outputsList,o=>(C(),U("div",{key:o.deviceId},[l(wo,{onClick:f=>e.AudioIO.requestOutputAccess(o.deviceId),modelValue:e.AudioIO.selectedOutput,"onUpdate:modelValue":t[2]||(t[2]=f=>e.AudioIO.selectedOutput=f),val:o.label,label:o.label,color:"primary"},null,8,["onClick","modelValue","val","label"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(ll,{showing:e.applicationStore.audio.inputsList.length===0},{default:u(()=>[l(yn,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1},8,["managerProps"])}var _n=Je(Cn,[["render",Dn]]);const Mo="q-slider__marker-labels",Bn=e=>({value:e}),zn=({marker:e})=>v("div",{key:e.value,style:e.style,class:e.classes},e.label),il=[34,37,40,33,39,38],xn={...Xt,...Ia,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Fn=["pan","update:modelValue","change"];function Un({updateValue:e,updatePosition:t,getDragging:a,formAttrs:i}){const{props:n,emit:c,slots:s,proxy:{$q:o}}=it(),f=Jt(n,o),b=co(i),S=F(!1),L=F(!1),g=F(!1),h=F(!1),$=m(()=>n.vertical===!0?"--v":"--h"),G=m(()=>"-"+(n.switchLabelSide===!0?"switched":"standard")),q=m(()=>n.vertical===!0?n.reverse===!0:n.reverse!==(o.lang.rtl===!0)),ae=m(()=>isNaN(n.innerMin)===!0||n.innerMin<n.min?n.min:n.innerMin),oe=m(()=>isNaN(n.innerMax)===!0||n.innerMax>n.max?n.max:n.innerMax),w=m(()=>n.disable!==!0&&n.readonly!==!0&&ae.value<oe.value),M=m(()=>{if(n.step===0)return _=>_;const k=(String(n.step).trim().split(".")[1]||"").length;return _=>parseFloat(_.toFixed(k))}),ee=m(()=>n.step===0?1:n.step),B=m(()=>w.value===!0?n.tabindex||0:-1),me=m(()=>n.max-n.min),Ve=m(()=>oe.value-ae.value),Oe=m(()=>Ue(ae.value)),Fe=m(()=>Ue(oe.value)),we=m(()=>n.vertical===!0?q.value===!0?"bottom":"top":q.value===!0?"right":"left"),z=m(()=>n.vertical===!0?"height":"width"),Ee=m(()=>n.vertical===!0?"width":"height"),_e=m(()=>n.vertical===!0?"vertical":"horizontal"),Ye=m(()=>{const k={role:"slider","aria-valuemin":ae.value,"aria-valuemax":oe.value,"aria-orientation":_e.value,"data-step":n.step};return n.disable===!0?k["aria-disabled"]="true":n.readonly===!0&&(k["aria-readonly"]="true"),k}),fe=m(()=>`q-slider q-slider${$.value} q-slider--${S.value===!0?"":"in"}active inline no-wrap `+(n.vertical===!0?"row":"column")+(n.disable===!0?" disabled":" q-slider--enabled"+(w.value===!0?" q-slider--editable":""))+(g.value==="both"?" q-slider--focus":"")+(n.label||n.labelAlways===!0?" q-slider--label":"")+(n.labelAlways===!0?" q-slider--label-always":"")+(f.value===!0?" q-slider--dark":"")+(n.dense===!0?" q-slider--dense q-slider--dense"+$.value:""));function Xe(k){const _="q-slider__"+k;return`${_} ${_}${$.value} ${_}${$.value}${G.value}`}function Ke(k){const _="q-slider__"+k;return`${_} ${_}${$.value}`}const tt=m(()=>{const k=n.selectionColor||n.color;return"q-slider__selection absolute"+(k!==void 0?` text-${k}`:"")}),rt=m(()=>Ke("markers")+" absolute overflow-hidden"),p=m(()=>Ke("track-container")),O=m(()=>Xe("pin")),P=m(()=>Xe("label")),ge=m(()=>Xe("text-container")),J=m(()=>Xe("marker-labels-container")+(n.markerLabelsClass!==void 0?` ${n.markerLabelsClass}`:"")),K=m(()=>"q-slider__track relative-position no-outline"+(n.trackColor!==void 0?` bg-${n.trackColor}`:"")),le=m(()=>{const k={[Ee.value]:n.trackSize};return n.trackImg!==void 0&&(k.backgroundImage=`url(${n.trackImg}) !important`),k}),Me=m(()=>"q-slider__inner absolute"+(n.innerTrackColor!==void 0?` bg-${n.innerTrackColor}`:"")),te=m(()=>{const k=Fe.value-Oe.value,_={[we.value]:`${100*Oe.value}%`,[z.value]:k===0?"2px":`${100*k}%`};return n.innerTrackImg!==void 0&&(_.backgroundImage=`url(${n.innerTrackImg}) !important`),_});function Ie(k){const{min:_,max:ie,step:Ce}=n;let Ne=_+k*(ie-_);if(Ce>0){const mt=(Ne-ae.value)%Ce;Ne+=(Math.abs(mt)>=Ce/2?(mt<0?-1:1)*Ce:0)-mt}return Ne=M.value(Ne),Gt(Ne,ae.value,oe.value)}function Ue(k){return me.value===0?0:(k-n.min)/me.value}function y(k,_){const ie=Cl(k),Ce=n.vertical===!0?Gt((ie.top-_.top)/_.height,0,1):Gt((ie.left-_.left)/_.width,0,1);return Gt(q.value===!0?1-Ce:Ce,Oe.value,Fe.value)}const N=m(()=>Al(n.markers)===!0?n.markers:ee.value),j=m(()=>{const k=[],_=N.value,ie=n.max;let Ce=n.min;do k.push(Ce),Ce+=_;while(Ce<ie);return k.push(ie),k}),Z=m(()=>{const k=` ${Mo}${$.value}-`;return Mo+`${k}${n.switchMarkerLabelsSide===!0?"switched":"standard"}${k}${q.value===!0?"rtl":"ltr"}`}),ke=m(()=>n.markerLabels===!1?null:Ae(n.markerLabels).map((k,_)=>({index:_,value:k.value,label:k.label||k.value,classes:Z.value+(k.classes!==void 0?" "+k.classes:""),style:{...Be(k.value),...k.style||{}}}))),Q=m(()=>({markerList:ke.value,markerMap:qe.value,classes:Z.value,getStyle:Be})),$e=m(()=>{const k=Ve.value===0?"2px":100*N.value/Ve.value;return{...te.value,backgroundSize:n.vertical===!0?`2px ${k}%`:`${k}% 2px`}});function Ae(k){if(k===!1)return null;if(k===!0)return j.value.map(Bn);if(typeof k=="function")return j.value.map(ie=>{const Ce=k(ie);return _a(Ce)===!0?{...Ce,value:ie}:{value:ie,label:Ce}});const _=({value:ie})=>ie>=n.min&&ie<=n.max;return Array.isArray(k)===!0?k.map(ie=>_a(ie)===!0?ie:{value:ie}).filter(_):Object.keys(k).map(ie=>{const Ce=k[ie],Ne=Number(ie);return _a(Ce)===!0?{...Ce,value:Ne}:{value:Ne,label:Ce}}).filter(_)}function Be(k){return{[we.value]:`${100*(k-n.min)/me.value}%`}}const qe=m(()=>{if(n.markerLabels===!1)return null;const k={};return ke.value.forEach(_=>{k[_.value]=_}),k});function A(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](Q.value);const k=s["marker-label"]||zn;return ke.value.map(_=>k({marker:_,...Q.value}))}const R=m(()=>[[Jo,Y,void 0,{[_e.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Y(k){k.isFinal===!0?(h.value!==void 0&&(t(k.evt),k.touch===!0&&e(!0),h.value=void 0,c("pan","end")),S.value=!1,g.value=!1):k.isFirst===!0?(h.value=a(k.evt),t(k.evt),e(),S.value=!0,c("pan","start")):(t(k.evt),e())}function he(){g.value=!1}function be(k){t(k,a(k)),e(),L.value=!0,S.value=!0,document.addEventListener("mouseup",ue,!0)}function ue(){L.value=!1,S.value=!1,e(!0),he(),document.removeEventListener("mouseup",ue,!0)}function de(k){t(k,a(k)),e(!0)}function Re(k){il.includes(k.keyCode)&&e(!0)}function Pe(k){if(n.vertical===!0)return null;const _=o.lang.rtl!==n.reverse?1-k:k;return{transform:`translateX(calc(${2*_-1} * ${n.thumbSize} / 2 + ${50-100*_}%))`}}function at(k){const _=m(()=>L.value===!1&&(g.value===k.focusValue||g.value==="both")?" q-slider--focus":""),ie=m(()=>`q-slider__thumb q-slider__thumb${$.value} q-slider__thumb${$.value}-${q.value===!0?"rtl":"ltr"} absolute non-selectable`+_.value+(k.thumbColor.value!==void 0?` text-${k.thumbColor.value}`:"")),Ce=m(()=>({width:n.thumbSize,height:n.thumbSize,[we.value]:`${100*k.ratio.value}%`,zIndex:g.value===k.focusValue?2:void 0})),Ne=m(()=>k.labelColor.value!==void 0?` text-${k.labelColor.value}`:""),mt=m(()=>Pe(k.ratio.value)),ht=m(()=>"q-slider__text"+(k.labelTextColor.value!==void 0?` text-${k.labelTextColor.value}`:""));return()=>{const _t=[v("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[v("path",{d:n.thumbPath})]),v("div",{class:"q-slider__focus-ring fit"})];return(n.label===!0||n.labelAlways===!0)&&(_t.push(v("div",{class:O.value+" absolute fit no-pointer-events"+Ne.value},[v("div",{class:P.value,style:{minWidth:n.thumbSize}},[v("div",{class:ge.value,style:mt.value},[v("span",{class:ht.value},k.label.value)])])])),n.name!==void 0&&n.disable!==!0&&b(_t,"push")),v("div",{class:ie.value,style:Ce.value,...k.getNodeData()},_t)}}function ct(k,_,ie,Ce){const Ne=[];n.innerTrackColor!=="transparent"&&Ne.push(v("div",{key:"inner",class:Me.value,style:te.value})),n.selectionColor!=="transparent"&&Ne.push(v("div",{key:"selection",class:tt.value,style:k.value})),n.markers!==!1&&Ne.push(v("div",{key:"marker",class:rt.value,style:$e.value})),Ce(Ne);const mt=[La("div",{key:"trackC",class:p.value,tabindex:_.value,...ie.value},[v("div",{class:K.value,style:le.value},Ne)],"slide",w.value,()=>R.value)];if(n.markerLabels!==!1){const ht=n.switchMarkerLabelsSide===!0?"unshift":"push";mt[ht](v("div",{key:"markerL",class:J.value},A()))}return mt}return ba(()=>{document.removeEventListener("mouseup",ue,!0)}),{state:{active:S,focus:g,preventFocus:L,dragging:h,editable:w,classes:fe,tabindex:B,attributes:Ye,roundValueFn:M,keyStep:ee,trackLen:me,innerMin:ae,innerMinRatio:Oe,innerMax:oe,innerMaxRatio:Fe,positionProp:we,sizeProp:z,isReversed:q},methods:{onActivate:be,onMobileClick:de,onBlur:he,onKeyup:Re,getContent:ct,getThumbRenderFn:at,convertRatioToModel:Ie,convertModelToRatio:Ue,getDraggingRatio:y}}}const Hn=()=>({});var Lt=We({name:"QSlider",props:{...xn,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:Fn,setup(e,{emit:t}){const{proxy:{$q:a}}=it(),{state:i,methods:n}=Un({updateValue:$,updatePosition:q,getDragging:G,formAttrs:Yl(e)}),c=F(null),s=F(0),o=F(0);function f(){o.value=e.modelValue===null?i.innerMin.value:Gt(e.modelValue,i.innerMin.value,i.innerMax.value)}lt(()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,f),f();const b=m(()=>n.convertModelToRatio(o.value)),S=m(()=>i.active.value===!0?s.value:b.value),L=m(()=>{const w={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(S.value-i.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(w.backgroundImage=`url(${e.selectionImg}) !important`),w}),g=n.getThumbRenderFn({focusValue:!0,getNodeData:Hn,ratio:S,label:m(()=>e.labelValue!==void 0?e.labelValue:o.value),thumbColor:m(()=>e.thumbColor||e.color),labelColor:m(()=>e.labelColor),labelTextColor:m(()=>e.labelTextColor)}),h=m(()=>i.editable.value!==!0?{}:a.platform.is.mobile===!0?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:ae,onBlur:n.onBlur,onKeydown:oe,onKeyup:n.onKeyup});function $(w){o.value!==e.modelValue&&t("update:modelValue",o.value),w===!0&&t("change",o.value)}function G(){return c.value.getBoundingClientRect()}function q(w,M=i.dragging.value){const ee=n.getDraggingRatio(w,M);o.value=n.convertRatioToModel(ee),s.value=e.snap!==!0||e.step===0?ee:n.convertModelToRatio(o.value)}function ae(){i.focus.value=!0}function oe(w){if(!il.includes(w.keyCode))return;st(w);const M=([34,33].includes(w.keyCode)?10:1)*i.keyStep.value,ee=([34,37,40].includes(w.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*M;o.value=Gt(i.roundValueFn.value(o.value+ee),i.innerMin.value,i.innerMax.value),$()}return()=>{const w=n.getContent(L,i.tabindex,h,M=>{M.push(g())});return v("div",{ref:c,class:i.classes.value+(e.modelValue===null?" q-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},w)}}});const Wn={...Xt,...so,...Ia,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},jn=["update:modelValue"];function Kn(e,t){const{props:a,slots:i,emit:n,proxy:c}=it(),{$q:s}=c,o=Jt(a,s),f=F(null),{refocusTargetEl:b,refocusTarget:S}=Xl(a,f),L=ro(a,Jl),g=m(()=>a.val!==void 0&&Array.isArray(a.modelValue)),h=m(()=>{const z=aa(a.val);return g.value===!0?a.modelValue.findIndex(Ee=>aa(Ee)===z):-1}),$=m(()=>g.value===!0?h.value!==-1:aa(a.modelValue)===aa(a.trueValue)),G=m(()=>g.value===!0?h.value===-1:aa(a.modelValue)===aa(a.falseValue)),q=m(()=>$.value===!1&&G.value===!1),ae=m(()=>a.disable===!0?-1:a.tabindex||0),oe=m(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(a.disable===!0?" disabled":"")+(o.value===!0?` q-${e}--dark`:"")+(a.dense===!0?` q-${e}--dense`:"")+(a.leftLabel===!0?" reverse":"")),w=m(()=>{const z=$.value===!0?"truthy":G.value===!0?"falsy":"indet",Ee=a.color!==void 0&&(a.keepColor===!0||(e==="toggle"?$.value===!0:G.value!==!0))?` text-${a.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${z}${Ee}`}),M=m(()=>{const z={type:"checkbox"};return a.name!==void 0&&Object.assign(z,{".checked":$.value,"^checked":$.value===!0?"checked":void 0,name:a.name,value:g.value===!0?a.val:a.trueValue}),z}),ee=co(M),B=m(()=>{const z={tabindex:ae.value,role:e==="toggle"?"switch":"checkbox","aria-label":a.label,"aria-checked":q.value===!0?"mixed":$.value===!0?"true":"false"};return a.disable===!0&&(z["aria-disabled"]="true"),z});function me(z){z!==void 0&&(st(z),S(z)),a.disable!==!0&&n("update:modelValue",Ve(),z)}function Ve(){if(g.value===!0){if($.value===!0){const z=a.modelValue.slice();return z.splice(h.value,1),z}return a.modelValue.concat([a.val])}if($.value===!0){if(a.toggleOrder!=="ft"||a.toggleIndeterminate===!1)return a.falseValue}else if(G.value===!0){if(a.toggleOrder==="ft"||a.toggleIndeterminate===!1)return a.trueValue}else return a.toggleOrder!=="ft"?a.trueValue:a.falseValue;return a.indeterminateValue}function Oe(z){(z.keyCode===13||z.keyCode===32)&&st(z)}function Fe(z){(z.keyCode===13||z.keyCode===32)&&me(z)}const we=t($,q);return Object.assign(c,{toggle:me}),()=>{const z=we();a.disable!==!0&&ee(z,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const Ee=[v("div",{class:w.value,style:L.value,"aria-hidden":"true"},z)];b.value!==null&&Ee.push(b.value);const _e=a.label!==void 0?lo(i.default,[a.label]):la(i.default);return _e!==void 0&&Ee.push(v("div",{class:`q-${e}__label q-anchor--skip`},_e)),v("div",{ref:f,class:oe.value,...B.value,onClick:me,onKeydown:Oe,onKeyup:Fe},Ee)}}var Ft=We({name:"QToggle",props:{...Wn,icon:String,iconColor:String},emits:jn,setup(e){function t(a,i){const n=m(()=>(a.value===!0?e.checkedIcon:i.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),c=m(()=>a.value===!0?e.iconColor:null);return()=>[v("div",{class:"q-toggle__track"}),v("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[v(Le,{name:n.value,color:c.value})]:void 0)]}return Kn("toggle",t)}});const Gn=je({name:"ControlsOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{userStore:na,KeyboardSettings:To}},data(){return{tab:"mouse",currentlyBinding:void 0}},computed:{mouseSensitivity:{get(){return this.userStore.controls.mouse.sensitivity},set(e){Ba.sensitivity=e}},mouseAcceleration:{get(){return this.userStore.controls.mouse.acceleration},set(e){Ba.acceleration=e}},mouseInvert:{get(){return this.userStore.controls.mouse.invert},set(e){Ba.invert=e}}},methods:{listenForRebind(e){const t=e.code;!t||!this.currentlyBinding||(To.rebindControl(this.currentlyBinding,t),this.currentlyBinding=void 0)}}}),Qn={for:"mouseSensitivity"},Yn={for:"mouseAcceleration"},Xn={for:"mouseInvert"},Jn={key:0,class:"rebindPrompt text-grey-6"},Zn={key:1,class:"row q-gutter-x-sm"},ei={for:"bloom"};function ti(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"gamepad",title:"Controls",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400},{default:u(()=>[l(kt,{class:"flex column no-wrap full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tab=o)},{default:u(()=>[l(Qe,{name:"mouse",icon:"mouse",label:""},{default:u(()=>[l(Ha,{class:"bg-black"},{default:u(()=>t[7]||(t[7]=[x("Mouse")])),_:1})]),_:1}),l(Qe,{name:"keyboard",icon:"keyboard",label:""},{default:u(()=>[l(Ha,{class:"bg-black"},{default:u(()=>t[8]||(t[8]=[x("Keyboard")])),_:1})]),_:1}),l(Qe,{name:"camera",icon:"camera",label:""},{default:u(()=>[l(Ha,{class:"bg-black"},{default:u(()=>t[9]||(t[9]=[x("Camera")])),_:1})]),_:1})]),_:1},8,["modelValue"]),l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[6]||(t[6]=o=>e.tab=o),animated:"",class:"full-height",style:{background:"transparent"}},{default:u(()=>[l(et,{name:"mouse"},{default:u(()=>[l($t,{class:"full-height"},{default:u(()=>[l(ut,{class:"q-pb-md"},{default:u(()=>[l(Te,null,{default:u(()=>[l(W,null,{default:u(()=>[l(St,null,{default:u(()=>t[10]||(t[10]=[x("Sensitivity")])),_:1})]),_:1}),l(W,{class:"q-pl-xl"},{default:u(()=>[l(Lt,{name:"mouseSensitivity",thumbSize:"26px",min:0,max:100,step:5,snap:"",modelValue:e.mouseSensitivity,"onUpdate:modelValue":t[1]||(t[1]=o=>e.mouseSensitivity=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",Qn,re(e.mouseSensitivity),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,null,{default:u(()=>[l(St,null,{default:u(()=>t[11]||(t[11]=[x("Acceleration")])),_:1})]),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"mouseAcceleration",modelValue:e.mouseAcceleration,"onUpdate:modelValue":t[2]||(t[2]=o=>e.mouseAcceleration=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",Yn,re(e.mouseAcceleration?"On":"Off"),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,null,{default:u(()=>[l(St,null,{default:u(()=>t[12]||(t[12]=[x("Invert")])),_:1})]),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"mouseInvert",modelValue:e.mouseInvert,"onUpdate:modelValue":t[3]||(t[3]=o=>e.mouseInvert=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",Xn,re(e.mouseInvert?"On":"Off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(et,{name:"keyboard",class:"q-px-none q-pb-none column no-wrap items-stretch"},{default:u(()=>[t[13]||(t[13]=I("p",{class:"q-mt-xs q-mb-xs text-caption text-grey-6",style:{width:"100%","text-align":"center"}},"Select a control to rebind it.",-1)),t[14]||(t[14]=I("p",{class:"q-mb-sm text-caption text-grey-6",style:{width:"100%","text-align":"center"}},"Press ESC to cancel.",-1)),l($t,{class:"full-height"},{default:u(()=>[l(ut,{class:"q-pb-md",onKeydown:t[4]||(t[4]=ye(o=>e.listenForRebind(o),["prevent","stop"]))},{default:u(()=>[(C(!0),U(He,null,pt(e.userStore.controls.keyboard,(o,f)=>(C(),U(He,{key:f},[l(St,{header:"",style:{"text-transform":"capitalize"}},{default:u(()=>[x(re(f),1)]),_:2},1024),(C(!0),U(He,null,pt(o,b=>Ge((C(),ne(Te,{key:b.name,clickable:"","inset-level":1,onClick:S=>e.currentlyBinding=b},{default:u(()=>[l(W,null,{default:u(()=>[l(St,null,{default:u(()=>[x(re(b.name),1)]),_:2},1024)]),_:2},1024),l(W,null,{default:u(()=>{var S,L,g;return[((S=e.currentlyBinding)==null?void 0:S.name)===b.name?(C(),U("div",Jn,"Press any key...")):(C(),U("div",Zn,[I("kbd",null,re(e.KeyboardSettings.formatKeyName(b.keycode)),1),e.KeyboardSettings.getSpecialKeyIndicator(b.keycode)?(C(),ne(Le,{key:0,name:(L=e.KeyboardSettings.getSpecialKeyIndicator(b.keycode))==null?void 0:L.icon,title:(g=e.KeyboardSettings.getSpecialKeyIndicator(b.keycode))==null?void 0:g.message,class:"q-mt-sm"},null,8,["name","title"])):xe("",!0)]))]}),_:2},1024)]),_:2},1032,["onClick"])),[[yt]])),128))],64))),128))]),_:1})]),_:1})]),_:1}),l(et,{name:"camera",class:"q-px-none q-pb-none column no-wrap items-stretch"},{default:u(()=>[l($t,{class:"full-height"},{default:u(()=>[l(ut,{class:"q-pb-md"},{default:u(()=>[l(Te,null,{default:u(()=>[l(W,{title:"Camera Bobbing"},{default:u(()=>t[15]||(t[15]=[x(" Camera Bobbing ")])),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"bloom",modelValue:e.userStore.graphics.cameraBobbing,"onUpdate:modelValue":t[5]||(t[5]=o=>e.userStore.graphics.cameraBobbing=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",ei,re(e.userStore.graphics.cameraBobbing?"On":"Off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["managerProps"])}var ai=Je(Gn,[["render",ti],["__scopeId","data-v-76c6774f"]]);const oi=je({name:"GraphicsOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{userStore:na}},computed:{fieldOfView:{get(){return this.userStore.graphics.fieldOfView},set(e){this.userStore.graphics.fieldOfView=typeof e=="string"?parseInt(e,10):e}},msaa:{get(){return this.userStore.graphics.msaa},set(e){this.userStore.graphics.msaa=typeof e=="string"?parseInt(e,10):e}}}}),li={for:"fpsCounter"},ni={for:"fieldOfView"},ii={for:"bloom"},ri={for:"bloom"},si={for:"fxaaEnabled"},ui={for:"msaa"},di={for:"sharpen"};function ci(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"desktop_windows",title:"Graphics",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[l($t,{class:"q-mt-md full-height"},{default:u(()=>[l(ut,{class:"q-pb-md"},{default:u(()=>[l(Te,null,{default:u(()=>[l(W,{title:"FPS Counter"},{default:u(()=>t[7]||(t[7]=[x(" FPS Counter ")])),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"fpsCounter",modelValue:e.userStore.graphics.fpsCounter,"onUpdate:modelValue":t[0]||(t[0]=o=>e.userStore.graphics.fpsCounter=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",li,re(e.userStore.graphics.fpsCounter?"On":"Off"),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,{title:"Field of View"},{default:u(()=>t[8]||(t[8]=[x(" Field of View ")])),_:1}),l(W,{class:"q-pl-xl"},{default:u(()=>[l(Lt,{name:"fieldOfView",thumbSize:"26px",min:70,max:120,step:5,snap:"",modelValue:e.fieldOfView,"onUpdate:modelValue":t[1]||(t[1]=o=>e.fieldOfView=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",ni,re(e.fieldOfView),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,{title:"Camera Bobbing"},{default:u(()=>t[9]||(t[9]=[x(" Camera Bobbing ")])),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"bloom",modelValue:e.userStore.graphics.cameraBobbing,"onUpdate:modelValue":t[2]||(t[2]=o=>e.userStore.graphics.cameraBobbing=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",ii,re(e.userStore.graphics.cameraBobbing?"On":"Off"),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,{title:"Bloom"},{default:u(()=>t[10]||(t[10]=[x(" Bloom ")])),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"bloom",modelValue:e.userStore.graphics.bloom,"onUpdate:modelValue":t[3]||(t[3]=o=>e.userStore.graphics.bloom=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",ri,re(e.userStore.graphics.bloom?"On":"Off"),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,{title:"Fast Approximate Anti-Aliasing"},{default:u(()=>t[11]||(t[11]=[x(" FXAA ")])),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"fxaaEnabled",modelValue:e.userStore.graphics.fxaaEnabled,"onUpdate:modelValue":t[4]||(t[4]=o=>e.userStore.graphics.fxaaEnabled=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",si,re(e.userStore.graphics.fxaaEnabled?"On":"Off"),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,{title:"Multisample Anti-Aliasing"},{default:u(()=>t[12]||(t[12]=[x(" MSAA ")])),_:1}),l(W,{class:"q-pl-xl"},{default:u(()=>[l(Lt,{name:"msaa",thumbSize:"26px",min:1,max:8,step:1,snap:"",modelValue:e.msaa,"onUpdate:modelValue":t[5]||(t[5]=o=>e.msaa=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",ui,re(e.msaa===1?"Off":`\xD7${e.msaa}`),1)]),_:1})]),_:1}),l(Te,null,{default:u(()=>[l(W,{title:"Sharpen"},{default:u(()=>t[13]||(t[13]=[x(" Sharpen ")])),_:1}),l(W,{class:"q-pl-sm"},{default:u(()=>[l(Ft,{name:"sharpen",modelValue:e.userStore.graphics.sharpen,"onUpdate:modelValue":t[6]||(t[6]=o=>e.userStore.graphics.sharpen=o)},null,8,["modelValue"])]),_:1}),l(W,{side:"",style:{"min-width":"5ch"}},{default:u(()=>[I("output",di,re(e.userStore.graphics.sharpen?"On":"Off"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["managerProps"])}var mi=Je(oi,[["render",ci]]),fi=We({name:"QChatMessage",props:{sent:Boolean,label:String,bgColor:String,textColor:String,name:String,avatar:String,text:Array,stamp:String,size:String,labelHtml:Boolean,nameHtml:Boolean,textHtml:Boolean,stampHtml:Boolean},setup(e,{slots:t}){const a=m(()=>e.sent===!0?"sent":"received"),i=m(()=>`q-message-text-content q-message-text-content--${a.value}`+(e.textColor!==void 0?` text-${e.textColor}`:"")),n=m(()=>`q-message-text q-message-text--${a.value}`+(e.bgColor!==void 0?` text-${e.bgColor}`:"")),c=m(()=>"q-message-container row items-end no-wrap"+(e.sent===!0?" reverse":"")),s=m(()=>e.size!==void 0?`col-${e.size}`:""),o=m(()=>({msg:e.textHtml===!0?"innerHTML":"textContent",stamp:e.stampHtml===!0?"innerHTML":"textContent",name:e.nameHtml===!0?"innerHTML":"textContent",label:e.labelHtml===!0?"innerHTML":"textContent"}));function f(S){return t.stamp!==void 0?[S,v("div",{class:"q-message-stamp"},t.stamp())]:e.stamp?[S,v("div",{class:"q-message-stamp",[o.value.stamp]:e.stamp})]:[S]}function b(S,L){const g=L===!0?S.length>1?h=>h:h=>v("div",[h]):h=>v("div",{[o.value.msg]:h});return S.map((h,$)=>v("div",{key:$,class:n.value},[v("div",{class:i.value},f(g(h)))]))}return()=>{const S=[];t.avatar!==void 0?S.push(t.avatar()):e.avatar!==void 0&&S.push(v("img",{class:`q-message-avatar q-message-avatar--${a.value}`,src:e.avatar,"aria-hidden":"true"}));const L=[];t.name!==void 0?L.push(v("div",{class:`q-message-name q-message-name--${a.value}`},t.name())):e.name!==void 0&&L.push(v("div",{class:`q-message-name q-message-name--${a.value}`,[o.value.name]:e.name})),t.default!==void 0?L.push(b(Tl(t.default()),!0)):e.text!==void 0&&L.push(b(e.text)),S.push(v("div",{class:s.value},L));const g=[];return t.label!==void 0?g.push(v("div",{class:"q-message-label"},t.label())):e.label!==void 0&&g.push(v("div",{class:"q-message-label",[o.value.label]:e.label})),g.push(v("div",{class:c.value},S)),v("div",{class:`q-message q-message-${a.value}`},g)}}});/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:rl,setPrototypeOf:Vo,isFrozen:vi,getPrototypeOf:pi,getOwnPropertyDescriptor:gi}=Object;let{freeze:nt,seal:wt,create:sl}=Object,{apply:eo,construct:to}=typeof Reflect<"u"&&Reflect;nt||(nt=function(t){return t});wt||(wt=function(t){return t});eo||(eo=function(t,a,i){return t.apply(a,i)});to||(to=function(t,a){return new t(...a)});const Ma=gt(Array.prototype.forEach),$o=gt(Array.prototype.pop),sa=gt(Array.prototype.push),Ea=gt(String.prototype.toLowerCase),Wa=gt(String.prototype.toString),Eo=gt(String.prototype.match),ua=gt(String.prototype.replace),hi=gt(String.prototype.indexOf),bi=gt(String.prototype.trim),At=gt(Object.prototype.hasOwnProperty),ot=gt(RegExp.prototype.test),da=yi(TypeError);function gt(e){return function(t){for(var a=arguments.length,i=new Array(a>1?a-1:0),n=1;n<a;n++)i[n-1]=arguments[n];return eo(e,t,i)}}function yi(e){return function(){for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return to(e,a)}}function pe(e,t){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ea;Vo&&Vo(e,null);let i=t.length;for(;i--;){let n=t[i];if(typeof n=="string"){const c=a(n);c!==n&&(vi(t)||(t[i]=c),n=c)}e[n]=!0}return e}function Si(e){for(let t=0;t<e.length;t++)At(e,t)||(e[t]=null);return e}function Ht(e){const t=sl(null);for(const[a,i]of rl(e))At(e,a)&&(Array.isArray(i)?t[a]=Si(i):i&&typeof i=="object"&&i.constructor===Object?t[a]=Ht(i):t[a]=i);return t}function ca(e,t){for(;e!==null;){const i=gi(e,t);if(i){if(i.get)return gt(i.get);if(typeof i.value=="function")return gt(i.value)}e=pi(e)}function a(){return null}return a}const Lo=nt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ja=nt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ka=nt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wi=nt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ga=nt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ki=nt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Oo=nt(["#text"]),Io=nt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Qa=nt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qo=nt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Va=nt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ci=wt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ai=wt(/<%[\w\W]*|[\w\W]*%>/gm),Ti=wt(/\${[\w\W]*}/gm),Mi=wt(/^data-[\-\w.\u00B7-\uFFFF]/),Vi=wt(/^aria-[\-\w]+$/),ul=wt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),$i=wt(/^(?:\w+script|data):/i),Ei=wt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dl=wt(/^html$/i),Li=wt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ro=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ci,ERB_EXPR:Ai,TMPLIT_EXPR:Ti,DATA_ATTR:Mi,ARIA_ATTR:Vi,IS_ALLOWED_URI:ul,IS_SCRIPT_OR_DATA:$i,ATTR_WHITESPACE:Ei,DOCTYPE_NAME:dl,CUSTOM_ELEMENT:Li});const ma={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Oi=function(){return typeof window>"u"?null:window},Ii=function(t,a){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";a&&a.hasAttribute(n)&&(i=a.getAttribute(n));const c="dompurify"+(i?"#"+i:"");try{return t.createPolicy(c,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function cl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oi();const t=D=>cl(D);if(t.version="3.1.6",t.removed=[],!e||!e.document||e.document.nodeType!==ma.document)return t.isSupported=!1,t;let{document:a}=e;const i=a,n=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:s,Node:o,Element:f,NodeFilter:b,NamedNodeMap:S=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:L,DOMParser:g,trustedTypes:h}=e,$=f.prototype,G=ca($,"cloneNode"),q=ca($,"remove"),ae=ca($,"nextSibling"),oe=ca($,"childNodes"),w=ca($,"parentNode");if(typeof s=="function"){const D=a.createElement("template");D.content&&D.content.ownerDocument&&(a=D.content.ownerDocument)}let M,ee="";const{implementation:B,createNodeIterator:me,createDocumentFragment:Ve,getElementsByTagName:Oe}=a,{importNode:Fe}=i;let we={};t.isSupported=typeof rl=="function"&&typeof w=="function"&&B&&B.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:Ee,TMPLIT_EXPR:_e,DATA_ATTR:Ye,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:Xe,ATTR_WHITESPACE:Ke,CUSTOM_ELEMENT:tt}=Ro;let{IS_ALLOWED_URI:rt}=Ro,p=null;const O=pe({},[...Lo,...ja,...Ka,...Ga,...Oo]);let P=null;const ge=pe({},[...Io,...Qa,...qo,...Va]);let J=Object.seal(sl(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,le=null,Me=!0,te=!0,Ie=!1,Ue=!0,y=!1,N=!0,j=!1,Z=!1,ke=!1,Q=!1,$e=!1,Ae=!1,Be=!0,qe=!1;const A="user-content-";let R=!0,Y=!1,he={},be=null;const ue=pe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const Re=pe({},["audio","video","img","source","image","track"]);let Pe=null;const at=pe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ct="http://www.w3.org/1998/Math/MathML",k="http://www.w3.org/2000/svg",_="http://www.w3.org/1999/xhtml";let ie=_,Ce=!1,Ne=null;const mt=pe({},[ct,k,_],Wa);let ht=null;const _t=["application/xhtml+xml","text/html"],qa="text/html";let ze=null,It=null;const Ra=a.createElement("form"),ra=function(d){return d instanceof RegExp||d instanceof Function},Bt=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(It&&It===d)){if((!d||typeof d!="object")&&(d={}),d=Ht(d),ht=_t.indexOf(d.PARSER_MEDIA_TYPE)===-1?qa:d.PARSER_MEDIA_TYPE,ze=ht==="application/xhtml+xml"?Wa:Ea,p=At(d,"ALLOWED_TAGS")?pe({},d.ALLOWED_TAGS,ze):O,P=At(d,"ALLOWED_ATTR")?pe({},d.ALLOWED_ATTR,ze):ge,Ne=At(d,"ALLOWED_NAMESPACES")?pe({},d.ALLOWED_NAMESPACES,Wa):mt,Pe=At(d,"ADD_URI_SAFE_ATTR")?pe(Ht(at),d.ADD_URI_SAFE_ATTR,ze):at,de=At(d,"ADD_DATA_URI_TAGS")?pe(Ht(Re),d.ADD_DATA_URI_TAGS,ze):Re,be=At(d,"FORBID_CONTENTS")?pe({},d.FORBID_CONTENTS,ze):ue,K=At(d,"FORBID_TAGS")?pe({},d.FORBID_TAGS,ze):{},le=At(d,"FORBID_ATTR")?pe({},d.FORBID_ATTR,ze):{},he=At(d,"USE_PROFILES")?d.USE_PROFILES:!1,Me=d.ALLOW_ARIA_ATTR!==!1,te=d.ALLOW_DATA_ATTR!==!1,Ie=d.ALLOW_UNKNOWN_PROTOCOLS||!1,Ue=d.ALLOW_SELF_CLOSE_IN_ATTR!==!1,y=d.SAFE_FOR_TEMPLATES||!1,N=d.SAFE_FOR_XML!==!1,j=d.WHOLE_DOCUMENT||!1,Q=d.RETURN_DOM||!1,$e=d.RETURN_DOM_FRAGMENT||!1,Ae=d.RETURN_TRUSTED_TYPE||!1,ke=d.FORCE_BODY||!1,Be=d.SANITIZE_DOM!==!1,qe=d.SANITIZE_NAMED_PROPS||!1,R=d.KEEP_CONTENT!==!1,Y=d.IN_PLACE||!1,rt=d.ALLOWED_URI_REGEXP||ul,ie=d.NAMESPACE||_,J=d.CUSTOM_ELEMENT_HANDLING||{},d.CUSTOM_ELEMENT_HANDLING&&ra(d.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=d.CUSTOM_ELEMENT_HANDLING.tagNameCheck),d.CUSTOM_ELEMENT_HANDLING&&ra(d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),d.CUSTOM_ELEMENT_HANDLING&&typeof d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(J.allowCustomizedBuiltInElements=d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),y&&(te=!1),$e&&(Q=!0),he&&(p=pe({},Oo),P=[],he.html===!0&&(pe(p,Lo),pe(P,Io)),he.svg===!0&&(pe(p,ja),pe(P,Qa),pe(P,Va)),he.svgFilters===!0&&(pe(p,Ka),pe(P,Qa),pe(P,Va)),he.mathMl===!0&&(pe(p,Ga),pe(P,qo),pe(P,Va))),d.ADD_TAGS&&(p===O&&(p=Ht(p)),pe(p,d.ADD_TAGS,ze)),d.ADD_ATTR&&(P===ge&&(P=Ht(P)),pe(P,d.ADD_ATTR,ze)),d.ADD_URI_SAFE_ATTR&&pe(Pe,d.ADD_URI_SAFE_ATTR,ze),d.FORBID_CONTENTS&&(be===ue&&(be=Ht(be)),pe(be,d.FORBID_CONTENTS,ze)),R&&(p["#text"]=!0),j&&pe(p,["html","head","body"]),p.table&&(pe(p,["tbody"]),delete K.tbody),d.TRUSTED_TYPES_POLICY){if(typeof d.TRUSTED_TYPES_POLICY.createHTML!="function")throw da('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof d.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw da('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');M=d.TRUSTED_TYPES_POLICY,ee=M.createHTML("")}else M===void 0&&(M=Ii(h,n)),M!==null&&typeof ee=="string"&&(ee=M.createHTML(""));nt&&nt(d),It=d}},zt=pe({},["mi","mo","mn","ms","mtext"]),qt=pe({},["foreignobject","annotation-xml"]),Pa=pe({},["title","style","font","a","script"]),ya=pe({},[...ja,...Ka,...wi]),Sa=pe({},[...Ga,...ki]),Na=function(d){let V=w(d);(!V||!V.tagName)&&(V={namespaceURI:ie,tagName:"template"});const r=Ea(d.tagName),T=Ea(V.tagName);return Ne[d.namespaceURI]?d.namespaceURI===k?V.namespaceURI===_?r==="svg":V.namespaceURI===ct?r==="svg"&&(T==="annotation-xml"||zt[T]):Boolean(ya[r]):d.namespaceURI===ct?V.namespaceURI===_?r==="math":V.namespaceURI===k?r==="math"&&qt[T]:Boolean(Sa[r]):d.namespaceURI===_?V.namespaceURI===k&&!qt[T]||V.namespaceURI===ct&&!zt[T]?!1:!Sa[r]&&(Pa[r]||!ya[r]):!!(ht==="application/xhtml+xml"&&Ne[d.namespaceURI]):!1},bt=function(d){sa(t.removed,{element:d});try{w(d).removeChild(d)}catch{q(d)}},Zt=function(d,V){try{sa(t.removed,{attribute:V.getAttributeNode(d),from:V})}catch{sa(t.removed,{attribute:null,from:V})}if(V.removeAttribute(d),d==="is"&&!P[d])if(Q||$e)try{bt(V)}catch{}else try{V.setAttribute(d,"")}catch{}},wa=function(d){let V=null,r=null;if(ke)d="<remove></remove>"+d;else{const H=Eo(d,/^[\r\n\t ]+/);r=H&&H[0]}ht==="application/xhtml+xml"&&ie===_&&(d='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+d+"</body></html>");const T=M?M.createHTML(d):d;if(ie===_)try{V=new g().parseFromString(T,ht)}catch{}if(!V||!V.documentElement){V=B.createDocument(ie,"template",null);try{V.documentElement.innerHTML=Ce?ee:T}catch{}}const E=V.body||V.documentElement;return d&&r&&E.insertBefore(a.createTextNode(r),E.childNodes[0]||null),ie===_?Oe.call(V,j?"html":"body")[0]:j?V.documentElement:E},ka=function(d){return me.call(d.ownerDocument||d,d,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT|b.SHOW_PROCESSING_INSTRUCTION|b.SHOW_CDATA_SECTION,null)},Ca=function(d){return d instanceof L&&(typeof d.nodeName!="string"||typeof d.textContent!="string"||typeof d.removeChild!="function"||!(d.attributes instanceof S)||typeof d.removeAttribute!="function"||typeof d.setAttribute!="function"||typeof d.namespaceURI!="string"||typeof d.insertBefore!="function"||typeof d.hasChildNodes!="function")},Rt=function(d){return typeof o=="function"&&d instanceof o},Ze=function(d,V,r){!we[d]||Ma(we[d],T=>{T.call(t,V,r,It)})},Et=function(d){let V=null;if(Ze("beforeSanitizeElements",d,null),Ca(d))return bt(d),!0;const r=ze(d.nodeName);if(Ze("uponSanitizeElement",d,{tagName:r,allowedTags:p}),d.hasChildNodes()&&!Rt(d.firstElementChild)&&ot(/<[/\w]/g,d.innerHTML)&&ot(/<[/\w]/g,d.textContent)||d.nodeType===ma.progressingInstruction||N&&d.nodeType===ma.comment&&ot(/<[/\w]/g,d.data))return bt(d),!0;if(!p[r]||K[r]){if(!K[r]&&ea(r)&&(J.tagNameCheck instanceof RegExp&&ot(J.tagNameCheck,r)||J.tagNameCheck instanceof Function&&J.tagNameCheck(r)))return!1;if(R&&!be[r]){const T=w(d)||d.parentNode,E=oe(d)||d.childNodes;if(E&&T){const H=E.length;for(let se=H-1;se>=0;--se){const ce=G(E[se],!0);ce.__removalCount=(d.__removalCount||0)+1,T.insertBefore(ce,ae(d))}}}return bt(d),!0}return d instanceof f&&!Na(d)||(r==="noscript"||r==="noembed"||r==="noframes")&&ot(/<\/no(script|embed|frames)/i,d.innerHTML)?(bt(d),!0):(y&&d.nodeType===ma.text&&(V=d.textContent,Ma([z,Ee,_e],T=>{V=ua(V,T," ")}),d.textContent!==V&&(sa(t.removed,{element:d.cloneNode()}),d.textContent=V)),Ze("afterSanitizeElements",d,null),!1)},Pt=function(d,V,r){if(Be&&(V==="id"||V==="name")&&(r in a||r in Ra))return!1;if(!(te&&!le[V]&&ot(Ye,V))){if(!(Me&&ot(fe,V))){if(!P[V]||le[V]){if(!(ea(d)&&(J.tagNameCheck instanceof RegExp&&ot(J.tagNameCheck,d)||J.tagNameCheck instanceof Function&&J.tagNameCheck(d))&&(J.attributeNameCheck instanceof RegExp&&ot(J.attributeNameCheck,V)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(V))||V==="is"&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&ot(J.tagNameCheck,r)||J.tagNameCheck instanceof Function&&J.tagNameCheck(r))))return!1}else if(!Pe[V]){if(!ot(rt,ua(r,Ke,""))){if(!((V==="src"||V==="xlink:href"||V==="href")&&d!=="script"&&hi(r,"data:")===0&&de[d])){if(!(Ie&&!ot(Xe,ua(r,Ke,"")))){if(r)return!1}}}}}}return!0},ea=function(d){return d!=="annotation-xml"&&Eo(d,tt)},Aa=function(d){Ze("beforeSanitizeAttributes",d,null);const{attributes:V}=d;if(!V)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P};let T=V.length;for(;T--;){const E=V[T],{name:H,namespaceURI:se,value:ce}=E,De=ze(H);let ve=H==="value"?ce:bi(ce);if(r.attrName=De,r.attrValue=ve,r.keepAttr=!0,r.forceKeepAttr=void 0,Ze("uponSanitizeAttribute",d,r),ve=r.attrValue,N&&ot(/((--!?|])>)|<\/(style|title)/i,ve)){Zt(H,d);continue}if(r.forceKeepAttr||(Zt(H,d),!r.keepAttr))continue;if(!Ue&&ot(/\/>/i,ve)){Zt(H,d);continue}y&&Ma([z,Ee,_e],vo=>{ve=ua(ve,vo," ")});const ta=ze(d.nodeName);if(!!Pt(ta,De,ve)){if(qe&&(De==="id"||De==="name")&&(Zt(H,d),ve=A+ve),M&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!se)switch(h.getAttributeType(ta,De)){case"TrustedHTML":{ve=M.createHTML(ve);break}case"TrustedScriptURL":{ve=M.createScriptURL(ve);break}}try{se?d.setAttributeNS(se,H,ve):d.setAttribute(H,ve),Ca(d)?bt(d):$o(t.removed)}catch{}}}Ze("afterSanitizeAttributes",d,null)},Ta=function D(d){let V=null;const r=ka(d);for(Ze("beforeSanitizeShadowDOM",d,null);V=r.nextNode();)Ze("uponSanitizeShadowNode",V,null),!Et(V)&&(V.content instanceof c&&D(V.content),Aa(V));Ze("afterSanitizeShadowDOM",d,null)};return t.sanitize=function(D){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=null,r=null,T=null,E=null;if(Ce=!D,Ce&&(D="<!-->"),typeof D!="string"&&!Rt(D))if(typeof D.toString=="function"){if(D=D.toString(),typeof D!="string")throw da("dirty is not a string, aborting")}else throw da("toString is not a function");if(!t.isSupported)return D;if(Z||Bt(d),t.removed=[],typeof D=="string"&&(Y=!1),Y){if(D.nodeName){const ce=ze(D.nodeName);if(!p[ce]||K[ce])throw da("root node is forbidden and cannot be sanitized in-place")}}else if(D instanceof o)V=wa("<!---->"),r=V.ownerDocument.importNode(D,!0),r.nodeType===ma.element&&r.nodeName==="BODY"||r.nodeName==="HTML"?V=r:V.appendChild(r);else{if(!Q&&!y&&!j&&D.indexOf("<")===-1)return M&&Ae?M.createHTML(D):D;if(V=wa(D),!V)return Q?null:Ae?ee:""}V&&ke&&bt(V.firstChild);const H=ka(Y?D:V);for(;T=H.nextNode();)Et(T)||(T.content instanceof c&&Ta(T.content),Aa(T));if(Y)return D;if(Q){if($e)for(E=Ve.call(V.ownerDocument);V.firstChild;)E.appendChild(V.firstChild);else E=V;return(P.shadowroot||P.shadowrootmode)&&(E=Fe.call(i,E,!0)),E}let se=j?V.outerHTML:V.innerHTML;return j&&p["!doctype"]&&V.ownerDocument&&V.ownerDocument.doctype&&V.ownerDocument.doctype.name&&ot(dl,V.ownerDocument.doctype.name)&&(se="<!DOCTYPE "+V.ownerDocument.doctype.name+`>
`+se),y&&Ma([z,Ee,_e],ce=>{se=ua(se,ce," ")}),M&&Ae?M.createHTML(se):se},t.setConfig=function(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Bt(D),Z=!0},t.clearConfig=function(){It=null,Z=!1},t.isValidAttribute=function(D,d,V){It||Bt({});const r=ze(D),T=ze(d);return Pt(r,T,V)},t.addHook=function(D,d){typeof d=="function"&&(we[D]=we[D]||[],sa(we[D],d))},t.removeHook=function(D){if(we[D])return $o(we[D])},t.removeHooks=function(D){we[D]&&(we[D]=[])},t.removeAllHooks=function(){we={}},t}var qi=cl();const Ri=je({name:"ChatOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{applicationStore:Ot,userStore:na}},data(){return{messageInput:"",subscribed:!1,worldChatHistory:[{displayName:"Hallo",username:"nani",self:!1,timestamp:new Date().toString(),message:"Hi, hru?"},{displayName:"Waifu",username:"testerino",self:!0,timestamp:new Date().toString(),message:"Sup holmes."},{displayName:"Hallo",username:"nani",self:!1,timestamp:new Date().toString(),message:"nammuch you?"},{displayName:"Waifu",username:"testerino",self:!0,timestamp:new Date().toString(),message:"you know the life."}],currentPrimaryMessages:[],previousScrollPos:0,scrollIsAtBottom:!0,lastPrimaryMessageIndex:-1,messageCombinationTimeLimit:12e4,sortedMessages:[]}},watch:{},methods:{sortMessages(e){const t=e;if(t.length<=0)return[];const a=[];let i=0;return t.forEach((n,c)=>{const s=a[c-1-i];if(a.length<=0||!s){a.push({root:n,text:[this.sanitizeMessageText(this.formatMessageLinks(this.msgText(n)))],time:n.whenReceived});return}s.root.senderId.stringify()===n.senderId.stringify()&&s.time.getTime()<n.whenReceived.getTime()&&n.whenReceived.getTime()<s.time.getTime()+this.messageCombinationTimeLimit?(s.text.push(this.sanitizeMessageText(this.formatMessageLinks(this.msgText(n)))),s.time=n.whenReceived,i+=1):a.push({root:n,text:[this.sanitizeMessageText(this.formatMessageLinks(this.msgText(n)))],time:n.whenReceived})}),a},getProfilePicture(e){if(e==="testerino")return"https://cdn.quasar.dev/img/avatar4.jpg"},msgSender(e){return e.messageJSON?e.messageJSON.displayName:e.senderId.stringify()},msgText(e){if(e.messageJSON){const t=e.messageJSON;if("message"in t)return t.message}return e.message},formatMessageLinks(e){const t=/\bhttps?:\/\/\S+|\bwss?:\/\/\S+/gi;return e.replace(t,i=>`<a href="${i}" target="_blank" rel="noreferrer">${i}</a>`)},sanitizeMessageText(e){return qi.sanitize(e,{USE_PROFILES:{html:!0}})},formatMessageTime(e){return e?`${e.toDateString()}, ${e.toLocaleTimeString()}`:""},msgSentBySelf(e){return e.self??!1},msgIsFromThisClient(e){var t;if(Nt.ActiveDomain){const a=(t=Nt.ActiveDomain.DomainClient)==null?void 0:t.sessionUUID;if(e instanceof Ml&&(a==null?void 0:a.value())===(e==null?void 0:e.value())||typeof e=="string"&&(a==null?void 0:a.value().toString())===e)return!0}return!1},validateMessage(){return this.messageInput.length>0},submitMessage(){if(Nt.ActiveDomain){const e=Nt.ActiveDomain.MessageClient;if(e&&this.validateMessage()){const t={type:"TransmitChatMessage",channel:"Local",message:this.sanitizeMessageText(this.messageInput),colour:{red:255,blue:204,green:229},displayName:this.userStore.avatar.displayName,position:this.userStore.avatar.position};e.sendMessage(Vl.DefaultChatChannel,JSON.stringify(t)),this.messageInput="",this.scrollToBottom(!1)}}},scrollToLatestMessage({verticalPosition:e},t=!0){const i=this.$refs.listOfChats.$el.querySelector(".scroll"),n=i.scrollHeight,c=20,s=e===this.previousScrollPos;s?s&&this.scrollIsAtBottom&&i.scrollTo({top:n,left:0,behavior:t?"smooth":"auto"}):e<n-i.clientHeight-c?this.scrollIsAtBottom=!1:this.scrollIsAtBottom=!0,this.previousScrollPos=e},scrollToBottom(e=!0){const a=this.$refs.listOfChats.$el.querySelector(".scroll"),i=a.scrollHeight;a.scrollTo({top:i,left:0,behavior:e?"smooth":"auto"}),this.scrollIsAtBottom=!0},relatedToPrimaryMessageEntry(e,t){const a=this.applicationStore.messages.messages[this.lastPrimaryMessageIndex];return a?e.senderId!==a.senderId?(this.lastPrimaryMessageIndex=t,!1):Math.abs(a.whenReceived.getTime()-e.whenReceived.getTime())>5e3?(this.lastPrimaryMessageIndex=t,!1):!0:(this.lastPrimaryMessageIndex=t,!1)}},mounted(){this.sortedMessages=this.sortMessages(this.applicationStore.messages.messages),lt(()=>JSON.stringify(this.applicationStore.messages.messages,(e,t)=>t instanceof window.BigInt?t.toString():t),()=>{this.sortedMessages=this.sortMessages(this.applicationStore.messages.messages)}),this.scrollToBottom(!1)}}),Pi=["src"],Ni={key:1};function Di(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"chat",title:"Chat",managerProps:e.propsToPass,defaultHeight:300,defaultWidth:600,defaultLeft:0,defaultTop:400,spawnSnappedTo:"bottom",hoverShowBar:!0,transparentOnIdle:!0,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[l($t,{ref:"listOfChats",class:"col",style:{height:"100%"},onScroll:e.scrollToLatestMessage},{default:u(()=>[l(fo,{class:"q-pt-none"},{default:u(()=>[(C(!0),U(He,null,pt(e.sortedMessages,(o,f)=>(C(),ne(fi,{key:f,text:o.text,"text-html":!0,sent:e.msgIsFromThisClient(o.root.senderId),name:e.msgIsFromThisClient(o.root.senderId)?`${e.msgSender(o.root)} (you)`:e.msgSender(o.root),stamp:e.formatMessageTime(o.time),"text-color":"white","bg-color":e.msgIsFromThisClient(o.root.senderId)?"primary":"grey-9"},{avatar:u(()=>[l(uo,{color:e.msgIsFromThisClient(o.root.senderId)?"primary":"grey-9",class:"q-mx-xs"},{default:u(()=>[e.getProfilePicture(e.msgSender(o.root))?(C(),U("img",{key:0,src:e.getProfilePicture(e.msgSender(o.root))},null,8,Pi)):(C(),U("span",Ni,re(e.msgSender(o.root).charAt(0)),1))]),_:2},1032,["color"])]),_:2},1032,["text","sent","name","stamp","bg-color"]))),128))]),_:1})]),_:1},8,["onScroll"]),l(Se,{class:"inputBox",placeholder:"Type a message...",outlined:"",modelValue:e.messageInput,"onUpdate:modelValue":t[0]||(t[0]=o=>e.messageInput=o),dense:!0,onKeydown:jt(ye(e.submitMessage,["prevent"]),["enter"])},{append:u(()=>[l(X,{title:"Click, or press Enter to send.",flat:"",round:"",dense:"",onClick:ye(e.submitMessage,["stop"])},{default:u(()=>[l(Le,{name:"send",color:"primary"})]),_:1},8,["onClick"])]),_:1},8,["modelValue","onKeydown"])]),_:1})]),_:1},8,["managerProps"])}var _i=Je(Ri,[["render",Di],["__scopeId","data-v-0b9f68cd"]]);function va(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const i=e.valueOf();if(Object(i)!==i){const n=new e.constructor(i);return t.set(e,n),n}}return t.set(e,a),e instanceof Set?e.forEach(i=>{a.add(va(i,t))}):e instanceof Map&&e.forEach((i,n)=>{a.set(n,va(i,t))}),Object.assign(a,...Object.keys(e).map(i=>({[i]:va(e[i],t)})))}var Mt=We({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:a}){const{proxy:i}=it(),{$q:n}=i,c=F(null),s=F(""),o=F("");let f=!1;const b=m(()=>$l({initialValue:s.value,validate:e.validate,set:S,cancel:L,updatePosition:g},"value",()=>o.value,M=>{o.value=M}));function S(){e.validate(o.value)!==!1&&(h()===!0&&(a("save",o.value,s.value),a("update:modelValue",o.value)),$())}function L(){h()===!0&&a("cancel",o.value,s.value),$()}function g(){ft(()=>{c.value.updatePosition()})}function h(){return Wt(o.value,s.value)===!1}function $(){f=!0,c.value.hide()}function G(){f=!1,s.value=va(e.modelValue),o.value=va(e.modelValue),a("beforeShow")}function q(){a("show")}function ae(){f===!1&&h()===!0&&(e.autoSave===!0&&e.validate(o.value)===!0?(a("save",o.value,s.value),a("update:modelValue",o.value)):a("cancel",o.value,s.value)),a("beforeHide")}function oe(){a("hide")}function w(){const M=t.default!==void 0?[].concat(t.default(b.value)):[];return e.title&&M.unshift(v("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&M.push(v("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[v(X,{flat:!0,color:e.color,label:e.labelCancel||n.lang.label.cancel,onClick:L}),v(X,{flat:!0,color:e.color,label:e.labelSet||n.lang.label.set,onClick:S})])),M}return Object.assign(i,{set:S,cancel:L,show(M){c.value!==null&&c.value.show(M)},hide(M){c.value!==null&&c.value.hide(M)},updatePosition:g}),()=>{if(e.disable!==!0)return v(ol,{ref:c,class:"q-popup-edit",cover:e.cover,onBeforeShow:G,onShow:q,onBeforeHide:ae,onHide:oe,onEscapeKey:L},w)}}});const Bi=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function Po({r:e,g:t,b:a,a:i}){const n=i!==void 0;if(e=Math.round(e),t=Math.round(t),a=Math.round(a),e>255||t>255||a>255||n&&i>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return i=n?(Math.round(255*i/100)|1<<8).toString(16).slice(1):"","#"+(a|t<<8|e<<16|1<<24).toString(16).slice(1)+i}function No({r:e,g:t,b:a,a:i}){return`rgb${i!==void 0?"a":""}(${e},${t},${a}${i!==void 0?","+i/100:""})`}function ml(e){if(typeof e!="string")throw new TypeError("Expected a string");e=e.replace(/^#/,""),e.length===3?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:e.length===4&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const t=parseInt(e,16);return e.length>6?{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:Math.round((t&255)/2.55)}:{r:t>>16,g:t>>8&255,b:t&255}}function Do({h:e,s:t,v:a,a:i}){let n,c,s;t=t/100,a=a/100,e=e/360;const o=Math.floor(e*6),f=e*6-o,b=a*(1-t),S=a*(1-f*t),L=a*(1-(1-f)*t);switch(o%6){case 0:n=a,c=L,s=b;break;case 1:n=S,c=a,s=b;break;case 2:n=b,c=a,s=L;break;case 3:n=b,c=S,s=a;break;case 4:n=L,c=b,s=a;break;case 5:n=a,c=b,s=S;break}return{r:Math.round(n*255),g:Math.round(c*255),b:Math.round(s*255),a:i}}function Ya({r:e,g:t,b:a,a:i}){const n=Math.max(e,t,a),c=Math.min(e,t,a),s=n-c,o=n===0?0:s/n,f=n/255;let b;switch(n){case c:b=0;break;case e:b=t-a+s*(t<a?6:0),b/=6*s;break;case t:b=a-e+s*2,b/=6*s;break;case a:b=e-t+s*4,b/=6*s;break}return{h:Math.round(b*360),s:Math.round(o*100),v:Math.round(f*100),a:i}}function fl(e){if(typeof e!="string")throw new TypeError("Expected a string");const t=e.replace(/ /g,""),a=Bi.exec(t);if(a===null)return ml(t);const i={r:Math.min(255,parseInt(a[2],10)),g:Math.min(255,parseInt(a[3],10)),b:Math.min(255,parseInt(a[4],10))};if(a[1]){const n=parseFloat(a[5]);i.a=Math.min(1,isNaN(n)===!0?1:n)*100}return i}function zi(e){if(typeof e!="string"&&(!e||e.r===void 0))throw new TypeError("Expected a string or a {r, g, b} object as color");const t=typeof e=="string"?fl(e):e,a=t.r/255,i=t.g/255,n=t.b/255,c=a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4),s=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4);return .2126*c+.7152*s+.0722*o}const xi=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],_o="M5 5 h10 v10 h-10 v-10 z",Fi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==";var pa=We({name:"QColor",props:{...Xt,...Ia,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:e=>["spectrum","tune","palette"].includes(e)},formatModel:{type:String,default:"auto",validator:e=>["auto","hex","rgb","hexa","rgba"].includes(e)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(e,{emit:t}){const{proxy:a}=it(),{$q:i}=a,n=Jt(e,i),{getCache:c}=rn(),s=F(null),o=F(null),f=m(()=>e.formatModel==="auto"?null:e.formatModel.indexOf("hex")!==-1),b=m(()=>e.formatModel==="auto"?null:e.formatModel.indexOf("a")!==-1),S=F(e.formatModel==="auto"?e.modelValue===void 0||e.modelValue===null||e.modelValue===""||e.modelValue.startsWith("#")?"hex":"rgb":e.formatModel.startsWith("hex")?"hex":"rgb"),L=F(e.defaultView),g=F(z(e.modelValue||e.defaultValue)),h=m(()=>e.disable!==!0&&e.readonly!==!0),$=m(()=>e.modelValue===void 0||e.modelValue===null||e.modelValue===""||e.modelValue.startsWith("#")),G=m(()=>f.value!==null?f.value:$.value),q=m(()=>({type:"hidden",name:e.name,value:g.value[G.value===!0?"hex":"rgb"]})),ae=co(q),oe=m(()=>b.value!==null?b.value:g.value.a!==void 0),w=m(()=>({backgroundColor:g.value.rgb||"#000"})),M=m(()=>`q-color-picker__header-content q-color-picker__header-content--${(g.value.a!==void 0&&g.value.a<65?!0:zi(g.value)>.4)?"light":"dark"}`),ee=m(()=>({background:`hsl(${g.value.h},100%,50%)`})),B=m(()=>({top:`${100-g.value.v}%`,[i.lang.rtl===!0?"right":"left"]:`${g.value.s}%`})),me=m(()=>e.palette!==void 0&&e.palette.length!==0?e.palette:xi),Ve=m(()=>"q-color-picker"+(e.bordered===!0?" q-color-picker--bordered":"")+(e.square===!0?" q-color-picker--square no-border-radius":"")+(e.flat===!0?" q-color-picker--flat no-shadow":"")+(e.disable===!0?" disabled":"")+(n.value===!0?" q-color-picker--dark q-dark":"")),Oe=m(()=>e.disable===!0?{"aria-disabled":"true"}:{}),Fe=m(()=>[[Jo,tt,void 0,{prevent:!0,stop:!0,mouse:!0}]]);lt(()=>e.modelValue,y=>{const N=z(y||e.defaultValue);N.hex!==g.value.hex&&(g.value=N)}),lt(()=>e.defaultValue,y=>{if(!e.modelValue&&y){const N=z(y);N.hex!==g.value.hex&&(g.value=N)}});function we(y,N){g.value.hex=Po(y),g.value.rgb=No(y),g.value.r=y.r,g.value.g=y.g,g.value.b=y.b,g.value.a=y.a;const j=g.value[G.value===!0?"hex":"rgb"];t("update:modelValue",j),N===!0&&t("change",j)}function z(y){const N=b.value!==void 0?b.value:e.formatModel==="auto"?null:e.formatModel.indexOf("a")!==-1;if(typeof y!="string"||y.length===0||nn.anyColor(y.replace(/ /g,""))!==!0)return{h:0,s:0,v:0,r:0,g:0,b:0,a:N===!0?100:void 0,hex:void 0,rgb:void 0};const j=fl(y);return N===!0&&j.a===void 0&&(j.a=100),j.hex=Po(j),j.rgb=No(j),Object.assign(j,Ya(j))}function Ee(y,N,j){const Z=s.value;if(Z===null)return;const ke=Z.clientWidth,Q=Z.clientHeight,$e=Z.getBoundingClientRect();let Ae=Math.min(ke,Math.max(0,y-$e.left));i.lang.rtl===!0&&(Ae=ke-Ae);const Be=Math.min(Q,Math.max(0,N-$e.top)),qe=Math.round(100*Ae/ke),A=Math.round(100*Math.max(0,Math.min(1,-(Be/Q)+1))),R=Do({h:g.value.h,s:qe,v:A,a:oe.value===!0?g.value.a:void 0});g.value.s=qe,g.value.v=A,we(R,j)}function _e(y,N){const j=Math.round(y),Z=Do({h:j,s:g.value.s,v:g.value.v,a:oe.value===!0?g.value.a:void 0});g.value.h=j,we(Z,N)}function Ye(y){_e(y,!0)}function fe(y,N,j,Z,ke){if(Z!==void 0&&vt(Z),!/^[0-9]+$/.test(y)){ke===!0&&a.$forceUpdate();return}const Q=Math.floor(Number(y));if(Q<0||Q>j){ke===!0&&a.$forceUpdate();return}const $e={r:N==="r"?Q:g.value.r,g:N==="g"?Q:g.value.g,b:N==="b"?Q:g.value.b,a:oe.value===!0?N==="a"?Q:g.value.a:void 0};if(N!=="a"){const Ae=Ya($e);g.value.h=Ae.h,g.value.s=Ae.s,g.value.v=Ae.v}if(we($e,ke),Z!==void 0&&ke!==!0&&Z.target.selectionEnd!==void 0){const Ae=Z.target.selectionEnd;ft(()=>{Z.target.setSelectionRange(Ae,Ae)})}}function Xe(y,N){let j;const Z=y.target.value;if(vt(y),S.value==="hex"){if(Z.length!==(oe.value===!0?9:7)||!/^#[0-9A-Fa-f]+$/.test(Z))return!0;j=ml(Z)}else{let Q;if(Z.endsWith(")"))if(oe.value!==!0&&Z.startsWith("rgb(")){if(Q=Z.substring(4,Z.length-1).split(",").map($e=>parseInt($e,10)),Q.length!==3||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(Z))return!0}else if(oe.value===!0&&Z.startsWith("rgba(")){if(Q=Z.substring(5,Z.length-1).split(","),Q.length!==4||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(Z))return!0;for(let Ae=0;Ae<3;Ae++){const Be=parseInt(Q[Ae],10);if(Be<0||Be>255)return!0;Q[Ae]=Be}const $e=parseFloat(Q[3]);if($e<0||$e>1)return!0;Q[3]=$e}else return!0;else return!0;if(Q[0]<0||Q[0]>255||Q[1]<0||Q[1]>255||Q[2]<0||Q[2]>255||oe.value===!0&&(Q[3]<0||Q[3]>1))return!0;j={r:Q[0],g:Q[1],b:Q[2],a:oe.value===!0?Q[3]*100:void 0}}const ke=Ya(j);if(g.value.h=ke.h,g.value.s=ke.s,g.value.v=ke.v,we(j,N),N!==!0){const Q=y.target.selectionEnd;ft(()=>{y.target.setSelectionRange(Q,Q)})}}function Ke(y){const N=z(y),j={r:N.r,g:N.g,b:N.b,a:N.a};j.a===void 0&&(j.a=g.value.a),g.value.h=N.h,g.value.s=N.s,g.value.v=N.v,we(j,!0)}function tt(y){y.isFinal?Ee(y.position.left,y.position.top,!0):rt(y)}const rt=El(y=>{Ee(y.position.left,y.position.top)},20);function p(y){Ee(y.pageX-window.pageXOffset,y.pageY-window.pageYOffset,!0)}function O(y){Ee(y.pageX-window.pageXOffset,y.pageY-window.pageYOffset)}function P(y){o.value!==null&&(o.value.$el.style.opacity=y?1:0)}function ge(y){S.value=y}function J(){const y=[];return e.noHeaderTabs!==!0&&y.push(v(Yt,{class:"q-color-picker__header-tabs",modelValue:S.value,dense:!0,align:"justify","onUpdate:modelValue":ge},()=>[v(Qe,{label:"HEX"+(oe.value===!0?"A":""),name:"hex",ripple:!1}),v(Qe,{label:"RGB"+(oe.value===!0?"A":""),name:"rgb",ripple:!1})])),y.push(v("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[v("input",{class:"fit",value:g.value[S.value],...h.value!==!0?{readonly:!0}:{},...c("topIn",{onInput:N=>{P(Xe(N)===!0)},onChange:vt,onBlur:N=>{Xe(N,!0)===!0&&a.$forceUpdate(),P(!1)}})}),v(Le,{ref:o,class:"q-color-picker__error-icon absolute no-pointer-events",name:i.iconSet.type.negative})])),v("div",{class:"q-color-picker__header relative-position overflow-hidden"},[v("div",{class:"q-color-picker__header-bg absolute-full"}),v("div",{class:M.value,style:w.value},y)])}function K(){return v(ia,{modelValue:L.value,animated:!0},()=>[v(et,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},te),v(et,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},Ie),v(et,{class:"q-color-picker__palette-tab",name:"palette"},Ue)])}function le(y){L.value=y}function Me(){return v("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[v(Yt,{class:"absolute-full",modelValue:L.value,dense:!0,align:"justify","onUpdate:modelValue":le},()=>[v(Qe,{icon:i.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),v(Qe,{icon:i.iconSet.colorPicker.tune,name:"tune",ripple:!1}),v(Qe,{icon:i.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])}function te(){const y={ref:s,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(h.value!==!0?" readonly":""),style:ee.value,...h.value===!0?{onClick:p,onMousedown:O}:{}},N=[v("div",{style:{paddingBottom:"100%"}}),v("div",{class:"q-color-picker__spectrum-white absolute-full"}),v("div",{class:"q-color-picker__spectrum-black absolute-full"}),v("div",{class:"absolute",style:B.value},[g.value.hex!==void 0?v("div",{class:"q-color-picker__spectrum-circle"}):null])],j=[v(Lt,{class:"q-color-picker__hue non-selectable",modelValue:g.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:h.value!==!0,thumbPath:_o,"onUpdate:modelValue":_e,onChange:Ye})];return oe.value===!0&&j.push(v(Lt,{class:"q-color-picker__alpha non-selectable",modelValue:g.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:Fi,readonly:h.value!==!0,hideSelection:!0,thumbPath:_o,...c("alphaSlide",{"onUpdate:modelValue":Z=>fe(Z,"a",100),onChange:Z=>fe(Z,"a",100,void 0,!0)})})),[La("div",y,N,"spec",h.value,()=>Fe.value),v("div",{class:"q-color-picker__sliders"},j)]}function Ie(){return[v("div",{class:"row items-center no-wrap"},[v("div","R"),v(Lt,{modelValue:g.value.r,min:0,max:255,color:"red",dark:n.value,readonly:h.value!==!0,...c("rSlide",{"onUpdate:modelValue":y=>fe(y,"r",255),onChange:y=>fe(y,"r",255,void 0,!0)})}),v("input",{value:g.value.r,maxlength:3,readonly:h.value!==!0,onChange:vt,...c("rIn",{onInput:y=>fe(y.target.value,"r",255,y),onBlur:y=>fe(y.target.value,"r",255,y,!0)})})]),v("div",{class:"row items-center no-wrap"},[v("div","G"),v(Lt,{modelValue:g.value.g,min:0,max:255,color:"green",dark:n.value,readonly:h.value!==!0,...c("gSlide",{"onUpdate:modelValue":y=>fe(y,"g",255),onChange:y=>fe(y,"g",255,void 0,!0)})}),v("input",{value:g.value.g,maxlength:3,readonly:h.value!==!0,onChange:vt,...c("gIn",{onInput:y=>fe(y.target.value,"g",255,y),onBlur:y=>fe(y.target.value,"g",255,y,!0)})})]),v("div",{class:"row items-center no-wrap"},[v("div","B"),v(Lt,{modelValue:g.value.b,min:0,max:255,color:"blue",readonly:h.value!==!0,dark:n.value,...c("bSlide",{"onUpdate:modelValue":y=>fe(y,"b",255),onChange:y=>fe(y,"b",255,void 0,!0)})}),v("input",{value:g.value.b,maxlength:3,readonly:h.value!==!0,onChange:vt,...c("bIn",{onInput:y=>fe(y.target.value,"b",255,y),onBlur:y=>fe(y.target.value,"b",255,y,!0)})})]),oe.value===!0?v("div",{class:"row items-center no-wrap"},[v("div","A"),v(Lt,{modelValue:g.value.a,color:"grey",readonly:h.value!==!0,dark:n.value,...c("aSlide",{"onUpdate:modelValue":y=>fe(y,"a",100),onChange:y=>fe(y,"a",100,void 0,!0)})}),v("input",{value:g.value.a,maxlength:3,readonly:h.value!==!0,onChange:vt,...c("aIn",{onInput:y=>fe(y.target.value,"a",100,y),onBlur:y=>fe(y.target.value,"a",100,y,!0)})})]):null]}function Ue(){const y=N=>v("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:N},...h.value===!0?c("palette#"+N,{onClick:()=>{Ke(N)}}):{}});return[v("div",{class:"row items-center q-color-picker__palette-rows"+(h.value===!0?" q-color-picker__palette-rows--editable":"")},me.value.map(y))]}return()=>{const y=[K()];return e.name!==void 0&&e.disable!==!0&&ae(y,"push"),e.noHeader!==!0&&y.unshift(J()),e.noFooter!==!0&&y.push(Me()),v("div",{class:Ve.value,...Oe.value},y)}}});const Ui=je({name:"ExploreOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{applicationStore:Ot,userStore:na}},data(){return{placesList:new Array,loading:!1,filterText:"",locationInput:"",lastConnectedDomain:void 0,newBookmark:{name:"",color:""},locationBookmarked:!1,locationCopied:!1,domain:"",position:po.Zero(),rotation:go.Zero(),tab:"all"}},computed:{getLocation:function(){return this.userStore.avatar.location??"Not currently connected to a domain."},getDomainServerState:function(){return this.applicationStore.domain.url&&this.applicationStore.domain.url.length>0?`${this.applicationStore.domain.connectionState} (${this.applicationStore.domain.url})`:this.applicationStore.domain.connectionState},getShowConnect:function(){return!!(this.applicationStore.domain.url&&this.applicationStore.domain.url.length>0&&this.applicationStore.domain.connectionState==="DISCONNECTED"&&this.lastConnectedDomain)},getShowDisconnect:function(){return!!(this.applicationStore.domain.url&&this.applicationStore.domain.url.length>0&&this.applicationStore.domain.connectionState.startsWith("CONNECT"))},getDisconnectLabel:function(){return this.applicationStore.domain.connectionState==="CONNECTING"?"Cancel":this.applicationStore.domain.connectionState==="CONNECTED"?"Disconnect":"false"},filteredAndSortedData:function(){let e=this.placesList;return e=e.filter(t=>!t.name.toLowerCase().indexOf(this.filterText.toLowerCase())),e=e.sort((t,a)=>t.currentAttendance>a.currentAttendance?-1:t.currentAttendance<a.currentAttendance?1:t.name.toLowerCase()<a.name.toLowerCase()?-1:t.name.toLowerCase()>a.name.toLowerCase()?1:0),e}},methods:{async loadPlacesList(){this.loading=!0,this.placesList=await Ll.getActivePlaceList(),this.loading=!1},async openLocation(e){xt.info(xt.types.UI,`Connecting to... ${e}`);const t=new ho(this.$route.path.replace("/","")),a=new ho(e);await za.connectionSetup(t.hostname===a.hostname?a.pathname:e)},openDetails(e){alert("Not currently implemented: Show details - "+e.name)},async visitIconCallback(){this.filterText!==""&&await this.openLocation(this.filterText)},resetPosition(){ga.getScene().resetMyAvatarPositionAndOrientation()},connect:async function(){await this.connectToAddress(this.locationInput)},connectToLastAddress:async function(){this.lastConnectedDomain&&await this.connectToAddress(this.lastConnectedDomain)},connectToAddress:async function(e){xt.info(xt.types.UI,`Connecting to... ${e}`),await za.connectionSetup(e)},disconnect:function(){xt.info(xt.types.UI,`Disconnecting from... ${this.userStore.avatar.location}`),this.lastConnectedDomain=this.userStore.avatar.location,za.disconnectActiveDomain()},parseLocation(e,t){try{if(e.length>0){const a=new URL(e);if(t==="protocol"){const i=a.protocol.toUpperCase();return i.includes(":")?i.split(":")[0]:i}if(t==="domain")return a.hostname;if(t==="port")return a.port;if(t==="position"){const i=a.pathname.split("/")[1];return new po(parseFloat(i.split(",")[0]),parseFloat(i.split(",")[1]),parseFloat(i.split(",")[2]))}if(t==="rotation"){const i=a.pathname.split("/")[2];return new go(parseFloat(i.split(",")[0]),parseFloat(i.split(",")[1]),parseFloat(i.split(",")[2]),parseFloat(i.split(",")[3]))}}}catch{return"None"}return"None"},loadLocation(e){this.domain=this.parseLocation(e,"domain"),this.position=this.parseLocation(e,"position"),this.rotation=this.parseLocation(e,"rotation")},setLocation(){const e=`${this.position.x.toString()},${this.position.y.toString()},${this.position.z.toString()}`,t=`${this.rotation.x.toString()},${this.rotation.y.toString()},${this.rotation.z.toString()},${this.rotation.w.toString()}`,a=`${this.domain}/${e}/${t}`;(async()=>await this.openLocation(a))()},protocolIsSecure(e){return e==="WSS"||e==="HTTPS"},addLocationToBookmarks(){this.userStore.bookmarks.locations.push({name:this.newBookmark.name,color:this.newBookmark.color,url:this.userStore.avatar.location}),this.newBookmark.name="",this.newBookmark.color=""},updateBookmark(e){const t=this.userStore.bookmarks.locations[e].url;this.userStore.bookmarks.locations.splice(e,1,{name:this.newBookmark.name,color:this.newBookmark.color,url:t}),this.newBookmark.name="",this.newBookmark.color=""},deleteBookmark(e){this.userStore.bookmarks.locations.splice(e,1)},async copyLocationToClipboard(){this.locationCopied=!0;let e=this.getLocation;Ot.theme.hideInWorldLocation==="true"&&(e=e.split("/").slice(0,3).join("/")),await navigator.clipboard.writeText(e);const t=1700;window.setTimeout(()=>{this.locationCopied=!1},t)},validateBookmarkName(e){return/^(?=[a-z0-9._-\s]{2,20}$)(?!.*[-_.\s]{2})[^-_.\s].*[^-_.\s]$/i.test(e)}},created(){this.loadPlacesList()},beforeMount(){this.loadLocation(this.userStore.avatar.location),lt(()=>this.userStore.avatar.location,e=>this.loadLocation(e))}}),Hi=["src","alt"],Wi=["title"],ji={class:"row q-gutter-x-md q-mt-xs"},Ki=["title"],Gi={class:"row q-gutter-x-md q-mt-xs"},Qi=["title"],Yi={class:"row q-gutter-x-md q-mt-xs"},Xi={class:"locationBookmark"},Ji={class:"row q-gutter-x-md q-mt-xs"},Zi={class:"locationCopy"},er={class:"locationButton"},tr={class:"row"},ar={key:0,class:"text-grey-6 q-pt-lg",style:{width:"100%","text-align":"center"}},or={class:"col",style:{width:"100%",overflow:"hidden"}},lr={class:"q-ma-none text-no-wrap ellipsis"},nr=["title"],ir={class:"row q-gutter-x-md q-mt-xs"},rr={class:"row q-px-md q-py-sm",style:{"align-items":"center",gap:"16px","border-top":"1px solid #8888"}};function sr(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"travel_explore",title:"Explore",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400,defaultLeft:250,defaultTop:10,hoverShowBar:!1,style:{border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height",style:Dt({background:e.$q.dark.isActive?e.applicationStore.theme.colors.dark:e.applicationStore.theme.colors.light,boxShadow:"none"})},{default:u(()=>[I("div",{class:Ut(["exploreLocationInfo q-pa-sm",{connected:e.applicationStore.metaverse.connectionState==="CONNECTED",connecting:e.applicationStore.metaverse.connectionState==="CONNECTING",disconnected:e.applicationStore.metaverse.connectionState==="DISCONNECTED"}])},[I("img",{src:e.applicationStore.theme.logo,alt:`${e.applicationStore.theme.productName} logo`},null,8,Hi),I("p",{class:"locationDomain text-no-wrap ellipsis cursor-pointer",title:"Domain: "+e.parseLocation(e.getLocation,"domain")},[l(Le,{name:e.protocolIsSecure(e.parseLocation(e.getLocation,"protocol"))?"lock":"no_encryption",size:"1em",title:e.protocolIsSecure(e.parseLocation(e.getLocation,"protocol"))?"Connection secured with "+e.parseLocation(e.getLocation,"protocol"):e.parseLocation(e.getLocation,"protocol")},null,8,["name","title"]),x(" "+re(e.parseLocation(e.getLocation,"domain"))+" ",1),l(Mt,{modelValue:e.domain,"onUpdate:modelValue":t[1]||(t[1]=o=>e.domain=o)},{default:u(o=>[t[26]||(t[26]=x(" Domain ")),l(Se,{dense:"",autofocus:"",modelValue:e.domain,"onUpdate:modelValue":t[0]||(t[0]=f=>e.domain=f)},null,8,["modelValue"]),I("div",ji,[l(X,{onClick:()=>{o.cancel(),e.loadLocation(e.userStore.avatar.location)}},{default:u(()=>t[24]||(t[24]=[x("Cancel")])),_:2},1032,["onClick"]),l(X,{color:"primary",onClick:()=>{o.set(),e.setLocation()}},{default:u(()=>t[25]||(t[25]=[x("Ok")])),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])],8,Wi),Ge(I("p",{class:"locationPosition text-no-wrap ellipsis cursor-pointer",title:"Position: "+e.parseLocation(e.getLocation,"position").toString().replace("{","").replace("}","")},[x(re(e.parseLocation(e.getLocation,"position").toString().replace("{","").replace("}",""))+" ",1),l(Mt,{modelValue:e.position,"onUpdate:modelValue":t[5]||(t[5]=o=>e.position=o)},{default:u(o=>[t[29]||(t[29]=x(" Position ")),l(Se,{dense:"",type:"number",label:"X",modelValue:e.position.x,"onUpdate:modelValue":t[2]||(t[2]=f=>e.position.x=f)},null,8,["modelValue"]),l(Se,{dense:"",type:"number",label:"Y",modelValue:e.position.y,"onUpdate:modelValue":t[3]||(t[3]=f=>e.position.y=f)},null,8,["modelValue"]),l(Se,{dense:"",type:"number",label:"Z",modelValue:e.position.z,"onUpdate:modelValue":t[4]||(t[4]=f=>e.position.z=f)},null,8,["modelValue"]),I("div",Gi,[l(X,{onClick:()=>{o.cancel(),e.loadLocation(e.userStore.avatar.location)}},{default:u(()=>t[27]||(t[27]=[x("Cancel")])),_:2},1032,["onClick"]),l(X,{color:"primary",onClick:()=>{o.set(),e.setLocation()}},{default:u(()=>t[28]||(t[28]=[x("Ok")])),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])],8,Ki),[[Kt,e.applicationStore.theme.hideInWorldLocation!=="true"]]),Ge(I("p",{class:"locationRotation text-no-wrap ellipsis cursor-pointer",title:"Rotation: "+e.parseLocation(e.getLocation,"rotation").toString().replace("{","").replace("}","")},[x(re(e.parseLocation(e.getLocation,"rotation").toString().replace("{","").replace("}",""))+" ",1),l(Mt,{modelValue:e.rotation,"onUpdate:modelValue":t[10]||(t[10]=o=>e.rotation=o)},{default:u(o=>[t[32]||(t[32]=x(" Rotation ")),l(Se,{dense:"",type:"number",label:"X",modelValue:e.rotation.x,"onUpdate:modelValue":t[6]||(t[6]=f=>e.rotation.x=f)},null,8,["modelValue"]),l(Se,{dense:"",type:"number",label:"Y",modelValue:e.rotation.y,"onUpdate:modelValue":t[7]||(t[7]=f=>e.rotation.y=f)},null,8,["modelValue"]),l(Se,{dense:"",type:"number",label:"Z",modelValue:e.rotation.z,"onUpdate:modelValue":t[8]||(t[8]=f=>e.rotation.z=f)},null,8,["modelValue"]),l(Se,{dense:"",type:"number",label:"W",modelValue:e.rotation.w,"onUpdate:modelValue":t[9]||(t[9]=f=>e.rotation.w=f)},null,8,["modelValue"]),I("div",Yi,[l(X,{onClick:()=>{o.cancel(),e.loadLocation(e.userStore.avatar.location)}},{default:u(()=>t[30]||(t[30]=[x("Cancel")])),_:2},1032,["onClick"]),l(X,{color:"primary",onClick:()=>{o.set(),e.setLocation()}},{default:u(()=>t[31]||(t[31]=[x("Ok")])),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])],8,Qi),[[Kt,e.applicationStore.theme.hideInWorldLocation!=="true"]]),I("div",Xi,[Ge((C(),ne(X,{flat:"",round:"",icon:e.locationBookmarked?"done":"bookmark",disable:e.locationBookmarked,size:"sm",class:"q-pa-none",title:"Bookmark this location"},{default:u(()=>[l(Mt,{modelValue:e.newBookmark,"onUpdate:modelValue":t[13]||(t[13]=o=>e.newBookmark=o)},{default:u(o=>[t[35]||(t[35]=x(" New Bookmark ")),l(Se,{dense:"",label:"Name",counter:"",modelValue:e.newBookmark.name,"onUpdate:modelValue":t[11]||(t[11]=f=>e.newBookmark.name=f),validate:e.validateBookmarkName},null,8,["modelValue","validate"]),l(pa,{"no-header":"","no-footer":"",class:"q-mt-xs","format-model":"hex",modelValue:e.newBookmark.color,"onUpdate:modelValue":t[12]||(t[12]=f=>e.newBookmark.color=f)},null,8,["modelValue"]),I("div",Ji,[l(X,{onClick:()=>{o.cancel()}},{default:u(()=>t[33]||(t[33]=[x("Cancel")])),_:2},1032,["onClick"]),l(X,{color:"primary",onClick:()=>{o.set(),e.addLocationToBookmarks()}},{default:u(()=>t[34]||(t[34]=[x("Ok")])),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])]),_:1},8,["icon","disable"])),[[yt]])]),I("div",Zi,[Ge(l(X,{flat:"",round:"",icon:e.locationCopied?"done":"content_copy",disable:e.locationCopied,size:"sm",class:"q-pa-none",title:"Copy location link",onClick:t[14]||(t[14]=ye(o=>e.copyLocationToClipboard(),["stop"]))},null,8,["icon","disable"]),[[yt]])]),I("div",er,[Ge(l(X,{dense:"",color:"secondary",size:"sm",class:"q-ml-sm absolute",style:{"margin-top":"-4px"},onClick:t[15]||(t[15]=o=>e.disconnect()),label:e.getDisconnectLabel},null,8,["label"]),[[Kt,e.getShowDisconnect]]),Ge(l(X,{dense:"",color:"secondary",size:"sm",class:"q-ml-sm absolute",style:{"margin-top":"-4px"},onClick:t[16]||(t[16]=o=>e.connectToLastAddress()),label:"Connect"},null,512),[[Kt,e.getShowConnect]])])],2),I("div",tr,[l(Se,{borderless:"",dense:"",filled:"",debounce:"300",modelValue:e.filterText,"onUpdate:modelValue":t[17]||(t[17]=o=>e.filterText=o),placeholder:"Search or enter location",class:"col","append-icon":"mdi-location-enter",onKeyup:jt(e.visitIconCallback,["enter"])},{append:u(()=>[l(Le,{name:"search"}),Ge(l(Le,{name:"launch",onClick:e.visitIconCallback,clickable:""},null,8,["onClick"]),[[yt]])]),_:1},8,["modelValue","onKeyup"])]),l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[18]||(t[18]=o=>e.tab=o),"no-caps":"",dense:""},{default:u(()=>[l(Qe,{name:"all",label:"All"}),l(Qe,{name:"bookmarks",label:"Bookmarks"})]),_:1},8,["modelValue"]),l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[22]||(t[22]=o=>e.tab=o),animated:"",class:"full-height"},{default:u(()=>[l(et,{name:"all",class:"q-pa-none non-selectable"},{default:u(()=>[l(ut,{showing:!e.loading},{default:u(()=>[(C(!0),U(He,null,pt(e.filteredAndSortedData,o=>Ge((C(),ne(Te,{key:o.placeId,clickable:"",onClick:f=>e.openLocation(o.address),style:Dt(o.thumbnail?"background-image: url("+o.thumbnail+");":""),class:"exploreItem"},{default:u(()=>[t[36]||(t[36]=I("div",{class:"exploreItemBackground"},null,-1)),l(W,{side:""},{default:u(()=>[l(X,{round:"",color:"white",icon:"fas fa-info",clickable:"",onClick:ye(f=>e.openDetails(o),["stop"]),class:"text-secondary",size:"10px"},null,8,["onClick"])]),_:2},1024),l(W,{top:""},{default:u(()=>[l(St,{lines:"1",class:Ut([e.$q.dark.isActive?"bg-dark":"bg-white","exploreLabel"])},{default:u(()=>[x(re(o.name),1)]),_:2},1032,["class"]),l(St,{caption:"",lines:"1",class:Ut([e.$q.dark.isActive?"bg-dark":"bg-white","exploreLabel"])},{default:u(()=>[x(re(o.description),1)]),_:2},1032,["class"])]),_:2},1024),l(W,{side:""},{default:u(()=>[l(Zo,{color:"white","text-color":"black"},{default:u(()=>[x(re(o.currentAttendance)+" ",1),l(Le,{name:"people",size:"14px",class:"q-ml-xs"})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick","style"])),[[yt]])),128))]),_:1},8,["showing"])]),_:1}),l(et,{name:"bookmarks",class:"full-height q-pa-none non-selectable"},{default:u(()=>[l(ut,{showing:!e.loading},{default:u(()=>[e.userStore.bookmarks.locations.length<=0?(C(),U("p",ar,"You have no bookmarks")):(C(!0),U(He,{key:1},pt(e.userStore.bookmarks.locations,(o,f)=>Ge((C(),ne(Te,{key:o.name,clickable:"",style:{height:"4em"},onClick:b=>e.openLocation(o.url)},{default:u(()=>[l(W,{side:""},{default:u(()=>[l(uo,{style:Dt({backgroundColor:o.color,border:"4px solid #888"}),size:"md"},null,8,["style"])]),_:2},1024),l(W,null,{default:u(()=>[I("div",or,[I("p",lr,re(o.name),1),I("p",{class:"q-ma-none text-caption text-grey-5 text-no-wrap ellipsis",title:o.url},re(o.url),9,nr)])]),_:2},1024),l(W,null,{default:u(()=>[l(X,{dense:"",flat:"","fab-mini":"",icon:"edit",title:"Edit bookmark",onClick:ye(()=>{e.newBookmark.name=o.name,e.newBookmark.color=o.color},["stop"])},{default:u(()=>[l(Mt,{modelValue:e.newBookmark,"onUpdate:modelValue":t[21]||(t[21]=b=>e.newBookmark=b)},{default:u(b=>[t[39]||(t[39]=x(" New Bookmark ")),l(Se,{dense:"",label:"Name",counter:"",modelValue:e.newBookmark.name,"onUpdate:modelValue":t[19]||(t[19]=S=>e.newBookmark.name=S),validate:e.validateBookmarkName},null,8,["modelValue","validate"]),l(pa,{"no-header":"","no-footer":"",class:"q-mt-xs","format-model":"hex",modelValue:e.newBookmark.color,"onUpdate:modelValue":t[20]||(t[20]=S=>e.newBookmark.color=S)},null,8,["modelValue"]),I("div",ir,[l(X,{onClick:()=>{b.cancel()}},{default:u(()=>t[37]||(t[37]=[x("Cancel")])),_:2},1032,["onClick"]),l(X,{color:"primary",onClick:()=>{b.set(),e.updateBookmark(f)}},{default:u(()=>t[38]||(t[38]=[x("Ok")])),_:2},1032,["onClick"])])]),_:2},1032,["modelValue"])]),_:2},1032,["onClick"]),l(X,{dense:"",flat:"","fab-mini":"",color:"red",icon:"delete",title:"Delete bookmark",onClick:ye(b=>e.deleteBookmark(f),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])),[[yt]])),128))]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"]),I("div",rr,[t[41]||(t[41]=I("p",{class:"q-ma-none"},"Stuck?",-1)),l(X,{size:"sm",color:"secondary",onClick:t[23]||(t[23]=o=>e.resetPosition())},{default:u(()=>t[40]||(t[40]=[x("Reset position")])),_:1})])]),_:1},8,["style"]),l(ll,{showing:e.loading},{default:u(()=>[l(Oa,{size:"xl",color:"primary"})]),_:1},8,["showing"])]),_:1},8,["managerProps"])}var ur=Je(Ui,[["render",sr],["__scopeId","data-v-7087e41f"]]);const dr={...so,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},ao=50,vl=2*ao,pl=vl*Math.PI,cr=Math.round(pl*1e3)/1e3;var mr=We({name:"QCircularProgress",props:{...dr,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:t}){const{proxy:{$q:a}}=it(),i=ro(e),n=m(()=>{const h=(a.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(a.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-h}deg)`:`rotate3d(0, 0, 1, ${h-90}deg)`}}),c=m(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),s=m(()=>vl/(1-e.thickness/2)),o=m(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),f=m(()=>Gt(e.value,e.min,e.max)),b=m(()=>e.max-e.min),S=m(()=>e.thickness/2*s.value),L=m(()=>{const h=(e.max-f.value)/b.value,$=e.rounded===!0&&f.value<e.max&&h<.25?S.value/2*(1-h/.25):0;return pl*h+$});function g({thickness:h,offset:$,color:G,cls:q,rounded:ae}){return v("circle",{class:"q-circular-progress__"+q+(G!==void 0?` text-${G}`:""),style:c.value,fill:"transparent",stroke:"currentColor","stroke-width":h,"stroke-dasharray":cr,"stroke-dashoffset":$,"stroke-linecap":ae,cx:s.value,cy:s.value,r:ao})}return()=>{const h=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&h.push(v("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:ao-S.value/2,cx:s.value,cy:s.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&h.push(g({cls:"track",thickness:S.value,offset:0,color:e.trackColor})),h.push(g({cls:"circle",thickness:S.value,offset:L.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const $=[v("svg",{class:"q-circular-progress__svg",style:n.value,viewBox:o.value,"aria-hidden":"true"},h)];return e.showValue===!0&&$.push(v("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[v("div",f.value)])),v("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:i.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:f.value},Qo(t.internal,$))}}});const fr=je({name:"PeopleOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{applicationStore:Ot}},data(){return{showVolumeSlider:{},canKick:!1}},methods:{getProfilePicture(e){},getDisplayName(e){return e.displayName??"anonymous"},setVolume(e,t){var a;if(typeof t=="number"){const i=(a=Nt.ActiveDomain)==null?void 0:a.DomainClient;i&&i.users.setAvatarGain(e,Ol.getGainFromPercentage(t)),this.applicationStore.updateAvatarProperty(e,"volume",t)}},complementMuted(e){var i;const t=!e.muted,a=(i=Nt.ActiveDomain)==null?void 0:i.DomainClient;a&&a.users.setPersonalMute(e.sessionId,t),this.applicationStore.updateAvatarProperty(e.sessionId,"muted",t)},teleportToAvatar(e){ga.getScene().teleportMyAvatarToOtherPeople(e.sessionId.stringify())},banByIP(){return xa.BanFlags.BAN_BY_USERNAME+xa.BanFlags.BAN_BY_FINGERPRINT+xa.BanFlags.BAN_BY_IP},adminServerMute(e){var a;const t=(a=Nt.ActiveDomain)==null?void 0:a.DomainClient;t&&t.users.mute(e)},adminKick(e,t){var i;const a=(i=Nt.ActiveDomain)==null?void 0:i.DomainClient;a&&a.users.kick(e,t)}},mounted(){var t;const e=(t=Nt.ActiveDomain)==null?void 0:t.DomainClient;this.canKick=Boolean(e==null?void 0:e.users.canKick),e==null||e.users.canKickChanged.connect(()=>{this.canKick=Boolean(e==null?void 0:e.users.canKick)})}}),vr=["src"],pr={key:1,style:{"user-select":"none"}},gr={class:"row",style:{"justify-content":"space-between","align-items":"center",gap:"16px"}},hr={class:"row",style:{position:"relative","justify-content":"flex-end","align-items":"center",gap:"4px"}},br={style:{all:"inherit",position:"relative"}},yr={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"};function Sr(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"people",title:`People (${Array.from(e.applicationStore.avatars.avatarsInfo.keys()).length})`,managerProps:e.propsToPass,defaultHeight:500,defaultWidth:400,defaultLeft:300,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[l($t,{class:"col",style:{height:"100%"}},{default:u(()=>[Array.from(e.applicationStore.avatars.avatarsInfo.keys()).length>0?(C(),ne(ut,{key:0},{default:u(()=>[(C(!0),U(He,null,pt(e.applicationStore.avatars.avatarsInfo.values(),o=>(C(),ne(Te,{key:o.sessionId.stringify(),class:"q-mb-none q-pa-sm",dense:""},{default:u(()=>[l(W,{avatar:"",class:"q-gutter-y-sm"},{default:u(()=>[l(uo,{color:"primary"},{default:u(()=>[e.getProfilePicture(o)?(C(),U("img",{key:0,src:e.getProfilePicture(o)},null,8,vr)):(C(),U("span",pr,re(e.getDisplayName(o).substring(0,2)),1))]),_:2},1024),o.isAdmin?(C(),ne(St,{key:0,caption:"",lines:"1"},{default:u(()=>t[1]||(t[1]=[x("Admin")])),_:1})):xe("",!0)]),_:2},1024),l(W,null,{default:u(()=>{var f;return[I("div",gr,[l(St,null,{default:u(()=>[x(re(e.getDisplayName(o)),1)]),_:2},1024),I("div",hr,[I("div",{style:Dt({opacity:e.showVolumeSlider[o.sessionId.stringify()]?0:1,transition:e.showVolumeSlider[o.sessionId.stringify()]?"none":"0.25s ease opacity",pointerEvents:e.showVolumeSlider[o.sessionId.stringify()]?"none":"all"})},[l(X,{icon:"place","text-color":"primary",flat:"",round:"",dense:"",ripple:"",title:`Teleport to ${o.displayName}`,onClick:ye(b=>e.teleportToAvatar(o),["stop"])},null,8,["title","onClick"]),l(X,{icon:"person_add_alt_1","text-color":"primary",flat:"",round:"",dense:"",ripple:"",title:`Add ${o.displayName} as a friend`,disable:"",onClick:t[0]||(t[0]=ye(()=>{},["stop"]))},null,8,["title"]),e.canKick?(C(),U(He,{key:0},[l(X,{icon:"logout","text-color":"negative",flat:"",round:"",dense:"",ripple:"",title:`Kick ${o.displayName}`,disable:!e.canKick,onClick:ye(b=>e.adminKick(o.sessionId),["stop"])},null,8,["title","disable","onClick"]),l(X,{icon:"remove_circle","text-color":"negative",flat:"",round:"",dense:"",ripple:"",title:`IP Ban ${o.displayName}`,disable:!e.canKick,onClick:ye(b=>e.adminKick(o.sessionId,e.banByIP()),["stop"])},null,8,["title","disable","onClick"]),l(X,{icon:"mic_off","text-color":"negative",flat:"",round:"",dense:"",ripple:"",title:`Server mute ${o.displayName}`,disable:!e.canKick,onClick:ye(b=>e.adminServerMute(o.sessionId),["stop"])},null,8,["title","disable","onClick"])],64)):xe("",!0)],4),I("div",br,[l(Lt,{thumbSize:"26px",min:0,max:100,step:5,snap:"",dark:"",color:o.muted||o.volume===0?"red":"primary",title:`Volume: ${o.volume}%`,class:"volumeSlider",style:Dt({opacity:e.showVolumeSlider[o.sessionId.stringify()]?1:0,transition:e.showVolumeSlider[o.sessionId.stringify()]?"0.25s ease opacity":"none",pointerEvents:e.showVolumeSlider[o.sessionId.stringify()]?"all":"none"}),"model-value":o.volume,"onUpdate:modelValue":b=>e.setVolume(o.sessionId,b)},null,8,["color","title","style","model-value","onUpdate:modelValue"]),l(X,{"text-color":o.muted||o.volume===0?"red":"primary",flat:"",round:"",dense:"",ripple:"",title:`Adjust ${((f=o.displayName[o.displayName.length-1])==null?void 0:f.toLowerCase())==="s"?o.displayName+"'":o.displayName+"'s"} volume`,onClick:ye(b=>e.showVolumeSlider[o.sessionId.stringify()]=!e.showVolumeSlider[o.sessionId.stringify()],["stop"])},{default:u(()=>[l(mr,{angle:180,value:o.volume,"instant-feedback":"",size:"xs",thickness:.3,"track-color":"transparent","show-value":"",class:"q-ma-none"},{default:u(()=>t[2]||(t[2]=[I("span",{class:"volumeIcon"},null,-1)])),_:2},1032,["value"])]),_:2},1032,["text-color","title","onClick"])]),l(X,{icon:o.muted||o.volume===0?"volume_off":"volume_up","text-color":o.muted||o.volume===0?"red":"primary",flat:"",round:"",dense:"",ripple:"",title:o.muted||o.volume===0?`Unmute ${o.displayName}`:`Mute ${o.displayName}`,onClick:ye(b=>e.complementMuted(o),["stop"])},null,8,["icon","text-color","title","onClick"])])])]}),_:2},1024)]),_:2},1024))),128))]),_:1})):(C(),U("p",yr,"There is no one else in this server."))]),_:1})]),_:1})]),_:1},8,["title","managerProps"])}var wr=Je(fr,[["render",Sr],["__scopeId","data-v-0b38fe06"]]);const kr=je({name:"AvatarOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{userStore:na}},data(){return{AvatarStoreInterface:Tt,avatarList:{},listFilterValue:"",modelCreateDialog:!1,customModel:{name:"",image:"",url:""},loadingAvatar:!1,fallbackModelId:Il()}},computed:{displayNameStore:{get:function(){return this.userStore.avatar.displayName},set:function(e){var i;xt.debug(xt.types.AVATAR,`Avatar.vue: set displayNameStore. inputInfo=${e}`);const a=(i=ga.getScene()._myAvatar)==null?void 0:i.getComponent(bo.typeName);a instanceof bo&&(a.displayName=e),this.userStore.avatar.displayName=e}},activeModelNameStore:{get:function(){return Tt.getActiveModelData("name")},set:function(e){Tt.setActiveModelData("name",e)}},activeModelFileStore:{get:function(){return Tt.getActiveModelData("file")},set:function(e){Tt.setActiveModelData("file",e)}}},methods:{loadAvatarList(){this.avatarList={};const e=this.sortAvatarList(this.listFilterValue);for(let t=0;t<e.length;t++){const a=e[t][0],i=e[t][1];this.avatarList[a]={avatar:i,showMoreOptions:!1}}},async selectAvatar(e,t){!this.loadingAvatar&&e in this.userStore.avatar.models&&(this.loadingAvatar=!0,Tt.setActiveModel(e),await ga.getScene().loadMyAvatar(Tt.getModelData(e,"file"),t),this.loadingAvatar=!1)},validateDisplayName(e){return/^(?=[a-z0-9._-\s]{2,20}$)(?!.*[-_.\s]{2})[^-_.\s].*[^-_.\s]$/i.test(e)},validateModelName(e){return/^(?=[a-z0-9._-\s]{2,20}$)(?!.*[-_.\s]{2})[^-_.\s].*[^-_.\s]$/i.test(e)},validateModelFile(e){return/(?:\.glb|\.gltf)$/iu.test(e)},validateModelImage(e){return/(?:\.png|\.jpg|\.jpeg|\.webp)$/iu.test(e)},filterAvatarList(e){if(!e||e==="")return this.userStore.avatar.models;const t={};return Object.entries(this.userStore.avatar.models).forEach(a=>{a[1].name.toLowerCase().includes(e.toLowerCase())&&(t[a[0]]=a[1])}),t},sortAvatarList(e){const t=Object.entries(this.filterAvatarList(e));return t.sort((a,i)=>{let n=0;const c=a[1].starred,s=i[1].starred;return c&&c!==s?n=-1:n=1,n}),t},saveCustomAvatar(){this.validateModelName(this.customModel.name)&&this.validateModelFile(this.customModel.url)&&(Tt.createNewModel({name:this.customModel.name,image:this.customModel.image,file:this.customModel.url,scale:1,starred:!0},!0),this.customModel.name="",this.customModel.image="",this.customModel.url="",this.loadAvatarList())}},beforeMount(){this.loadAvatarList()}}),Cr={class:"row q-mb-sm q-px-md"},Ar={class:"col"},Tr={title:"Display name",class:"text-h5 text-left q-pl-md q-mt-md q-mb-sm cursor-pointer"},Mr={class:"row q-ml-md q-pl-xs",style:{border:"1px solid #8888","border-radius":"7px"}},Vr={class:"q-my-xs q-mr-sm q-ml-auto"},$r={class:"row q-gutter-x-md text-subtitle1 text-left q-px-md q-mt-sm q-mb-xs",style:{"flex-flow":"row nowrap"}},Er={class:"row q-gutter-x-md"},Lr={style:{height:"100%"},class:"column no-wrap items-stretch full-height"},Or={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"},Ir={class:"text-subtitle1 text-center q-mt-xs q-mb-xs"};function qr(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"directions_run",title:"Avatar",managerProps:e.propsToPass,defaultHeight:730,defaultWidth:380,defaultLeft:250,defaultTop:50,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height non-selectable",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[I("div",Cr,[e.AvatarStoreInterface.getActiveModelData("image")?(C(),ne(ko,{key:0,src:e.AvatarStoreInterface.getActiveModelData("image"),draggable:!1,width:"100px",height:"100px",ratio:"1",class:"q-mt-md q-mb-xs",style:{"border-radius":"7px"}},null,8,["src"])):(C(),ne(Le,{key:1,name:"mood",size:"xl",class:"q-pt-md q-pb-xs",style:{width:"100px",height:"100px"}})),I("div",Ar,[I("div",Tr,[x(re(e.displayNameStore)+" ",1),Ge((C(),ne(Le,{title:"Edit display name","q-hoverable":"",name:"edit",class:"text-grey q-ml-sm"},{default:u(()=>t[16]||(t[16]=[I("span",{class:"q-focus-helper"},null,-1)])),_:1})),[[yt]]),l(Mt,{modelValue:e.displayNameStore,"onUpdate:modelValue":t[0]||(t[0]=o=>e.displayNameStore=o),"auto-save":"",validate:e.validateDisplayName},{default:u(o=>[l(Se,{modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,dense:"",autofocus:"",counter:"",label:"Display Name",color:e.validateDisplayName(o.value)?"primary":"negative",onKeyup:jt(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:1},8,["modelValue","validate"])]),I("div",Mr,[I("div",{class:Ut(["q-my-auto q-ml-sm text-subtitle2 text-no-wrap ellipsis",{"cursor-pointer":e.userStore.avatar.activeModel!==e.fallbackModelId}]),title:"Avatar name"},[x(re(e.activeModelNameStore)+" ",1),e.userStore.avatar.activeModel!==e.fallbackModelId?(C(),ne(Mt,{key:0,modelValue:e.activeModelNameStore,"onUpdate:modelValue":t[1]||(t[1]=o=>e.activeModelNameStore=o),"auto-save":"",validate:e.validateModelName},{default:u(o=>[l(Se,{modelValue:o.value,"onUpdate:modelValue":f=>o.value=f,dense:"",autofocus:"",counter:"",label:"Avatar name",color:e.validateModelName(o.value)?"primary":"negative",onKeyup:jt(o.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:1},8,["modelValue","validate"])):xe("",!0)],2),I("div",Vr,[l(X,{flat:"",round:"",dense:"",ripple:"",icon:e.AvatarStoreInterface.getActiveModelData("starred")?"star":"star_outline","text-color":e.AvatarStoreInterface.getActiveModelData("starred")?"yellow":e.$q.dark.isActive?"white":"dark",title:"Favorite",class:"text-caption",onClick:t[2]||(t[2]=ye(()=>{e.AvatarStoreInterface.setActiveModelData("starred",!e.AvatarStoreInterface.getActiveModelData("starred")),e.loadAvatarList()},["stop"]))},null,8,["icon","text-color"]),l(X,{flat:"",round:"",dense:"",ripple:"",icon:"refresh",title:"Reload",class:"text-caption",onClick:t[3]||(t[3]=ye(o=>e.selectAvatar(e.userStore.avatar.activeModel,!0),["stop"]))})])])])]),l(Qt,{inset:"",spaced:""}),I("div",$r,[t[20]||(t[20]=I("p",{class:"q-my-auto"},"My Avatars",-1)),l(X,{dense:"",round:"",color:"primary",icon:"add",title:"Add a new avatar",class:"q-mt-xs",style:{width:"2.4em",height:"2.4em"}},{default:u(()=>[l(Mt,{modelValue:e.modelCreateDialog,"onUpdate:modelValue":t[7]||(t[7]=o=>e.modelCreateDialog=o)},{default:u(o=>[t[19]||(t[19]=x(" New Avatar ")),l(Se,{modelValue:e.customModel.image,"onUpdate:modelValue":t[4]||(t[4]=f=>e.customModel.image=f),label:"Image URL (optional)",dense:"",color:e.validateModelImage(e.customModel.image)||e.customModel.image.length<1?"primary":"negative"},null,8,["modelValue","color"]),l(Se,{modelValue:e.customModel.url,"onUpdate:modelValue":t[5]||(t[5]=f=>e.customModel.url=f),label:"Model URL",dense:"",color:e.validateModelFile(e.customModel.url)||e.customModel.url.length<1?"primary":"negative"},null,8,["modelValue","color"]),l(Se,{modelValue:e.customModel.name,"onUpdate:modelValue":t[6]||(t[6]=f=>e.customModel.name=f),label:"Name",dense:"",counter:"",color:e.validateModelName(o.value)?"primary":"negative"},null,8,["modelValue","color"]),I("div",Er,[l(X,{onClick:()=>{o.cancel()}},{default:u(()=>t[17]||(t[17]=[x("Cancel")])),_:2},1032,["onClick"]),l(X,{color:"primary",onClick:()=>{o.set(),e.saveCustomAvatar()}},{default:u(()=>t[18]||(t[18]=[x("Ok")])),_:2},1032,["onClick"])])]),_:1},8,["modelValue"])]),_:1}),l(Se,{standout:"",dense:"",rounded:"",class:"avatar-search",style:{"max-width":"40%","margin-left":"auto"},label:"Search",modelValue:e.listFilterValue,"onUpdate:modelValue":t[8]||(t[8]=o=>e.listFilterValue=o),clearable:"",onKeyup:t[9]||(t[9]=o=>e.loadAvatarList()),onChange:t[10]||(t[10]=o=>e.loadAvatarList()),onClear:t[11]||(t[11]=o=>e.loadAvatarList())},null,8,["modelValue"])]),I("div",Lr,[l($t,{class:"col",style:{height:"100%"}},{default:u(()=>[Object.entries(e.avatarList).length>0?(C(),ne(ut,{key:0},{default:u(()=>[(C(!0),U(He,null,pt(e.avatarList,(o,f)=>Ge((C(),ne(Te,{key:f,active:f===e.userStore.avatar.activeModel,class:"q-mb-sm",clickable:"",onClick:b=>e.selectAvatar(f)},{default:u(()=>[l(W,{avatar:""},{default:u(()=>[o.avatar.image?(C(),ne(ko,{key:0,src:o.avatar.image,draggable:!1,ratio:"1",style:{"border-radius":"7px"}},null,8,["src"])):(C(),ne(Le,{key:1,name:"mood",size:"lg"}))]),_:2},1024),l(ql,{name:"slide-left"},{default:u(()=>[o.showMoreOptions?(C(),ne(W,{key:"back",style:{top:"8px !important","flex-flow":"row nowrap","justify-content":"flex-start",height:"60%","margin-top":"3px"}},{default:u(()=>[f!==e.fallbackModelId?(C(),U(He,{key:0},[l(X,{flat:"",round:"",dense:"",ripple:"",icon:"edit","text-color":e.$q.dark.isActive?"white":"dark",title:"Rename",onClick:t[12]||(t[12]=ye(()=>{},["stop"]))},{default:u(()=>[l(Mt,{"model-value":o.avatar.name,"onUpdate:modelValue":b=>{e.AvatarStoreInterface.setModelData(f,"name",b)},"auto-save":"",validate:e.validateModelName,buttons:""},{default:u(b=>[l(Se,{modelValue:b.value,"onUpdate:modelValue":S=>b.value=S,dense:"",autofocus:"",counter:"",label:"Avatar Name",color:e.validateModelName(b.value)?"primary":"negative",onKeyup:jt(b.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue","validate"])]),_:2},1032,["text-color"]),l(X,{flat:"",round:"",dense:"",ripple:"",icon:"image","text-color":e.$q.dark.isActive?"white":"dark",title:"Change avatar image",onClick:t[13]||(t[13]=ye(()=>{},["stop"]))},{default:u(()=>[l(Mt,{"model-value":o.avatar.image,"onUpdate:modelValue":b=>{e.AvatarStoreInterface.setModelData(f,"image",b)},"auto-save":"",validate:e.validateModelImage,buttons:""},{default:u(b=>[l(Se,{modelValue:b.value,"onUpdate:modelValue":S=>b.value=S,dense:"",autofocus:"",counter:"",label:"Image URL",color:e.validateModelImage(b.value)?"primary":"negative",onKeyup:jt(b.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue","validate"])]),_:2},1032,["text-color"]),l(X,{flat:"",round:"",dense:"",ripple:"",icon:"link","text-color":e.$q.dark.isActive?"white":"dark",title:"Change avatar file",onClick:t[14]||(t[14]=ye(()=>{},["stop"]))},{default:u(()=>[l(Mt,{"model-value":o.avatar.file,"onUpdate:modelValue":b=>{e.AvatarStoreInterface.setModelData(f,"file",b)},"auto-save":"",validate:e.validateModelFile,buttons:""},{default:u(b=>[l(Se,{modelValue:b.value,"onUpdate:modelValue":S=>b.value=S,dense:"",autofocus:"",counter:"",label:"Model URL",color:e.validateModelFile(b.value)?"primary":"negative",onKeyup:jt(b.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","color","onKeyup"])]),_:2},1032,["model-value","onUpdate:modelValue","validate"])]),_:2},1032,["text-color"]),l(X,{flat:"",round:"",dense:"",ripple:"",icon:"delete","text-color":"red",title:"Remove avatar",onClick:ye(b=>{e.AvatarStoreInterface.removeModel(f),e.loadAvatarList()},["stop"])},null,8,["onClick"])],64)):xe("",!0)]),_:2},1024)):(C(),ne(W,{key:"front"},{default:u(()=>[x(re(o.avatar.name),1)]),_:2},1024))]),_:2},1024),l(W,{style:{"flex-flow":"row nowrap",flex:"none",height:"100%","margin-top":"3px"}},{default:u(()=>[f!==e.fallbackModelId?(C(),ne(X,{key:0,flat:"",round:"",dense:"",ripple:"",icon:"more_horiz","text-color":e.$q.dark.isActive?"white":"dark",title:"More options",onClick:ye(b=>o.showMoreOptions=!o.showMoreOptions,["stop"])},null,8,["text-color","onClick"])):xe("",!0),l(X,{flat:"",round:"",dense:"",ripple:"",icon:o.avatar.starred?"star":"star_outline","text-color":o.avatar.starred?"yellow":e.$q.dark.isActive?"white":"dark",title:"Favorite",onClick:ye(b=>e.AvatarStoreInterface.setModelData(f,"starred",!o.avatar.starred),["stop"])},null,8,["icon","text-color","onClick"])]),_:2},1024)]),_:2},1032,["active","onClick"])),[[yt]])),128))]),_:1})):(C(),U("p",Or,"You have no saved avatars."))]),_:1})]),l(Qt,{inset:"",spaced:""}),I("p",Ir,re(Object.entries(e.userStore.avatar.models).length>0?"Or c":"C")+"reate your own avatar with: ",1),l(Te,{class:"q-pb-lg"},{default:u(()=>[l(W,null,{default:u(()=>[l(X,{color:"cyan-12","text-color":"dark",onClick:t[15]||(t[15]=o=>e.$emit("overlay-action","openOverlay:ReadyPlayerMe"))},{default:u(()=>t[21]||(t[21]=[x("Ready Player Me")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["managerProps"])}var Rr=Je(kr,[["render",qr],["__scopeId","data-v-959bebba"]]);const Pr=je({name:"ReadyPlayerMeOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},data(){return{loading:!1,longLoad:!1,error:!1,frame:{},subdomain:"vircadia"}},methods:{parse(e){try{return JSON.parse(e.data)}catch{return null}},subscribe(e){const t=this.parse(e);if((t==null?void 0:t.source)==="readyplayerme"){if(this.frame.contentWindow&&(t==null?void 0:t.eventName)==="v1.frame.ready"&&this.frame.contentWindow.postMessage(JSON.stringify({target:"readyplayerme",type:"subscribe",eventName:"v1.**"}),"*"),(t==null?void 0:t.eventName)==="v1.avatar.exported"){const a=t.data.url;console.log(`Avatar URL: ${a}`),this.setAvatar(a)}(t==null?void 0:t.eventName)==="v1.user.set"&&console.log(`User with id ${t.data.id} set: ${JSON.stringify(t)}`)}},renderAvatarImage(e){const a={model:Tt.getModelData(e,"file"),scene:"fullbody-portrait-v1-transparent",blendShapes:{Wolf3D_Avatar:{mouthSmile:.5}}},i=new XMLHttpRequest;i.open("POST","https://render.readyplayer.me/render"),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(a)),i.onload=function(){const c=JSON.parse(i.responseText).renders[0];Tt.setModelData(e,"image",c)}},setAvatar(e){const t=ga.getScene();this.loading=!0;const a=window.setTimeout(()=>{this.longLoad=!0},15e3),i=Tt.createNewModel({name:"New Avatar",image:"",file:e,scale:1,starred:!0});this.renderAvatarImage(i),t.loadMyAvatar(e).then(()=>{this.loading=!1,window.clearTimeout(a),this.longLoad=!1,this.closeOverlay()}).catch(n=>{console.warn("Failed to load RPM avatar:",n),this.loading=!1,window.clearTimeout(a),this.longLoad=!1,this.error=!0,window.setTimeout(()=>{this.error=!1},1e3)})},closeOverlay(){this.$emit("overlay-action","close")}},mounted(){this.frame=document.getElementById("rpm_frame"),this.frame.src=`https://${this.subdomain}.readyplayer.me/avatar?frameApi`,window.addEventListener("message",e=>{this.subscribe(e)}),document.addEventListener("message",e=>{this.subscribe(e)})}}),Nr={key:0,class:"absolute-center",style:{display:"flex","flex-flow":"column nowrap","align-items":"center",gap:"10px","text-align":"center"}},Dr={key:0},_r={key:1},Br={key:1,class:"absolute-center bg-negative q-px-md q-py-sm rounded-borders"},zr={id:"rpm_frame",title:"Ready Player Me",name:"ReadyPlayerMe",width:"800",height:"600",allowfullscreen:"false",allowpaymentrequest:"false",allow:"camera *; microphone *; clipboard-write",frameBorder:"0",style:{width:"100%",height:"100%"}};function xr(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"face",title:"Ready Player Me",managerProps:e.propsToPass,defaultHeight:800,defaultWidth:800,defaultLeft:300,defaultTop:10,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[e.loading&&!e.error?(C(),U("div",Nr,[l(Oa,{size:"xl",class:"q-ma-none",style:{"margin-left":"-16px"}}),e.longLoad?(C(),U("p",Dr,"This is taking longer than usual. Hang on...")):(C(),U("p",_r,"Loading avatar..."))])):xe("",!0),e.error?(C(),U("p",Br,"Something went wrong. Please try again.")):xe("",!0),Ge(I("iframe",zr,null,512),[[Kt,!e.loading&&!e.error]])]),_:1})]),_:1},8,["managerProps"])}var Fr=Je(Pr,[["render",xr]]);const Ur=je({name:"MenuOverlay",props:{propsToPass:{type:Object,default:()=>({})},buildMode:{type:String,default:()=>"production"}},components:{OverlayShell:Ct},data:()=>({userMenu:[{icon:"people",label:"People",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"chat",label:"Chat",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"travel_explore",label:"Explore",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"directions_run",label:"Avatar",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"groups",label:"Conference",link:"",isCategory:!1,separator:!0,action:void 0},{icon:"directions_bus",label:"Debug",link:"",isCategory:!1,separator:!0,action:void 0,devonly:!0}]}),computed:{},methods:{}}),Hr={key:0};function Wr(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"menu",title:"Menu",managerProps:e.propsToPass,defaultHeight:325,defaultWidth:200,defaultLeft:10,defaultTop:10,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height non-selectable",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[l($t,{class:"col",style:{height:"100%"}},{default:u(()=>[l(ut,null,{default:u(()=>[(C(!0),U(He,null,pt(e.userMenu,(o,f)=>(C(),U(He,{key:f},[!o.devonly||e.buildMode=="development"?(C(),U("span",Hr,[o.isCategory?(C(),ne(St,{key:0,header:""},{default:u(()=>[x(re(o.label),1)]),_:2},1024)):Ge((C(),ne(Te,{key:1,clickable:"",onClick:b=>o.action?o.action:e.$emit("overlay-action","toggleOverlay:"+(o.link||o.label))},{default:u(()=>[l(W,{avatar:""},{default:u(()=>[l(Le,{name:o.icon},null,8,["name"])]),_:2},1024),l(W,null,{default:u(()=>[x(re(o.label),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[yt]])])):xe("",!0),o.separator?(C(),ne(Qt,{key:"sep"+f})):xe("",!0)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["managerProps"])}var jr=Je(Ur,[["render",Wr],["__scopeId","data-v-6c45dbdc"]]),Kr=We({name:"QField",inheritAttrs:!1,props:{...mo,tag:{type:String,default:"label"}},emits:el,setup(){return tl(al({tagProp:!0}))}});const Gr={xs:8,sm:10,md:14,lg:20,xl:24};var Qr=We({name:"QChip",props:{...Xt,...so,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:t,emit:a}){const{proxy:{$q:i}}=it(),n=Jt(e,i),c=ro(e,Gr),s=m(()=>e.selected===!0||e.icon!==void 0),o=m(()=>e.selected===!0?e.iconSelected||i.iconSet.chip.selected:e.icon),f=m(()=>e.iconRemove||i.iconSet.chip.remove),b=m(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),S=m(()=>{const q=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(q?` text-${q} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(b.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(n.value===!0?" q-chip--dark q-dark":"")}),L=m(()=>{const q=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},ae={...q,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||i.lang.label.remove};return{chip:q,remove:ae}});function g(q){q.keyCode===13&&h(q)}function h(q){e.disable||(a("update:selected",!e.selected),a("click",q))}function $(q){(q.keyCode===void 0||q.keyCode===13)&&(st(q),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function G(){const q=[];b.value===!0&&q.push(v("div",{class:"q-focus-helper"})),s.value===!0&&q.push(v(Le,{class:"q-chip__icon q-chip__icon--left",name:o.value}));const ae=e.label!==void 0?[v("div",{class:"ellipsis"},[e.label])]:void 0;return q.push(v("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},Qo(t.default,ae))),e.iconRight&&q.push(v(Le,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&q.push(v(Le,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:f.value,...L.value.remove,onClick:$,onKeyup:$})),q}return()=>{if(e.modelValue===!1)return;const q={class:S.value,style:c.value};return b.value===!0&&Object.assign(q,L.value.chip,{onClick:h,onKeyup:g}),La("div",q,G(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[yt,e.ripple]])}}});const Vt=1e3,Yr=["start","center","end","start-force","center-force","end-force"],gl=Array.prototype.filter,Xr=window.getComputedStyle(document.body).overflowAnchor===void 0?Rl:function(e,t){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const a=e.children||[];gl.call(a,n=>n.dataset&&n.dataset.qVsAnchor!==void 0).forEach(n=>{delete n.dataset.qVsAnchor});const i=a[t];i&&i.dataset&&(i.dataset.qVsAnchor="")}))};function oa(e,t){return e+t}function Xa(e,t,a,i,n,c,s,o){const f=e===window?document.scrollingElement||document.documentElement:e,b=n===!0?"offsetWidth":"offsetHeight",S={scrollStart:0,scrollViewSize:-s-o,scrollMaxSize:0,offsetStart:-s,offsetEnd:-o};if(n===!0?(e===window?(S.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,S.scrollViewSize+=document.documentElement.clientWidth):(S.scrollStart=f.scrollLeft,S.scrollViewSize+=f.clientWidth),S.scrollMaxSize=f.scrollWidth,c===!0&&(S.scrollStart=(ha===!0?S.scrollMaxSize-S.scrollViewSize:0)-S.scrollStart)):(e===window?(S.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,S.scrollViewSize+=document.documentElement.clientHeight):(S.scrollStart=f.scrollTop,S.scrollViewSize+=f.clientHeight),S.scrollMaxSize=f.scrollHeight),a!==null)for(let L=a.previousElementSibling;L!==null;L=L.previousElementSibling)L.classList.contains("q-virtual-scroll--skip")===!1&&(S.offsetStart+=L[b]);if(i!==null)for(let L=i.nextElementSibling;L!==null;L=L.nextElementSibling)L.classList.contains("q-virtual-scroll--skip")===!1&&(S.offsetEnd+=L[b]);if(t!==e){const L=f.getBoundingClientRect(),g=t.getBoundingClientRect();n===!0?(S.offsetStart+=g.left-L.left,S.offsetEnd-=g.width):(S.offsetStart+=g.top-L.top,S.offsetEnd-=g.height),e!==window&&(S.offsetStart+=S.scrollStart),S.offsetEnd+=S.scrollMaxSize-S.offsetStart}return S}function Bo(e,t,a,i){t==="end"&&(t=(e===window?document.body:e)[a===!0?"scrollWidth":"scrollHeight"]),e===window?a===!0?(i===!0&&(t=(ha===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):a===!0?(i===!0&&(t=(ha===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function fa(e,t,a,i){if(a>=i)return 0;const n=t.length,c=Math.floor(a/Vt),s=Math.floor((i-1)/Vt)+1;let o=e.slice(c,s).reduce(oa,0);return a%Vt!==0&&(o-=t.slice(c*Vt,a).reduce(oa,0)),i%Vt!==0&&i!==n&&(o-=t.slice(i,s*Vt).reduce(oa,0)),o}const Jr={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},zo={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Jr};function Zr({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:a,virtualScrollItemSizeComputed:i}){const n=it(),{props:c,emit:s,proxy:o}=n,{$q:f}=o;let b,S,L,g=[],h;const $=F(0),G=F(0),q=F({}),ae=F(null),oe=F(null),w=F(null),M=F({from:0,to:0}),ee=m(()=>c.tableColspan!==void 0?c.tableColspan:100);i===void 0&&(i=m(()=>c.virtualScrollItemSize));const B=m(()=>i.value+";"+c.virtualScrollHorizontal),me=m(()=>B.value+";"+c.virtualScrollSliceRatioBefore+";"+c.virtualScrollSliceRatioAfter);lt(me,()=>{fe()}),lt(B,Ve);function Ve(){Ye(S,!0)}function Oe(p){Ye(p===void 0?S:p)}function Fe(p,O){const P=t();if(P==null||P.nodeType===8)return;const ge=Xa(P,a(),ae.value,oe.value,c.virtualScrollHorizontal,f.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd);L!==ge.scrollViewSize&&fe(ge.scrollViewSize),z(P,ge,Math.min(e.value-1,Math.max(0,parseInt(p,10)||0)),0,Yr.indexOf(O)!==-1?O:S!==-1&&p>S?"end":"start")}function we(){const p=t();if(p==null||p.nodeType===8)return;const O=Xa(p,a(),ae.value,oe.value,c.virtualScrollHorizontal,f.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd),P=e.value-1,ge=O.scrollMaxSize-O.offsetStart-O.offsetEnd-G.value;if(b===O.scrollStart)return;if(O.scrollMaxSize<=0){z(p,O,0,0);return}L!==O.scrollViewSize&&fe(O.scrollViewSize),Ee(M.value.from);const J=Math.floor(O.scrollMaxSize-Math.max(O.scrollViewSize,O.offsetEnd)-Math.min(h[P],O.scrollViewSize/2));if(J>0&&Math.ceil(O.scrollStart)>=J){z(p,O,P,O.scrollMaxSize-O.offsetEnd-g.reduce(oa,0));return}let K=0,le=O.scrollStart-O.offsetStart,Me=le;if(le<=ge&&le+O.scrollViewSize>=$.value)le-=$.value,K=M.value.from,Me=le;else for(let te=0;le>=g[te]&&K<P;te++)le-=g[te],K+=Vt;for(;le>0&&K<P;)le-=h[K],le>-O.scrollViewSize?(K++,Me=le):Me=h[K]+le;z(p,O,K,Me)}function z(p,O,P,ge,J){const K=typeof J=="string"&&J.indexOf("-force")!==-1,le=K===!0?J.replace("-force",""):J,Me=le!==void 0?le:"start";let te=Math.max(0,P-q.value[Me]),Ie=te+q.value.total;Ie>e.value&&(Ie=e.value,te=Math.max(0,Ie-q.value.total)),b=O.scrollStart;const Ue=te!==M.value.from||Ie!==M.value.to;if(Ue===!1&&le===void 0){Ke(P);return}const{activeElement:y}=document,N=w.value;Ue===!0&&N!==null&&N!==y&&N.contains(y)===!0&&(N.addEventListener("focusout",_e),setTimeout(()=>{N!==null&&N.removeEventListener("focusout",_e)})),Xr(N,P-te);const j=le!==void 0?h.slice(te,P).reduce(oa,0):0;if(Ue===!0){const Z=Ie>=M.value.from&&te<=M.value.to?M.value.to:Ie;M.value={from:te,to:Z},$.value=fa(g,h,0,te),G.value=fa(g,h,Ie,e.value),requestAnimationFrame(()=>{M.value.to!==Ie&&b===O.scrollStart&&(M.value={from:M.value.from,to:Ie},G.value=fa(g,h,Ie,e.value))})}requestAnimationFrame(()=>{if(b!==O.scrollStart)return;Ue===!0&&Ee(te);const Z=h.slice(te,P).reduce(oa,0),ke=Z+O.offsetStart+$.value,Q=ke+h[P];let $e=ke+ge;if(le!==void 0){const Ae=Z-j,Be=O.scrollStart+Ae;$e=K!==!0&&Be<ke&&Q<Be+O.scrollViewSize?Be:le==="end"?Q-O.scrollViewSize:ke-(le==="start"?0:Math.round((O.scrollViewSize-h[P])/2))}b=$e,Bo(p,$e,c.virtualScrollHorizontal,f.lang.rtl),Ke(P)})}function Ee(p){const O=w.value;if(O){const P=gl.call(O.children,te=>te.classList&&te.classList.contains("q-virtual-scroll--skip")===!1),ge=P.length,J=c.virtualScrollHorizontal===!0?te=>te.getBoundingClientRect().width:te=>te.offsetHeight;let K=p,le,Me;for(let te=0;te<ge;){for(le=J(P[te]),te++;te<ge&&P[te].classList.contains("q-virtual-scroll--with-prev")===!0;)le+=J(P[te]),te++;Me=le-h[K],Me!==0&&(h[K]+=Me,g[Math.floor(K/Vt)]+=Me),K++}}}function _e(){w.value!==null&&w.value!==void 0&&w.value.focus()}function Ye(p,O){const P=1*i.value;(O===!0||Array.isArray(h)===!1)&&(h=[]);const ge=h.length;h.length=e.value;for(let K=e.value-1;K>=ge;K--)h[K]=P;const J=Math.floor((e.value-1)/Vt);g=[];for(let K=0;K<=J;K++){let le=0;const Me=Math.min((K+1)*Vt,e.value);for(let te=K*Vt;te<Me;te++)le+=h[te];g.push(le)}S=-1,b=void 0,$.value=fa(g,h,0,M.value.from),G.value=fa(g,h,M.value.to,e.value),p>=0?(Ee(M.value.from),ft(()=>{Fe(p)})):tt()}function fe(p){if(p===void 0&&typeof window<"u"){const le=t();le!=null&&le.nodeType!==8&&(p=Xa(le,a(),ae.value,oe.value,c.virtualScrollHorizontal,f.lang.rtl,c.virtualScrollStickySizeStart,c.virtualScrollStickySizeEnd).scrollViewSize)}L=p;const O=parseFloat(c.virtualScrollSliceRatioBefore)||0,P=parseFloat(c.virtualScrollSliceRatioAfter)||0,ge=1+O+P,J=p===void 0||p<=0?1:Math.ceil(p/i.value),K=Math.max(1,J,Math.ceil((c.virtualScrollSliceSize>0?c.virtualScrollSliceSize:10)/ge));q.value={total:Math.ceil(K*ge),start:Math.ceil(K*O),center:Math.ceil(K*(.5+O)),end:Math.ceil(K*(1+O)),view:J}}function Xe(p,O){const P=c.virtualScrollHorizontal===!0?"width":"height",ge={["--q-virtual-scroll-item-"+P]:i.value+"px"};return[p==="tbody"?v(p,{class:"q-virtual-scroll__padding",key:"before",ref:ae},[v("tr",[v("td",{style:{[P]:`${$.value}px`,...ge},colspan:ee.value})])]):v(p,{class:"q-virtual-scroll__padding",key:"before",ref:ae,style:{[P]:`${$.value}px`,...ge}}),v(p,{class:"q-virtual-scroll__content",key:"content",ref:w,tabindex:-1},O.flat()),p==="tbody"?v(p,{class:"q-virtual-scroll__padding",key:"after",ref:oe},[v("tr",[v("td",{style:{[P]:`${G.value}px`,...ge},colspan:ee.value})])]):v(p,{class:"q-virtual-scroll__padding",key:"after",ref:oe,style:{[P]:`${G.value}px`,...ge}})]}function Ke(p){S!==p&&(c.onVirtualScroll!==void 0&&s("virtualScroll",{index:p,from:M.value.from,to:M.value.to-1,direction:p<S?"decrease":"increase",ref:o}),S=p)}fe();const tt=Pl(we,f.platform.is.ios===!0?120:35);Nl(()=>{fe()});let rt=!1;return no(()=>{rt=!0}),io(()=>{if(rt!==!0)return;const p=t();b!==void 0&&p!==void 0&&p!==null&&p.nodeType!==8?Bo(p,b,c.virtualScrollHorizontal,f.lang.rtl):Fe(S)}),ba(()=>{tt.cancel()}),Object.assign(o,{scrollTo:Fe,reset:Ve,refresh:Oe}),{virtualScrollSliceRange:M,virtualScrollSliceSizeComputed:q,setVirtualScrollSize:fe,onVirtualScrollEvt:tt,localResetVirtualScroll:Ye,padVirtualScroll:Xe,scrollTo:Fe,reset:Ve,refresh:Oe}}const xo=e=>["add","add-unique","toggle"].includes(e),es=".*+?^${}()|[]\\",ts=Object.keys(mo);function Ja(e,t){if(typeof e=="function")return e;const a=e!==void 0?e:t;return i=>i!==null&&typeof i=="object"&&a in i?i[a]:i}var Za=We({name:"QSelect",inheritAttrs:!1,props:{...zo,...Ia,...mo,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:xo},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:zo.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...el,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:t,emit:a}){const{proxy:i}=it(),{$q:n}=i,c=F(!1),s=F(!1),o=F(-1),f=F(""),b=F(!1),S=F(!1);let L=null,g=null,h,$,G,q=null,ae,oe,w,M;const ee=F(null),B=F(null),me=F(null),Ve=F(null),Oe=F(null),Fe=Zl(e),we=sn(ra),z=m(()=>e.options.length),Ee=m(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:_e,virtualScrollSliceSizeComputed:Ye,localResetVirtualScroll:fe,padVirtualScroll:Xe,onVirtualScrollEvt:Ke,scrollTo:tt,setVirtualScrollSize:rt}=Zr({virtualScrollLength:z,getVirtualScrollTarget:qa,getVirtualScrollEl:_t,virtualScrollItemSizeComputed:Ee}),p=al(),O=m(()=>{const r=e.mapOptions===!0&&e.multiple!==!0,T=e.modelValue!==void 0&&(e.modelValue!==null||r===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0){const E=e.mapOptions===!0&&h!==void 0?h:[],H=T.map(se=>k(se,E));return e.modelValue===null&&r===!0?H.filter(se=>se!==null):H}return T}),P=m(()=>{const r={};return ts.forEach(T=>{const E=e[T];E!==void 0&&(r[T]=E)}),r}),ge=m(()=>e.optionsDark===null?p.isDark.value:e.optionsDark),J=m(()=>Ao(O.value)),K=m(()=>{let r="q-field__input q-placeholder col";return e.hideSelected===!0||O.value.length===0?[r,e.inputClass]:(r+=" q-field__input--padding",e.inputClass===void 0?r:[r,e.inputClass])}),le=m(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Me=m(()=>z.value===0),te=m(()=>O.value.map(r=>A.value(r)).join(", ")),Ie=m(()=>e.displayValue!==void 0?e.displayValue:te.value),Ue=m(()=>e.optionsHtml===!0?()=>!0:r=>r!=null&&r.html===!0),y=m(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||O.value.some(Ue.value))),N=m(()=>p.focused.value===!0?e.tabindex:-1),j=m(()=>{const r={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":c.value===!0?"true":"false","aria-controls":`${p.targetUid.value}_lb`};return o.value>=0&&(r["aria-activedescendant"]=`${p.targetUid.value}_${o.value}`),r}),Z=m(()=>({id:`${p.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ke=m(()=>O.value.map((r,T)=>({index:T,opt:r,html:Ue.value(r),selected:!0,removeAtIndex:de,toggleOption:Pe,tabindex:N.value}))),Q=m(()=>{if(z.value===0)return[];const{from:r,to:T}=_e.value;return e.options.slice(r,T).map((E,H)=>{const se=R.value(E)===!0,ce=_(E)===!0,De=r+H,ve={clickable:!0,active:ce,activeClass:Be.value,manualFocus:!0,focused:!1,disable:se,tabindex:-1,dense:e.optionsDense,dark:ge.value,role:"option","aria-selected":ce===!0?"true":"false",id:`${p.targetUid.value}_${De}`,onClick:()=>{Pe(E)}};return se!==!0&&(o.value===De&&(ve.focused=!0),n.platform.is.desktop===!0&&(ve.onMousemove=()=>{c.value===!0&&at(De)})),{index:De,opt:E,html:Ue.value(E),label:A.value(E),selected:ve.active,focused:ve.focused,toggleOption:Pe,setOptionIndex:at,itemProps:ve}})}),$e=m(()=>e.dropdownIcon!==void 0?e.dropdownIcon:n.iconSet.arrow.dropdown),Ae=m(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Be=m(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),qe=m(()=>Ja(e.optionValue,"value")),A=m(()=>Ja(e.optionLabel,"label")),R=m(()=>Ja(e.optionDisable,"disable")),Y=m(()=>O.value.map(qe.value)),he=m(()=>{const r={onInput:ra,onChange:we,onKeydown:ht,onKeyup:Ne,onKeypress:mt,onFocus:ie,onClick(T){$===!0&&vt(T)}};return r.onCompositionstart=r.onCompositionupdate=r.onCompositionend=we,r});lt(O,r=>{h=r,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&p.innerLoading.value!==!0&&(s.value!==!0&&c.value!==!0||J.value!==!0)&&(G!==!0&&Pt(),(s.value===!0||c.value===!0)&&qt(""))},{immediate:!0}),lt(()=>e.fillInput,Pt),lt(c,ea),lt(z,Aa);function be(r){return e.emitValue===!0?qe.value(r):r}function ue(r){if(r!==-1&&r<O.value.length)if(e.multiple===!0){const T=e.modelValue.slice();a("remove",{index:r,value:T.splice(r,1)[0]}),a("update:modelValue",T)}else a("update:modelValue",null)}function de(r){ue(r),p.focus()}function Re(r,T){const E=be(r);if(e.multiple!==!0){e.fillInput===!0&&zt(A.value(r),!0,!0),a("update:modelValue",E);return}if(O.value.length===0){a("add",{index:0,value:E}),a("update:modelValue",e.multiple===!0?[E]:E);return}if(T===!0&&_(r)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const H=e.modelValue.slice();a("add",{index:H.length,value:E}),H.push(E),a("update:modelValue",H)}function Pe(r,T){if(p.editable.value!==!0||r===void 0||R.value(r)===!0)return;const E=qe.value(r);if(e.multiple!==!0){T!==!0&&(zt(e.fillInput===!0?A.value(r):"",!0,!0),Et()),B.value!==null&&B.value.focus(),(O.value.length===0||Wt(qe.value(O.value[0]),E)!==!0)&&a("update:modelValue",e.emitValue===!0?E:r);return}if(($!==!0||b.value===!0)&&p.focus(),ie(),O.value.length===0){const ce=e.emitValue===!0?E:r;a("add",{index:0,value:ce}),a("update:modelValue",e.multiple===!0?[ce]:ce);return}const H=e.modelValue.slice(),se=Y.value.findIndex(ce=>Wt(ce,E));if(se!==-1)a("remove",{index:se,value:H.splice(se,1)[0]});else{if(e.maxValues!==void 0&&H.length>=e.maxValues)return;const ce=e.emitValue===!0?E:r;a("add",{index:H.length,value:ce}),H.push(ce)}a("update:modelValue",H)}function at(r){if(n.platform.is.desktop!==!0)return;const T=r!==-1&&r<z.value?r:-1;o.value!==T&&(o.value=T)}function ct(r=1,T){if(c.value===!0){let E=o.value;do E=Co(E+r,-1,z.value-1);while(E!==-1&&E!==o.value&&R.value(e.options[E])===!0);o.value!==E&&(at(E),tt(E),T!==!0&&e.useInput===!0&&e.fillInput===!0&&Bt(E>=0?A.value(e.options[E]):ae,!0))}}function k(r,T){const E=H=>Wt(qe.value(H),r);return e.options.find(E)||T.find(E)||r}function _(r){const T=qe.value(r);return Y.value.find(E=>Wt(E,T))!==void 0}function ie(r){e.useInput===!0&&B.value!==null&&(r===void 0||B.value===r.target&&r.target.value===te.value)&&B.value.select()}function Ce(r){Uo(r,27)===!0&&c.value===!0&&(vt(r),Et(),Pt()),a("keyup",r)}function Ne(r){const{value:T}=r.target;if(r.keyCode!==void 0){Ce(r);return}if(r.target.value="",L!==null&&(clearTimeout(L),L=null),g!==null&&(clearTimeout(g),g=null),Pt(),typeof T=="string"&&T.length!==0){const E=T.toLocaleLowerCase(),H=ce=>{const De=e.options.find(ve=>ce.value(ve).toLocaleLowerCase()===E);return De===void 0?!1:(O.value.indexOf(De)===-1?Pe(De):Et(),!0)},se=ce=>{H(qe)!==!0&&(H(A)===!0||ce===!0||qt(T,!0,()=>se(!0)))};se()}else p.clearValue(r)}function mt(r){a("keypress",r)}function ht(r){if(a("keydown",r),Ho(r)===!0)return;const T=f.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),E=r.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(o.value!==-1||T===!0);if(r.keyCode===27){Fa(r);return}if(r.keyCode===9&&E===!1){Rt();return}if(r.target===void 0||r.target.id!==p.targetUid.value||p.editable.value!==!0)return;if(r.keyCode===40&&p.innerLoading.value!==!0&&c.value===!1){st(r),Ze();return}if(r.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&f.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ue(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(r.keyCode===35||r.keyCode===36)&&(typeof f.value!="string"||f.value.length===0)&&(st(r),o.value=-1,ct(r.keyCode===36?1:-1,e.multiple)),(r.keyCode===33||r.keyCode===34)&&Ye.value!==void 0&&(st(r),o.value=Math.max(-1,Math.min(z.value,o.value+(r.keyCode===33?-1:1)*Ye.value.view)),ct(r.keyCode===33?1:-1,e.multiple)),(r.keyCode===38||r.keyCode===40)&&(st(r),ct(r.keyCode===38?-1:1,e.multiple));const H=z.value;if((w===void 0||M<Date.now())&&(w=""),H>0&&e.useInput!==!0&&r.key!==void 0&&r.key.length===1&&r.altKey===!1&&r.ctrlKey===!1&&r.metaKey===!1&&(r.keyCode!==32||w.length!==0)){c.value!==!0&&Ze(r);const se=r.key.toLocaleLowerCase(),ce=w.length===1&&w[0]===se;M=Date.now()+1500,ce===!1&&(st(r),w+=se);const De=new RegExp("^"+w.split("").map(ta=>es.indexOf(ta)!==-1?"\\"+ta:ta).join(".*"),"i");let ve=o.value;if(ce===!0||ve<0||De.test(A.value(e.options[ve]))!==!0)do ve=Co(ve+1,-1,H-1);while(ve!==o.value&&(R.value(e.options[ve])===!0||De.test(A.value(e.options[ve]))!==!0));o.value!==ve&&ft(()=>{at(ve),tt(ve),ve>=0&&e.useInput===!0&&e.fillInput===!0&&Bt(A.value(e.options[ve]),!0)});return}if(!(r.keyCode!==13&&(r.keyCode!==32||e.useInput===!0||w!=="")&&(r.keyCode!==9||E===!1))){if(r.keyCode!==9&&st(r),o.value!==-1&&o.value<H){Pe(e.options[o.value]);return}if(T===!0){const se=(ce,De)=>{if(De){if(xo(De)!==!0)return}else De=e.newValueMode;if(zt("",e.multiple!==!0,!0),ce==null)return;(De==="toggle"?Pe:Re)(ce,De==="add-unique"),e.multiple!==!0&&(B.value!==null&&B.value.focus(),Et())};if(e.onNewValue!==void 0?a("newValue",f.value,se):se(f.value),e.multiple!==!0)return}c.value===!0?Rt():p.innerLoading.value!==!0&&Ze()}}function _t(){return $===!0?Oe.value:me.value!==null&&me.value.contentEl!==null?me.value.contentEl:void 0}function qa(){return _t()}function ze(){return e.hideSelected===!0?[]:t["selected-item"]!==void 0?ke.value.map(r=>t["selected-item"](r)).slice():t.selected!==void 0?[].concat(t.selected()):e.useChips===!0?ke.value.map((r,T)=>v(Qr,{key:"option-"+T,removable:p.editable.value===!0&&R.value(r.opt)!==!0,dense:!0,textColor:e.color,tabindex:N.value,onRemove(){r.removeAtIndex(T)}},()=>v("span",{class:"ellipsis",[r.html===!0?"innerHTML":"textContent"]:A.value(r.opt)}))):[v("span",{[y.value===!0?"innerHTML":"textContent"]:Ie.value})]}function It(){if(Me.value===!0)return t["no-option"]!==void 0?t["no-option"]({inputValue:f.value}):void 0;const r=t.option!==void 0?t.option:E=>v(Te,{key:E.index,...E.itemProps},()=>v(W,()=>v(St,()=>v("span",{[E.html===!0?"innerHTML":"textContent"]:E.label}))));let T=Xe("div",Q.value.map(r));return t["before-options"]!==void 0&&(T=t["before-options"]().concat(T)),lo(t["after-options"],T)}function Ra(r,T){const E=T===!0?{...j.value,...p.splitAttrs.attributes.value}:void 0,H={ref:T===!0?B:void 0,key:"i_t",class:K.value,style:e.inputStyle,value:f.value!==void 0?f.value:"",type:"search",...E,id:T===!0?p.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":r===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...he.value};return r!==!0&&$===!0&&(Array.isArray(H.class)===!0?H.class=[...H.class,"no-pointer-events"]:H.class+=" no-pointer-events"),v("input",H)}function ra(r){L!==null&&(clearTimeout(L),L=null),g!==null&&(clearTimeout(g),g=null),!(r&&r.target&&r.target.qComposing===!0)&&(Bt(r.target.value||""),G=!0,ae=f.value,p.focused.value!==!0&&($!==!0||b.value===!0)&&p.focus(),e.onFilter!==void 0&&(L=setTimeout(()=>{L=null,qt(f.value)},e.inputDebounce)))}function Bt(r,T){f.value!==r&&(f.value=r,T===!0||e.inputDebounce===0||e.inputDebounce==="0"?a("inputValue",r):g=setTimeout(()=>{g=null,a("inputValue",r)},e.inputDebounce))}function zt(r,T,E){G=E!==!0,e.useInput===!0&&(Bt(r,!0),(T===!0||E!==!0)&&(ae=r),T!==!0&&qt(r))}function qt(r,T,E){if(e.onFilter===void 0||T!==!0&&p.focused.value!==!0)return;p.innerLoading.value===!0?a("filterAbort"):(p.innerLoading.value=!0,S.value=!0),r!==""&&e.multiple!==!0&&O.value.length!==0&&G!==!0&&r===A.value(O.value[0])&&(r="");const H=setTimeout(()=>{c.value===!0&&(c.value=!1)},10);q!==null&&clearTimeout(q),q=H,a("filter",r,(se,ce)=>{(T===!0||p.focused.value===!0)&&q===H&&(clearTimeout(q),typeof se=="function"&&se(),S.value=!1,ft(()=>{p.innerLoading.value=!1,p.editable.value===!0&&(T===!0?c.value===!0&&Et():c.value===!0?ea(!0):c.value=!0),typeof ce=="function"&&ft(()=>{ce(i)}),typeof E=="function"&&ft(()=>{E(i)})}))},()=>{p.focused.value===!0&&q===H&&(clearTimeout(q),p.innerLoading.value=!1,S.value=!1),c.value===!0&&(c.value=!1)})}function Pa(){return v(ol,{ref:me,class:le.value,style:e.popupContentStyle,modelValue:c.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Me.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:ge.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Ae.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Z.value,onScrollPassive:Ke,onBeforeShow:D,onBeforeHide:ya,onShow:Sa},It)}function ya(r){d(r),Rt()}function Sa(){rt()}function Na(r){vt(r),B.value!==null&&B.value.focus(),b.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function bt(r){vt(r),ft(()=>{b.value=!1})}function Zt(){const r=[v(Kr,{class:`col-auto ${p.fieldClass.value}`,...P.value,for:p.targetUid.value,dark:ge.value,square:!0,loading:S.value,itemAligned:!1,filled:!0,stackLabel:f.value.length!==0,...p.splitAttrs.listeners.value,onFocus:Na,onBlur:bt},{...t,rawControl:()=>p.getControl(!0),before:void 0,after:void 0})];return c.value===!0&&r.push(v("div",{ref:Oe,class:le.value+" scroll",style:e.popupContentStyle,...Z.value,onClick:Fa,onScrollPassive:Ke},It())),v(dn,{ref:Ve,modelValue:s.value,position:e.useInput===!0?"top":void 0,transitionShow:oe,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:D,onBeforeHide:wa,onHide:ka,onShow:Ca},()=>v("div",{class:"q-select__dialog"+(ge.value===!0?" q-select__dialog--dark q-dark":"")+(b.value===!0?" q-select__dialog--focused":"")},r))}function wa(r){d(r),Ve.value!==null&&Ve.value.__updateRefocusTarget(p.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),p.focused.value=!1}function ka(r){Et(),p.focused.value===!1&&a("blur",r),Pt()}function Ca(){const r=document.activeElement;(r===null||r.id!==p.targetUid.value)&&B.value!==null&&B.value!==r&&B.value.focus(),rt()}function Rt(){s.value!==!0&&(o.value=-1,c.value===!0&&(c.value=!1),p.focused.value===!1&&(q!==null&&(clearTimeout(q),q=null),p.innerLoading.value===!0&&(a("filterAbort"),p.innerLoading.value=!1,S.value=!1)))}function Ze(r){p.editable.value===!0&&($===!0?(p.onControlFocusin(r),s.value=!0,ft(()=>{p.focus()})):p.focus(),e.onFilter!==void 0?qt(f.value):(Me.value!==!0||t["no-option"]!==void 0)&&(c.value=!0))}function Et(){s.value=!1,Rt()}function Pt(){e.useInput===!0&&zt(e.multiple!==!0&&e.fillInput===!0&&O.value.length!==0&&A.value(O.value[0])||"",!0,!0)}function ea(r){let T=-1;if(r===!0){if(O.value.length!==0){const E=qe.value(O.value[0]);T=e.options.findIndex(H=>Wt(qe.value(H),E))}fe(T)}at(T)}function Aa(r,T){c.value===!0&&p.innerLoading.value===!1&&(fe(-1,!0),ft(()=>{c.value===!0&&p.innerLoading.value===!1&&(r>T?fe():ea(!0))}))}function Ta(){s.value===!1&&me.value!==null&&me.value.updatePosition()}function D(r){r!==void 0&&vt(r),a("popupShow",r),p.hasPopupOpen=!0,p.onControlFocusin(r)}function d(r){r!==void 0&&vt(r),a("popupHide",r),p.hasPopupOpen=!1,p.onControlFocusout(r)}function V(){$=n.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?t["no-option"]!==void 0||e.onFilter!==void 0||Me.value===!1:!0),oe=n.platform.is.ios===!0&&$===!0&&e.useInput===!0?"fade":e.transitionShow}return Dl(V),_l(Ta),V(),ba(()=>{L!==null&&clearTimeout(L),g!==null&&clearTimeout(g)}),Object.assign(i,{showPopup:Ze,hidePopup:Et,removeAtIndex:ue,add:Re,toggleOption:Pe,getOptionIndex:()=>o.value,setOptionIndex:at,moveOptionSelection:ct,filter:qt,updateMenuPosition:Ta,updateInputValue:zt,isOptionSelected:_,getEmittingOptionValue:be,isOptionDisabled:(...r)=>R.value.apply(null,r)===!0,getOptionValue:(...r)=>qe.value.apply(null,r),getOptionLabel:(...r)=>A.value.apply(null,r)}),Object.assign(p,{innerValue:O,fieldClass:m(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:ee,targetRef:B,hasValue:J,showPopup:Ze,floatingLabel:m(()=>e.hideSelected!==!0&&J.value===!0||typeof f.value=="number"||f.value.length!==0||Ao(e.displayValue)),getControlChild:()=>{if(p.editable.value!==!1&&(s.value===!0||Me.value!==!0||t["no-option"]!==void 0))return $===!0?Zt():Pa();p.hasPopupOpen===!0&&(p.hasPopupOpen=!1)},controlEvents:{onFocusin(r){p.onControlFocusin(r)},onFocusout(r){p.onControlFocusout(r,()=>{Pt(),Rt()})},onClick(r){if(Fa(r),$!==!0&&c.value===!0){Rt(),B.value!==null&&B.value.focus();return}Ze(r)}},getControl:r=>{const T=ze(),E=r===!0||s.value!==!0||$!==!0;if(e.useInput===!0)T.push(Ra(r,E));else if(p.editable.value===!0){const se=E===!0?j.value:void 0;T.push(v("input",{ref:E===!0?B:void 0,key:"d_t",class:"q-select__focus-target",id:E===!0?p.targetUid.value:void 0,value:Ie.value,readonly:!0,"data-autofocus":r===!0||e.autofocus===!0||void 0,...se,onKeydown:ht,onKeyup:Ce,onKeypress:mt})),E===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&T.push(v("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Ne}))}if(Fe.value!==void 0&&e.disable!==!0&&Y.value.length!==0){const se=Y.value.map(ce=>v("option",{value:ce,selected:!0}));T.push(v("select",{class:"hidden",name:Fe.value,multiple:e.multiple},se))}const H=e.useInput===!0||E!==!0?void 0:p.splitAttrs.attributes.value;return v("div",{class:"q-field__native row items-center",...H,...p.splitAttrs.listeners.value},T)},getInnerAppend:()=>e.loading!==!0&&S.value!==!0&&e.hideDropdownIcon!==!0?[v(Le,{class:"q-select__dropdown-icon"+(c.value===!0?" rotate-180":""),name:$e.value})]:null}),tl(p)}});const as=je({name:"DebugOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{applicationStore:Ot,userStore:na}},data(){return{messageInput:"",tab:null,subscribed:!1,theme:{defaultMode:{options:["light","dark"]},globalStyle:{options:["none","aero","mica"]},headerStyle:{options:["none","gradient-left","gradient-right"]},windowStyle:{options:["none","gradient-top","gradient-right","gradient-bottom","gradient-left"]}}}},methods:{getProfilePicture(e){return e==="testerino"?"https://cdn.quasar.dev/img/avatar4.jpg":null},msgSender(e){return e.messageJSON?e.messageJSON.displayName:e.senderId.stringify()},msgText(e){return e.messageJSON?e.messageJSON.message:e.message}}}),os={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"},ls={class:"col"},ns={class:"row",style:{display:"flex",gap:"20px"}},is={class:"col"},rs={class:"col"},ss={class:"col"};function us(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"directions_bus",title:"Debug",managerProps:e.propsToPass,defaultHeight:500,defaultWidth:600,defaultLeft:40,defaultTop:400,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tab=o),dense:""},{default:u(()=>[l(Qe,{name:"Domains",icon:"travel_explore",label:"Domains"}),l(Qe,{name:"Messages",icon:"chat",label:"Messages"}),l(Qe,{name:"Avatars",icon:"people",label:"Avatars"}),l(Qe,{name:"Theme",icon:"palette",label:"Theme"})]),_:1},8,["modelValue"]),l(ia,{style:{height:"calc(100% - 56px)","background-color":"transparent"},modelValue:e.tab,"onUpdate:modelValue":t[11]||(t[11]=o=>e.tab=o),animated:""},{default:u(()=>[l(et,{name:"Domains"}),l(et,{name:"Messages"},{default:u(()=>[e.applicationStore.messages.messages.length>0?(C(),ne(ut,{key:0},{default:u(()=>[(C(!0),U(He,null,pt(e.applicationStore.messages.messages,o=>(C(),U("div",{key:o.id},re(e.msgSender(o))+" : "+re(e.msgText(o)),1))),128))]),_:1})):(C(),U("p",os,"There are no messages to show."))]),_:1}),l(et,{name:"Avatars"},{default:u(()=>[I("div",null,"DisplayName: "+re(e.userStore.avatar.displayName),1),I("div",null,"Location: "+re(e.userStore.avatar.location),1),t[12]||(t[12]=I("div",null,null,-1)),I("div",null,"Avatars: "+re(e.applicationStore.avatars.count),1),(C(!0),U(He,null,pt(e.applicationStore.avatars.avatarsInfo.values(),o=>(C(),ne(ut,{key:o.sessionId.stringify()},{default:u(()=>[I("div",null,re(o),1)]),_:2},1024))),128))]),_:1}),l(et,{name:"Theme"},{default:u(()=>[l($t,{class:"col",style:{height:"100%"}},{default:u(()=>[l(Te,null,{default:u(()=>[l(Se,{name:"brandName",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.brandName,"onUpdate:modelValue":t[1]||(t[1]=o=>e.applicationStore.theme.brandName=o)},null,8,["modelValue"])]),_:1}),l(Te,null,{default:u(()=>[l(Se,{name:"productName",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.productName,"onUpdate:modelValue":t[2]||(t[2]=o=>e.applicationStore.theme.productName=o)},null,8,["modelValue"])]),_:1}),l(Te,null,{default:u(()=>[l(Se,{name:"tagline",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.tagline,"onUpdate:modelValue":t[3]||(t[3]=o=>e.applicationStore.theme.tagline=o)},null,8,["modelValue"])]),_:1}),l(Te,null,{default:u(()=>[l(Se,{name:"globalServiceTerm",dense:"",style:{width:"100%"},modelValue:e.applicationStore.theme.globalServiceTerm,"onUpdate:modelValue":t[4]||(t[4]=o=>e.applicationStore.theme.globalServiceTerm=o)},null,8,["modelValue"])]),_:1}),l(Te,null,{default:u(()=>[I("div",ls,[t[16]||(t[16]=x(" Colors: ")),I("div",ns,[I("div",is,[t[13]||(t[13]=x(" Primary: ")),l(pa,{name:"primary",modelValue:e.applicationStore.theme.colors.primary,"onUpdate:modelValue":t[5]||(t[5]=o=>e.applicationStore.theme.colors.primary=o)},null,8,["modelValue"])]),I("div",rs,[t[14]||(t[14]=x(" Secondary: ")),l(pa,{name:"secondary",modelValue:e.applicationStore.theme.colors.secondary,"onUpdate:modelValue":t[6]||(t[6]=o=>e.applicationStore.theme.colors.secondary=o)},null,8,["modelValue"])]),I("div",ss,[t[15]||(t[15]=x(" Accent: ")),l(pa,{name:"accent",modelValue:e.applicationStore.theme.colors.accent,"onUpdate:modelValue":t[7]||(t[7]=o=>e.applicationStore.theme.colors.accent=o)},null,8,["modelValue"])])])])]),_:1}),l(Te,null,{default:u(()=>[l(Za,{name:"globalStyle",label:"globalStyle",dense:"","options-dense":"",style:{width:"100%"},options:e.theme.globalStyle.options,modelValue:e.applicationStore.theme.globalStyle,"onUpdate:modelValue":t[8]||(t[8]=o=>e.applicationStore.theme.globalStyle=o)},null,8,["options","modelValue"])]),_:1}),l(Te,null,{default:u(()=>[l(Za,{name:"headerStyle",label:"headerStyle",dense:"","options-dense":"",style:{width:"100%"},options:e.theme.headerStyle.options,modelValue:e.applicationStore.theme.headerStyle,"onUpdate:modelValue":t[9]||(t[9]=o=>e.applicationStore.theme.headerStyle=o)},null,8,["options","modelValue"])]),_:1}),l(Te,null,{default:u(()=>[l(Za,{name:"windowStyle",label:"windowStyle",dense:"","options-dense":"",style:{width:"100%"},options:e.theme.windowStyle.options,modelValue:e.applicationStore.theme.windowStyle,"onUpdate:modelValue":t[10]||(t[10]=o=>e.applicationStore.theme.windowStyle=o)},null,8,["options","modelValue"])]),_:1}),l(Te)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["managerProps"])}var ds=Je(as,[["render",us]]);const cs='<g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="0s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" dur="1.8s" values="1; 20" calcMode="spline" keyTimes="0; 1" keySplines="0.165, 0.84, 0.44, 1" repeatCount="indefinite"></animate><animate attributeName="stroke-opacity" begin="-0.9s" dur="1.8s" values="1; 0" calcMode="spline" keyTimes="0; 1" keySplines="0.3, 0.61, 0.355, 1" repeatCount="indefinite"></animate></circle></g>';var ms=We({name:"QSpinnerPuff",props:jo,setup(e){const{cSize:t,classes:a}=Ko(e);return()=>v("svg",{class:a.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",innerHTML:cs})}});const fs=je({name:"ConferenceOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},setup(){return{applicationStore:Ot}},data(){return{isAdmin:!0}},computed:{},methods:{joinConferenceRoom(e){this.applicationStore.joinConferenceRoom(e),this.$emit("overlay-action","openOverlay:Jitsi")}}}),vs={style:{position:"relative",display:"flex","justify-content":"center","align-items":"center"}},ps={key:1,class:"text-subtitle1 text-grey text-center q-mt-md"};function gs(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"groups",title:"Conference",managerProps:e.propsToPass,defaultHeight:300,defaultWidth:400,defaultLeft:300,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[l(kt,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[l($t,{class:"col",style:{height:"100%"}},{default:u(()=>[Array.from(e.applicationStore.conference.activeRooms.keys()).length>0?(C(),ne(ut,{key:0},{default:u(()=>[(C(!0),U(He,null,pt(e.applicationStore.conference.activeRooms,o=>Ge((C(),ne(Te,{key:o.name,class:"q-mb-sm",clickable:""},{default:u(()=>[l(W,{avatar:"",style:{"min-width":"20px"},title:"Meeting is in progress"},{default:u(()=>[I("div",vs,[l(ms,{size:"md",color:"red",class:"absolute"}),l(Le,{name:"fiber_manual_record",size:"xs",color:"red"})])]),_:1}),l(W,null,{default:u(()=>[l(St,null,{default:u(()=>[x(re(o.name),1)]),_:2},1024),l(Zo,{"text-color":e.$q.dark.isActive?"white":"black",class:Ut(["q-mt-xs",e.$q.dark.isActive?"bg-dark":"bg-white"]),style:{width:"fit-content"},title:"There are 0 people in this meeting."},{default:u(()=>[t[0]||(t[0]=x(" 0 ")),l(Le,{name:"people",size:"14px",class:"q-ml-xs"})]),_:1},8,["text-color","class"])]),_:2},1024),l(W,{side:""},{default:u(()=>[l(X,{color:"cyan-12","text-color":"dark",onClick:f=>e.joinConferenceRoom(o)},{default:u(()=>t[1]||(t[1]=[x("Join")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)),[[yt]])),128))]),_:1})):(C(),U("p",ps,"There are no meetings in this domain."))]),_:1})]),_:1})]),_:1},8,["managerProps"])}var hs=Je(fs,[["render",gs],["__scopeId","data-v-6fca9823"]]);const bs=je({name:"JitsiOverlay",props:{propsToPass:{type:Object,default:()=>({})}},components:{OverlayShell:Ct},data(){return{room:void 0,jitsiElement:void 0}},methods:{getWebEntityController(){const e=Bl.getGameObjectByID(this.room.entity.id),t=e==null?void 0:e.getComponent(yo.typeName);return t instanceof yo?t:void 0}},mounted(){this.room=Ot.conference.currentRoom;const e=this.getWebEntityController();e&&e.externalElement&&(this.jitsiElement=e.externalElement,e.externalElement=null,this.$refs.JitsiContainer.appendChild(this.jitsiElement))},beforeUnmount(){if(this.room&&this.jitsiElement){const e=this.getWebEntityController();e?e.externalElement=this.jitsiElement:(this.jitsiElement.remove(),this.jitsiElement=void 0)}}}),ys={class:"absolute-center"},Ss={style:{width:"100%",height:"100%"},ref:"JitsiContainer"};function ws(e,t,a,i,n,c){const s=dt("OverlayShell");return C(),ne(s,{icon:"groups",title:e.propsToPass.name,managerProps:e.propsToPass,defaultHeight:600,defaultWidth:800,defaultLeft:300,hoverShowBar:!1,style:{"box-shadow":"0 1px 5px rgb(0 0 0 / 20%), 0 2px 2px rgb(0 0 0 / 14%), 0 3px 1px -2px rgb(0 0 0 / 12%)",border:"none"}},{default:u(()=>[I("div",ys,[l(Oa,{size:"xl"})]),l(kt,{class:"column no-wrap items-stretch full-height",style:{background:"transparent","box-shadow":"none"}},{default:u(()=>[(C(),ne(zl,null,[I("div",Ss,null,512)],1024))]),_:1})]),_:1},8,["title","managerProps"])}var ks=Je(bs,[["render",ws],["__scopeId","data-v-7df4379f"]]);const hl="meet.jit.si",Cs="stage.8x8.vc",As="8x8.vc",Ts=(e,t)=>t?`${t}/${e}`:e,Ms=e=>e?Cs:As;let Vs=0;const $s=e=>`${e}-${Vs++}`,Es=async e=>new Promise((t,a)=>{if(window.JitsiMeetExternalAPI)return t(window.JitsiMeetExternalAPI);const i=document.createElement("script");i.async=!0,i.src=`https://${e}/external_api.js`,i.onload=()=>t(window.JitsiMeetExternalAPI),i.onerror=()=>a(new Error(`Script load error: ${i.src}`)),document.head.appendChild(i)});let $a;const Ls=function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hl;return $a||($a=Es(e),$a)},Os=["id"];var bl=je({__name:"jitsi-meeting",props:{domain:{default:hl},roomName:null,width:{default:600},height:{default:400},configOverwrite:null,interfaceConfigOverwrite:null,jwt:null,invitees:null,devices:null,userInfo:null,lang:{default:"en"}},emits:["onApiReady","onReadyToClose","getIframeRefOnApiReady"],setup(e,t){let{emit:a}=t;const i=e,{domain:n,roomName:c,width:s,height:o,configOverwrite:f,interfaceConfigOverwrite:b,jwt:S,invitees:L,devices:g,userInfo:h,lang:$}=i,G=F(""),q=F(!1),ae=F(!1),oe=F(),w=F(),M=F(null);oo(()=>{G.value=$s("jitsiMeeting"),Ls(n).then(async B=>{oe.value=B,ae.value=!0,await ft(),ee(oe.value)}).catch(B=>console.error(B.message))});const ee=B=>{w.value=new B(n,{roomName:c,width:s,height:o,configOverwrite:f,interfaceConfigOverwrite:b,jwt:S,invitees:L,devices:g,userInfo:h,parentNode:M.value,lang:$}),q.value=!1,w.value&&(a("onApiReady",w.value),w.value.on("readyToClose",()=>{a("onReadyToClose")}),M.value&&a("getIframeRefOnApiReady",M.value))};return(B,me)=>(C(),U(He,null,[q.value||!w.value?Go(B.$slots,"spinner",{key:0}):xe("",!0),(C(),U("div",{id:G.value,key:G.value,ref_key:"meetingRef",ref:M},null,8,Os))],64))}}),Is=je({__name:"jaas-meeting",props:{appId:null,useStaging:{type:Boolean,default:!0}},setup(e){const t=e,{appId:a,useStaging:i,roomName:n}=t,c=F(Ms(i)),s=F(Ts(n,a));return(o,f)=>(C(),ne(Fl(bl),xl({...o.$props,...o.$attrs},{domain:c.value,"room-name":s.value}),null,16,["domain","room-name"]))}}),qs=Object.freeze({__proto__:null,JitsiMeeting:bl,JaaSMeeting:Is});const Rs=function(t){Object.entries(qs).forEach(a=>{let[i,n]=a;t.component(i,n)})},Ps=je({name:"LoginDialog",emits:["close"],setup(){return{applicationStore:Ot,tab:F("metaverseLogin")}}}),Ns={class:"title"};function Ds(e,t,a,i,n,c){const s=dt("MetaverseLogin"),o=dt("MetaverseRegister");return C(),U(He,null,[l(nl,{class:"bar"},{default:u(()=>[I("div",Ns,re(e.applicationStore.theme.globalServiceTerm)+" Login",1),l(un),l(X,{dense:"",flat:"",icon:"close",onClick:t[0]||(t[0]=f=>e.$emit("close"))})]),_:1}),l(fo,{class:"q-pt-none"},{default:u(()=>[l(Yt,{modelValue:e.tab,"onUpdate:modelValue":t[1]||(t[1]=f=>e.tab=f),"active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:u(()=>[l(Qe,{name:"metaverseLogin",label:"Login"}),l(Qe,{name:"metaverseRegister",label:"Register"})]),_:1},8,["modelValue"]),l(Qt),l(ia,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=f=>e.tab=f),animated:""},{default:u(()=>[l(et,{name:"metaverseLogin"},{default:u(()=>[l(s,{onSuccess:t[2]||(t[2]=f=>e.$emit("close"))})]),_:1}),l(et,{name:"metaverseRegister"},{default:u(()=>[l(o,{onSuccess:t[3]||(t[3]=f=>e.tab="metaverseLogin")})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64)}var _s=Je(Ps,[["render",Ds]]);const Bs=je({name:"AudioLevel",props:{color:{type:String,required:!1},compact:{type:Boolean,required:!1},level:{type:Number,required:!1}},computed:{height(){return`${this.level??Xo.inputLevel.value}%`}}});function zs(e,t,a,i,n,c){return C(),U("div",{class:Ut(["verticalAudioLevel q-my-auto",{"q-ml-sm":e.compact}])},[I("span",{class:Ut(`text-${e.color??"primary"}`),style:Dt({height:e.height})},null,6)],2)}var xs=Je(Bs,[["render",zs],["__scopeId","data-v-0c112b59"]]),yl=We({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:t,emit:a}){const i=it(),n=F(null);let c=0;const s=[];function o(h){const $=typeof h=="boolean"?h:e.noErrorFocus!==!0,G=++c,q=(w,M)=>{a(`validation${w===!0?"Success":"Error"}`,M)},ae=w=>{const M=w.validate();return typeof M.then=="function"?M.then(ee=>({valid:ee,comp:w}),ee=>({valid:!1,comp:w,err:ee})):Promise.resolve({valid:M,comp:w})};return(e.greedy===!0?Promise.all(s.map(ae)).then(w=>w.filter(M=>M.valid!==!0)):s.reduce((w,M)=>w.then(()=>ae(M).then(ee=>{if(ee.valid===!1)return Promise.reject(ee)})),Promise.resolve()).catch(w=>[w])).then(w=>{if(w===void 0||w.length===0)return G===c&&q(!0),!0;if(G===c){const{comp:M,err:ee}=w[0];if(ee!==void 0&&console.error(ee),q(!1,M),$===!0){const B=w.find(({comp:me})=>typeof me.focus=="function"&&Ul(me.$)===!1);B!==void 0&&B.comp.focus()}}return!1})}function f(){c++,s.forEach(h=>{typeof h.resetValidation=="function"&&h.resetValidation()})}function b(h){h!==void 0&&st(h);const $=c+1;o().then(G=>{$===c&&G===!0&&(e.onSubmit!==void 0?a("submit",h):h!==void 0&&h.target!==void 0&&typeof h.target.submit=="function"&&h.target.submit())})}function S(h){h!==void 0&&st(h),a("reset"),ft(()=>{f(),e.autofocus===!0&&e.noResetFocus!==!0&&L()})}function L(){en(()=>{if(n.value===null)return;const h=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),$=>$.tabIndex!==-1);h!=null&&h.focus({preventScroll:!0})})}Wo(Hl,{bindComponent(h){s.push(h)},unbindComponent(h){const $=s.indexOf(h);$!==-1&&s.splice($,1)}});let g=!1;return no(()=>{g=!0}),io(()=>{g===!0&&e.autofocus===!0&&L()}),oo(()=>{e.autofocus===!0&&L()}),Object.assign(i.proxy,{validate:o,resetValidation:f,submit:b,reset:S,focus:L,getValidationComponents:()=>s}),()=>v("form",{class:"q-form",ref:n,onSubmit:b,onReset:S},la(t.default))}});const Fs=je({name:"MetaverseLogin",emits:["success"],data(){return{username:"",password:"",showPassword:!1,loading:!1,loginError:!1}},methods:{async submit(){this.loading=!0,await Yo.login(this.username,this.password)?(this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Welcome "+this.username+"."}),this.loginError=!1,this.$emit("success")):(this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Please check your username/password."}),this.loginError=!0),this.loading=!1}}});function Us(e,t,a,i,n,c){return C(),ne(yl,{onSubmit:e.submit,class:"column q-gutter-y-md"},{default:u(()=>[l(Se,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=s=>e.username=s),filled:"",dense:"",label:"Username",hint:"Enter your username.",disable:e.loading,error:e.loginError,onFocus:t[1]||(t[1]=s=>e.loginError=!1)},null,8,["modelValue","disable","error"]),l(Se,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=s=>e.password=s),filled:"",dense:"",label:"Password",type:e.showPassword?"text":"password",hint:"Enter your password.",disable:e.loading,error:e.loginError,onFocus:t[4]||(t[4]=s=>e.loginError=!1)},{append:u(()=>[l(Le,{name:e.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[2]||(t[2]=s=>e.showPassword=!e.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","disable","error"]),l(X,{label:"Login",type:"submit",color:"primary",class:"q-ml-auto",disable:e.username.length<=0||e.password.length<=0,loading:e.loading},null,8,["disable","loading"])]),_:1},8,["onSubmit"])}var Hs=Je(Fs,[["render",Us]]);const Ws=je({name:"MetaverseRegister",emits:["success","failure"],data(){return{username:"",email:"",password:"",confirmPassword:"",showPassword:!1,showConfirmPassword:!1,loading:!1}},methods:{async submit(){this.loading=!0;const e=await Yo.createAccount(this.username,this.password,this.email);if(this.loading=!1,!e){this.$q.notify({type:"negative",textColor:"white",icon:"warning",message:"Something went wrong..."}),this.$emit("failure");return}e.accountAwaitingVerification?this.$q.notify({type:"info",textColor:"white",icon:"email",timeout:0,message:"Check your email to complete registration.",actions:[{label:"Dismiss",color:"white"}]}):this.$q.notify({type:"positive",textColor:"white",icon:"cloud_done",message:"Registration successful."}),this.$refs.registrationForm.reset(),this.$emit("success")}}});function js(e,t,a,i,n,c){return C(),ne(yl,{class:"column q-gutter-y-md",ref:"registrationForm",onSubmit:e.submit},{default:u(()=>[l(Se,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=s=>e.username=s),filled:"",dense:"",label:"Username",hint:"Enter your username.","lazy-rules":"",rules:[s=>s&&s.length>0||"Please enter a username."],disable:e.loading},null,8,["modelValue","rules","disable"]),l(Se,{modelValue:e.email,"onUpdate:modelValue":t[1]||(t[1]=s=>e.email=s),filled:"",dense:"",label:"Email",hint:"Enter your email.","lazy-rules":"",rules:[s=>s&&s.length>0||"Please enter an email."],disable:e.loading},null,8,["modelValue","rules","disable"]),l(Se,{modelValue:e.password,"onUpdate:modelValue":t[3]||(t[3]=s=>e.password=s),filled:"",dense:"",label:"Password",type:e.showPassword?"text":"password",hint:"Enter your password.","lazy-rules":"",rules:[s=>s&&s.length>0||"Please enter a password."],disable:e.loading},{append:u(()=>[l(Le,{name:e.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[2]||(t[2]=s=>e.showPassword=!e.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),l(Se,{modelValue:e.confirmPassword,"onUpdate:modelValue":t[5]||(t[5]=s=>e.confirmPassword=s),filled:"",dense:"",label:"Confirm Password",type:e.showConfirmPassword?"text":"password",hint:"Enter your password again.","lazy-rules":"",rules:[s=>s&&s.length>0&&s===e.password||"Please ensure your passwords match."],disable:e.loading},{append:u(()=>[l(Le,{name:e.showConfirmPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:t[4]||(t[4]=s=>e.showConfirmPassword=!e.showConfirmPassword)},null,8,["name"])]),_:1},8,["modelValue","type","rules","disable"]),l(X,{label:"Register",type:"submit",color:"primary",class:"q-ml-auto",loading:e.loading},null,8,["loading"])]),_:1},8,["onSubmit"])}var Ks=Je(Ws,[["render",js]]),Zs=Wl(({app:e})=>{e.component("AudioOverlay",_n),e.component("ControlsOverlay",ai),e.component("GraphicsOverlay",mi),e.component("ChatOverlay",_i),e.component("ExploreOverlay",ur),e.component("PeopleOverlay",wr),e.component("AvatarOverlay",Rr),e.component("ReadyPlayerMeOverlay",Fr),e.component("MenuOverlay",jr),e.component("DebugOverlay",ds),e.component("ConferenceOverlay",hs),e.component("JitsiOverlay",ks),e.component("JitsiContainer",cn),Rs(e),e.component("LoginDialog",_s),e.component("AudioLevel",xs),e.component("MetaverseLogin",Hs),e.component("MetaverseRegister",Ks)});export{Zs as default};
